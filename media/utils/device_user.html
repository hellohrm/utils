<div class="device-user_get__content d-none">



    <div class="wraper bootstrap snippets bootdeys bootdey">

        <!--https://www.bootdey.com/snippets/view/Email-list-page-->

        <div class="page-title text-center  d-none">
            <h3 class="title pt-1 text-truncate ml-5">Inbox</h3>
        </div>

        <div class="row frm_chung">
            <!-- Left sidebar -->
            <div class="col-md-3">
                <div style="position:sticky;top:0">

                    <a href="#email-compose.html" class="btn btn-success btn-block d-none">Compose</a>
                    <div class="panel panel-default panel-white p-0 ">
                        <div class="panel-body p-0">
                            <div class="list-group no-border mail-list">
                                <div class="list-group-item active">

                                    <div class="clip-check check-secondary m-0 hellohrm-chk ">
                                        <input type="checkbox" value="1" checked="" id="sel_all_device">
                                        <label class="m-0" style="padding-left:20px!important" for="sel_all_device">&nbsp;</label>
                                        <span data-lang="js_009U$R|1|0">Devices</span>&nbsp;(<b>0</b>)
                                    </div>


                                    <a class="btn btn-link dropdown-toggle" mnu="thiet_bi_dume" style="position:absolute;right:5px;top:7px"> </a>

                                    <ul class="dropdown-menu dropdown-menu-right lang-lst sc-bottom-bar" role="menu">
                                        <li>
                                            <a mnu="thietbi_restore" class="dropdown-item py-2 text-large" style="border-top-left-radius: 7px;border-top-right-radius: 7px;">
                                                <label for="thietbi_restore_S1" style="margin:0">

                                                    <input type="file" accept=".dat"
                                                           name="" id="thietbi_restore_S1" style="border: 0;clip: rect(1px, 1px, 1px, 1px);height: 1px; margin: -1px;overflow: hidden;padding: 0;position: absolute;width: 1px;">

                                                    <span class="fa-stack">
                                                        <span class="vantay" style="display:inline-block;margin-top:3px;">
                                                        </span>
                                                        <i class="fa fa-user-plus text-success position-absolute" aria-hidden="true" style="margin-left: -5px;"></i>
                                                    </span>
                                                    <span data-lang="js_009U$R|2|1">Upload User to devices</span>

                                                </label>
                                            </a>
                                        </li>
                                        <li>
                                            <hr class="dropdown-divider">
                                            <a mnu="del_usr_multi_dev" class="dropdown-item py-2 text-large text-danger" style="border-top-left-radius: 7px;border-top-right-radius: 7px;">
                                                <span class="fa-stack">
                                                    <i class="fa fa-user" aria-hidden="true"></i>
                                                    <i class="fa fa-times  position-absolute" aria-hidden="true"></i>
                                                </span>
                                                <span data-lang="js_009U$R|2|2">Delete User</span>
                                            </a>
                                        </li>

                                        <li>
                                            <a mnu_bk="bk_opt" thietbi_restore class="dropdown-item py-2 text-large" style="border-top-left-radius: 7px;border-top-right-radius: 7px;">
                                                <div style="margin:0">
                                                    <span class="fa-stack">
                                                        <span class="vantay" style="display:inline-block;margin-top:3px;">
                                                        </span>
                                                        <i class="fa fa-user-plus text-success position-absolute" aria-hidden="true" style="margin-left: -5px;"></i>
                                                    </span>
                                                    <span data-lang="js_009U$R|2|1">Upload User to devices</span>

                                                </div>
                                            </a>
                                            <hr class="dropdown-divider">
                                        </li>


                                        <li>
                                            <a mnu_bk="bk_opt" class="dropdown-item py-2 text-large" style="border-top-left-radius: 7px;border-top-right-radius: 7px;">
                                                <!--<i class="ti-files mr-2"></i>-->
                                                <span class="fa-stack">
                                                    <i class="fa fa-user" aria-hidden="true"></i>
                                                    <i class="fa ti-files  position-absolute" aria-hidden="true"></i>
                                                </span>
                                                <span data-lang="js_009U$R|2|5">Backup User</span>
                                            </a>
                                        </li>

                                        <li>
                                            <hr class="dropdown-divider">
                                            <a mnu_bk="del_usr" class="dropdown-item py-2 text-large text-danger" style="border-top-left-radius: 7px;border-top-right-radius: 7px;">
                                                <span class="fa-stack">
                                                    <i class="fa fa-user" aria-hidden="true"></i>
                                                    <i class="fa fa-times  position-absolute" aria-hidden="true"></i>
                                                </span>
                                                <span data-lang="js_009U$R|2|2">Delete User</span>
                                            </a>
                                        </li>

                                        <!--<li>
                                            <a mnu_bk="1" class="dropdown-item py-2 text-large" style="border-top-left-radius: 7px;border-top-right-radius: 7px;">
                                                <i class="ti-cloud-up text-primary mr-2"></i>
                                                <span data-lang="js_009_31|11">Sao luu tat ca len Cloud</span>
                                            </a>
                                        </li>-->

                                        <li>
                                            <hr class="dropdown-divider">
                                            <a mnu mnu_bk="xuat_excel" class="dropdown-item py-2 text-large" style="border-top-left-radius: 7px;border-top-right-radius: 7px;">
                                                <i class="fa fa-file-excel-o  mr-2 text-success"></i>
                                                <span data-lang="js_009U$R|0|2">Export file Excel</span>
                                            </a>
                                        </li>

                                    </ul>

                                </div>
                                <div class="list-group-item">
                                    <div class="clip-check check-primary m-0 hellohrm-chk ">
                                        <input type="checkbox" value="1" checked="">
                                        <label class="mb-0" style="white-space:pre-wrap"></label>
                                        <span class="btn btn-link dropdown-toggle" style="position:absolute;right: 5px;top:7px;"></span>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                    <h3 class="panel-title  d-none">Labels</h3>
                    <div class="panel panel-default panel-white p-0  d-none">
                        <div class="panel-body p-0">
                            <div class="list-group no-border">
                                <a href="#" class="list-group-item"><span class="fa fa-circle text-info pull-right"></span>Web App</a>
                                <a href="#" class="list-group-item"><span class="fa fa-circle text-warning pull-right"></span>Project 1</a>
                                <a href="#" class="list-group-item"><span class="fa fa-circle text-purple pull-right"></span>Project 2</a>
                                <a href="#" class="list-group-item"><span class="fa fa-circle text-pink pull-right"></span>Friends</a>
                                <a href="#" class="list-group-item"><span class="fa fa-circle text-success pull-right"></span>Family</a>
                            </div>
                        </div>
                    </div>

                    <div pagesz_here>

                    </div>

                </div>
            </div>
            <!-- End Left sidebar -->
            <!-- Right Sidebar -->
            <div class="col-md-9 d-none">

                <h3 class="title text-center mt-3 d-none">Title Of List</h3>

                <div class="filter_adv_body d-none">

                    <a href="#" class="user-profile__close d-flex dume_invert"
                       style="justify-content:center;align-items: center;border-radius: 50%;padding: 5px;
                                background-color: rgba(191, 191, 191, 0.3);right: 1.5rem;left: auto;">
                        <i class="fa fa-times-circle text-danger dume_invert"></i>
                    </a>

                    <h5 class="title text-center mt-3 text-warning"><i class="ti-filter mr-1"></i><span data-lang="js_009U$R|4|12">Advance filter</span></h5>

                    <div class="panel panel-default panel-white panel_fixedcolor p-0">
                        <div class="panel-body p-0">
                            <div class="list-group no-border font-italic">

                                <div class="list-group-item p-1 d-none">
                                    <div class="clip-check check-secondary m-2 hellohrm-chk" style="flex-grow:1">
                                        <input fi="0" type="checkbox" value="1" checked="">
                                        <label class="mb-0 text-large">
                                            <span class="text-danger" style="white-space:normal">
                                                1. Xoa tat ca nhan vien hien co tren hsnv
                                            </span>
                                            <span class="text-success" style="white-space:normal">
                                                ,  va nap lai moi...
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <div class="list-group-item p-1 d-none">
                                    <div class="clip-check check-secondary m-2 hellohrm-chk" style="flex-grow:1">
                                        <input fi="1" type="checkbox" value="1" checked="">
                                        <label class="mb-0 text-large">
                                            <span class="text-danger" style="white-space:normal">
                                                2. Ko co tren hsnv
                                            </span>
                                            <span class="text-success" style="white-space:normal">
                                                ,  nhung co tren may cham cong.
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <div class="list-group-item p-1 d-none">
                                    <div class="clip-check check-secondary m-2 hellohrm-chk" style="flex-grow:1">
                                        <input fi="2" type="checkbox" value="1" checked="" id="dume_1_10_1724373753104">
                                        <label class="mb-0 text-large" for="dume_1_10_1724373753104">
                                            <span class="text-success" style="white-space:normal">
                                                2. Ko co tren hsnv
                                            </span>
                                            <span class="text-success" style="white-space:normal">
                                                ,  nhung co tren may cham cong.
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <div class="list-group-item d-flex flex-wrap  flex-md-nowrap p-2">
                                    <div class="clip-check check-secondary m-2" style="flex-grow:1;">
                                        <input fi="fp" type="checkbox" value="1" checked="">
                                        <label class="mb-0" style="white-space:pre-wrap"><span class="vantay dume_invert" style="margin-left:-5px;display:inline-block;vertical-align: sub;"></span><span data-lang="js_009U$R|1|2">Finger print</span>&nbsp;(<b>6</b>)</label>
                                    </div>

                                    <div class="clip-check check-secondary m-2" style="flex-grow:1;">
                                        <input fi="fa" type="checkbox" value="1" checked="">
                                        <label class="mb-0" style="white-space:pre-wrap"><i class="fa fa-meh-o text-large mr-1" aria-hidden="true" style="margin-left: -5px;"></i><span data-lang="js_009U$R|1|3">Face</span>&nbsp;(<b>6</b>)</label>
                                    </div>

                                    <div class="clip-check check-secondary m-2" style="flex-grow: 1;">
                                        <input fi="ca_pw" type="checkbox" value="1" checked="">
                                        <label class="mb-0" style="white-space:pre-wrap"><i class="fa fa-id-card-o mr-1" aria-hidden="true" style="margin-left: -5px;"></i><span data-lang="js_009U$R|3|5">Card</span> / <i class="fa fa-key mx-1" style="rotate:45deg;" aria-hidden="true"></i><span data-lang="js_009U$R|3|6">Password</span>&nbsp;(<b>6</b>)</label>
                                    </div>

                                    <div class="clip-check check-secondary m-2" style="flex-grow:1;">
                                        <input fi="adm" type="checkbox" value="1" checked="">
                                        <label class="mb-0" style="white-space:pre-wrap"><i class="fa fa-user-secret mr-1 text-primary text-large" aria-hidden="true" style="margin-left: -5px;"></i><span data-lang="js_009U$R|1|5">Admin</span>&nbsp;(<b>6</b>)</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="neo_head row no-gutters" style="z-index:3;position:sticky;top:0">

                    <div class="col-lg-12">

                        <div class="btn-toolbar align-items-center" role="toolbar">

                            <div class="ml-1 clip-check check-primary hellohrm-chk" style="">
                                <input type="checkbox" value="1">
                                <label class="m-0" style="padding-left:20px!important" data-toggle="dropdown">
                                    &nbsp;<span data-lang="js_009U$R|4|3">Select</span>
                                </label>

                                <ul class="filter_adv_menu dropdown-menu lang-lst">
                                    <li>
                                        <a mnu="sel_a_pg" class="dropdown-item py-2" style="border-top-left-radius: 7px;border-top-right-radius: 7px;">
                                            <i class="fa fa-check-circle mr-2 text-large" aria-hidden="true"></i>
                                            <span data-lang="js_009U$R|4|6">Check whole page</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a mnu="rmv_a_pg" class="dropdown-item py-2 text-danger" style="border-top-left-radius: 7px;border-top-right-radius: 7px;">
                                            <i class="fa fa-circle-o mr-2 text-large" aria-hidden="true"></i>
                                            <span data-lang="js_009U$R|4|7">Uncheck whole page</span>
                                        </a>
                                    </li>
                                    <li>
                                        <hr class="dropdown-divider">
                                        <a mnu="sel_all" class="dropdown-item py-2 text-primary " style="border-bottom-left-radius: 7px;border-bottom-right-radius: 7px;">
                                            <i class="fa fa-check-square mr-2 text-large" aria-hidden="true"></i>
                                            <span data-lang="js_009U$R|4|8">Select all</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a mnu="rmv_all" class="dropdown-item py-2 text-danger" style="border-bottom-left-radius: 7px;border-bottom-right-radius: 7px;">
                                            <i class="fa fa-square-o mr-2 text-large" aria-hidden="true"></i>
                                            <span data-lang="js_009U$R|4|9">Unselect all</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>


                            <div nut_lenh class="filter_adv dong btn-group m-2">

                                <button type="button" class="btn px-2 btn-warning dropdown-toggle position-relative" data-toggle="dropdown" aria-expanded="false">
                                    <i class="ti-list-ol"></i>
                                </button>

                                <button gmnu="lst_more" show_more="" type="button" class="btn btn-o btn-success dropdown-toggle"></button>

                                <ul class="filter_adv_menu dropdown-menu lang-lst">
                                    <li>
                                        <a mnu="1" class="dropdown-item py-2 text-large" style="border-top-left-radius: 7px;border-top-right-radius: 7px;">
                                            <i class="ti-filter mr-2"></i>
                                            <span data-lang="js_009U$R|4|10">Show advance filter</span>
                                        </a>
                                        <hr class="dropdown-divider">
                                    </li>
                                    <li class="d-none">
                                        <a mnu="2" class="dropdown-item py-2 text-danger text-large" style="border-bottom-left-radius: 7px;border-bottom-right-radius: 7px;">
                                            <i class="fa fa-times" style="position: absolute; margin-top: 8px;margin-left: 12px;"></i><i class="ti-filter mr-2"></i>
                                            <span data-lang="js_009U$R|4|11">Hide advance filter</span>
                                        </a>
                                        <hr class="dropdown-divider">
                                    </li>

                                    <li>
                                        <a mnu="mobi_gioihan" class="dropdown-item py-2 text-large" style="border-bottom-left-radius: 7px;border-bottom-right-radius: 7px;">
                                            <i class="fa fa-user-circle  mr-2"></i>
                                            <span data-lang="js_009U$R|4|14">Match employee's Profile</span>
                                        </a>
                                        <hr class="dropdown-divider">
                                    </li>

                                    <li>
                                        <a mnu="xuat_excel" class="dropdown-item py-2 text-large" style="border-bottom-left-radius: 7px;border-bottom-right-radius: 7px;">
                                            <i class="fa fa-file-excel-o  mr-2 text-success"></i>
                                            <span data-lang="js_009U$R|0|2">Export file Excel</span>
                                        </a>
                                    </li>

                                </ul>

                            </div>

                            <div class="ml-auto mr-1 timkiem_dog">
                                <div class="search-box dume_invert">
                                    <button class="search-box-btn  justify-content-center align-items-center">
                                        <i class="fa fa-times-circle csor-p  dume_invert text-danger" aria-hidden="true" style="font-size: 24px;"></i>
                                        <i class="ti-search csor-p" style="font-size:20px"></i>
                                    </button>
                                    <input type="text" class="search-box-input" maxlength="20" placeholder="Enter your text ...">
                                </div>
                            </div>
                        </div>

                    </div>

                </div> <!-- End row -->

                <div class="panel panel-default panel-white border-0">
                    <div class="panel-body">

                        <!--https://www.bootdey.com/snippets/view/Email-list-page-->
                        <!--https://www.bootdey.com/snippets/view/bs4-crud-users-->

                        <div class="row_tb1 row table-responsive">

                            <div class="list-group" style="background-color:rgba(191,191,191,0.20)">

                                <!--https://www.jquery-az.com/bootstrap4/demo2.php?ex=90.0_6 Starting list group here -->
                                <div class="">
                                    <div elui="etotal" class="list-group-item d-flex justify-content-between align-items-center">
                                        <span class="font-italic">
                                            <i class="fa fa-user"></i>
                                            <span data-lang="js_009U$R|4|0">Total Users: </span>
                                        </span>
                                        <span class="badge badge-info badge-pill  ml-2 mr-auto" style="padding-top:7px!important">0</span>
                                    </div>

                                    <div elui="sync_profile" class="list-group-item d-none justify-content-center align-items-center px-0 text-success">
                                        <span class="fa-stack text-large">
                                            <i class="fa fa-user" aria-hidden="true"></i>
                                            <i class="ti-control-shuffle position-absolute" aria-hidden="true"></i>
                                        </span>
                                        <span data-lang="js_009U$R|2|3" class="ml-1 csor-p">
                                            Sync User - Employee profile
                                        </span>
                                    </div>

                                    <div elui="btnlst" class="d-none list-group-item ustify-content-center align-items-center px-0">
                                        <div class="mx-auto btn-toolbar  align-items-center" role="toolbar">
                                            <div class="btn-group">

                                                <button hide_lsta type="button" class="btn btn-danger d-none">
                                                    <i class="ti-close"></i> <span>Hide List</span>
                                                </button>

                                                <button show_lsta type="button" class="btn btn-success">
                                                    <i class="ti-user"></i> <span>Show List</span>
                                                </button>

                                                <button gmnu="lst_more" show_more type="button" class="btn btn-o btn-success dropdown-toggle"></button>

                                            </div>
                                        </div>
                                    </div>

                                    <div elui="pgcnt" class="d-none list-group-item justify-content-between align-items-center ">
                                        <span class="font-italic" data-lang="js_009U$R|4|1">Total pages :</span>
                                        <span class="badge badge-info badge-pill  ml-2 mr-auto" style="padding-top:7px!important">0</span>
                                    </div>

                                </div>

                                <div elui="pgsz" class="form-group align-items-center mt-3 mx-2">
                                    <span data-lang="js_009U$R|4|2" class="font-italic text-right">Select Number Of Rows: </span>
                                    <!--		Show Numbers Of Rows 		-->
                                    <select class="form-control ml-1" pagesz="maxRows" style="width: 75px;">
                                        <option value="5">5</option>
                                        <option value="10" selected="selected">10</option>
                                        <option value="15">15</option>
                                        <option value="20">20</option>
                                        <option value="50">50</option>
                                        <option value="70">70</option>
                                        <option value="100">100</option>
                                        <option value="1000000">(All)</option>
                                    </select>

                                </div>
                            </div>

                            <table class="table mcc_usr_lst">
                                <thead>
                                    <tr>
                                        <th data-lang="js_009U$R|3|3">ID</th>
                                        <th data-lang="js_009U$R|1|1">User</th>
                                        <th data-lang="js_009U$R|1|4">Card / PW</th>
                                        <th style="word-break:break-all;" data-lang="js_009U$R|1|6">Privilege</th>
                                    </tr>

                                </thead>

                                <tbody></tbody>

                            </table>

                            <!--		Start Pagination -->
                            <div class='dropup pagination-container position-relative w-100 d-flex flex-wrap'>

                                <ul class="pagination  mt-3 mb-0">

                                    <li data-page="prev" class="page-item d-none">
                                        <a class="page-link d-flex align-items-center h-100" href="#" aria-label="Previous">
                                            <i class="ti-arrow-left"></i>
                                        </a>
                                    </li>

                                    <!--	Here the JS Function Will Add the Rows -->
                                    <li class="page-item d-none" data-page="next" dume_id="prev">
                                        <a class="page-link d-flex  align-items-center h-100" href="#" aria-label="Next">
                                            <i class="ti-arrow-right"></i>
                                        </a>
                                    </li>
                                </ul>

                                <ul data-toggle="dropdown" class="list-unstyled d-flex  mt-3 mb-0">

                                    <li class="page-item " data-page="selpage" dume_id="selpage">
                                        <a class="page-link  d-flex  align-items-center h-100" aria-label="selpage" style="margin-left: 5px;
                                           padding: 0;
                                           border: none;
                                           background-color: transparent!important;">
                                            <span class="usr_in_dev"><span sl_pg>-</span>&nbsp;<span data-lang="js_009U$R|4|4">page</span></span>
                                        </a>
                                    </li>

                                    <li class="page-item disabled" data-page="selpage" dume_id="selpage">
                                        <a class="page-link   d-flex  align-items-center h-100" aria-label="selpage" style="padding:0;
                                           border: none;
                                           background-color: transparent!important;">
                                            /&nbsp;<span data-lang="js_009U$R|4|5">total</span>&nbsp;<span sl_usr>-</span>
                                        </a>
                                    </li>

                                </ul>

                                <div class="dropdown-menu kytich wv-100 pg_list" style="grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
                                    max-width: 800px;overflow-y:auto; overflow-x:hidden;
                                    position: absolute; width: 100%;">

                                </div>

                            </div>
                            <!--  Developed By Yasser Mas -->

                        </div>


                        <div class="row_tb2 row">

                        </div>

                    </div> <!-- panel body -->
                </div> <!-- panel -->

                <div lst_thongbao class="m-2 m-md-5" style="margin-left: auto!important;margin-right: auto!important;">

                    <div style="margin:auto;max-width:500px;">

                        <div class="dothi-muiten mx-5" style="z-index:1"></div>

                        <div class="panel bg-transparent" style="border-radius: 30px">

                            <div class="card-body pb-0" style="background: transparent;">

                                <div inf="1" class="alert overflow-hidden expander" style="border-right: 1px solid #ffc107 !important;border-left: 1px solid #ffc107 !important;border-radius: 30px;">
                                    <p class="text-center" data-lang="js_009U$R|6|0">Oops... No data to display.</p>

                                    <hr class="hrx  m-2">
                                    <p class="mb-0" data-lang="js_009U$R|6|1">Please check device list ticked or type valid search text for result again.</p>

                                </div>

                                <div inf="2" class="d-none alert overflow-hidden expander" style="border-right: 1px solid #ffc107 !important;border-left: 1px solid #ffc107 !important;border-radius: 30px;">
                                    <hr class="hrx  m-2">
                                    <p class="mb-0" data-lang="js_009U$R|6|3">Notes: Valid devices have Checked-state in list above, you can Check or Uncheck for custom Executing ...</p>
                                </div>


                                <div class="text-center my-2 d-none">

                                    <div type="button" class="btn btn-warning mr-2 upattdat">
                                        <i class="ti-upload"></i>
                                        <span>Upload</span>
                                    </div>

                                    <div type="button" class="btn btn-outline-primary attlog_sample">
                                        <i class="ti-cloud-down"></i>
                                        <span>Xem Mau</span>
                                    </div>

                                    <a class="btn btn-sm xemmau">
                                        <span class="ti-more-alt" style="font-size:18px;vertical-align:middle"></span>
                                        <small>MORE</small>
                                    </a>

                                </div>
                            </div>
                        </div>

                    </div>

                </div>

            </div> <!-- end Col-9 -->


            <div class="col-md-8 mx-auto d-none">

                <div class="panel panel-default panel-white p-0 mx-auto">

                    <div class="panel-body p-0">

                        <div cmd_del_usr class="list-group no-border mail-list">

                            <a mnu="nhanvien" class="list-group-item d-flex align-items-center" style="display:none!important">
                                <i class="ti-user text-large  mr-1"></i>
                                <span class="badge badge-primary badge-pill mr-1" style="padding-bottom: 2px!important;">0</span>
                                <span class="text-danger" data-lang="js_009U$R|9|2">
                                    Synchronous execution
                                </span>
                            </a>

                            <a mnu="usr" class="list-group-item d-flex align-items-center" style="display:none!important">
                                <i class="ti-user text-large  mr-1"></i>
                                <span class="badge badge-primary badge-pill mr-1" style="padding-bottom: 2px!important;">0</span>
                                <span class="text-danger" data-lang="js_009U$R|7|0">
                                    Delete User(s)
                                </span>
                            </a>

                            <div class="list-group-item d-flex  align-items-center" style="display:none!important">
                                <i class="fa fa fa-reply  mx-3" aria-hidden="true" style="rotate: 180deg;"></i>
                                <a mnu="fp" class="d-flex  text-warning">
                                    <i class="vantay dume_invert mr-1"></i>
                                    <span class="badge badge-info badge-pill mr-1" style="padding-bottom: 2px!important;display: flex;align-items: center;">0</span>
                                    <span data-lang="js_009U$R|7|1">Only delete Finger print</span>
                                </a>
                            </div>

                            <div class="list-group-item" style="display:none!important">
                                <i class="fa fa fa-reply  mx-3" aria-hidden="true" style="rotate: 180deg;"></i>
                                <a mnu="fa">
                                    <i class="fa fa-meh-o text-extra-large  mr-1" aria-hidden="true"></i>
                                    <span class="badge badge-primary badge-pill mr-1" style="padding-bottom: 2px!important;">0</span>
                                    <span data-lang="js_009U$R|7|2">Only delete Face</span>
                                </a>
                            </div>

                            <div class="list-group-item" style="display:none!important">
                                <i class="fa fa fa-reply  mx-3" aria-hidden="true" style="rotate: 180deg;"></i>
                                <a mnu="ca">
                                    <i class="fa fa-id-card-o  mr-1"></i>
                                    <span class="badge badge-primary badge-pill mr-1" style="padding-bottom: 2px!important;">0</span>
                                    <span data-lang="js_009U$R|7|3">Only delete Card</span>
                                </a>
                            </div>

                            <div class="list-group-item" style="display:none!important">
                                <i class="fa fa fa-reply  mx-3" aria-hidden="true" style="rotate: 180deg;"></i>
                                <a mnu="pw">
                                    <i class="fa fa-key  mr-1" style="rotate:45deg;" aria-hidden="true"></i>
                                    <span class="badge badge-primary badge-pill mr-1" style="padding-bottom: 2px!important;">0</span>
                                    <span data-lang="js_009U$R|7|4">Only delete Password</span>
                                </a>
                            </div>

                            <div class="list-group-item" style="display:none!important">
                                <i class="fa fa fa-reply  mx-3" aria-hidden="true" style="rotate: 180deg;"></i>
                                <a mnu="adm" href="#" class="dume_invert">
                                    <i class="fa fa-user-secret text-extra-large  mr-1" aria-hidden="true"></i>
                                    <span class="badge badge-primary badge-pill mr-1" style="padding-bottom: 2px!important;">0</span>
                                    <span data-lang="js_009U$R|7|5">Only delete Admin</span>
                                </a>
                            </div>

                            <div mnu="xuat_excel_fuk_til" class="btn btn-link text-left text-large" style="display:none!important">
                                <i class="fa fa-file-excel-o  mr-2 text-success"></i>
                                <span class="dume_invert" data-lang="js_009U$R|0|2" style="white-space:break-spaces">Export file Excel</span>
                            </div>

                        </div>

                    </div>

                </div>

                <div class="text-center mb-3">

                    <div class="my-3 font-italic text-info">
                        <i class="ti-hand-point-down" aria-hidden="true" style="font-size: 25px;vertical-align: text-top;"></i>
                        <span data-lang="js_009U$R|6|2">You can custom select Users to Executing.</span>
                    </div>

                    <a href="#" class="btn btn-info shownhanvien" data-lang="js_009U$R|5|4">
                        Show User list
                    </a>
                    <a href="#" class="btn btn-danger hidenhanvien d-none">
                        <i class="fa fa-times-circle"></i>
                        <span data-lang="js_009U$R|5|5">Hide User list</span>
                    </a>
                </div>

                <div vidu class="d-none">

                    <h3 class="panel-title">
                        <span class="fa fa-circle text-info mr-2"></span>
                        <span class="badge badge-primary badge-pill">23</span>
                        <span>nhan vien co tren may cham cong, nhung ko co tren hsnv</span>
                        <a href="#" class="px-2 py-0 btn btn-link text-truncate chitiet_1" style="border-radius: 10px;">
                            Chi tiet<i class="fa fa-caret-down mx-1" aria-hidden="true"></i>
                        </a>
                    </h3>
                    <div class="panel panel-default panel-white p-0">
                        <div class="panel-body p-0">
                            <div class="list-group no-border">
                                <a href="#" class="list-group-item">
                                    <i class="ti-hand-point-right mr-2"></i>
                                    3. Nap nhung nhan vien nay vao hsnv
                                </a>
                                <a href="#" class="list-group-item text-warning">
                                    <i class="ti-hand-point-right mr-2"></i>
                                    4. Xoa tat ca nhan vien nay tren tat ca may cham cong /hoac chon may cham cong can xoa  ...
                                    <span class="px-2 mx-3 btn-danger btn-o  text-truncate btn-danger " style="border-radius: 5px;">Chon ...<i class="fa fa-caret-down" aria-hidden="true"></i></span>
                                </a>
                            </div>
                        </div>
                    </div>

                </div>

            </div>


        </div><!-- End row -->


        <div dongbo_hsnv class="row mt-3 mt-md-5 position-relative d-none">

            <div class="col-12 position-relative d-flex justify-content-center align-items-center w-100" style="flex-direction:row;">
                <div style="position: absolute;right: 50%;z-index: 1;text-align: right;margin-right: 50px;">

                    <span style="position: absolute;font-size: 25px;margin-top: -30px; right:0">
                        <span usr_cnt>0</span><i class="ti-user ml-1"></i>
                    </span>

                    <span data-lang="js_009U$R|9|0">Users on the timekeeper device</span>

                </div>

                <div class="thietbi_left"></div>

                <div class="giaonhau_center">
                    <span usr_emp_cnt class="badge badge-success badge-pill " style="padding-top:7px!important;transform: translate(-50%,-50%) rotate(-45deg);position: absolute;top: 50%;left: 50%;">
                        0
                    </span>
                </div>
                <div class="hsnv_right"></div>

                <div style="position: absolute;left: 50%;margin-left: 50px;">
                    <span style="position: absolute;font-size: 25px;margin-top: -30px">
                        <i class="ti-server mr-1"></i><span emp_cnt>0</span>
                    </span>
                    <span data-lang="js_009U$R|9|1">Employees in profile</span>
                </div>
            </div>


            <div class="col-12 my-4">
                <div sync_cmd class="mt-5 text-center">
                    <div thoat_usr_hsnv class="btn btn-o btn-sm btn-danger d-none" style="position: absolute;left: 0;"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
                    <a data-lang="js_009U$R|9|2" href="#" class="btn btn-primary sync_thucthi" style="width: 200px;white-space: normal;text-align: center;border-radius:100px;">
                        Synchronous execution
                    </a>
                    <!--<a href="#" class="btn btn-danger hidenhanvien d-none">
                        <i class="fa fa-times-circle"></i>
                        Hide nhan vien
                    </a>
                    <div xem_usr_hsnv class="btn btn-link p-0 text-info" style="font-size: 30px; position: absolute;right: 0;margin-top: -5px;">
                        <i class="fa fa-pie-chart" aria-hidden="true"></i>
                    </div>-->
                </div>
            </div>

            <div def_sec_pos class="d-none">

                <div class="m-auto px-3 pt-0 text-center" style="max-width:800px">
                    <div class="alert gender-note" role="alert">

                        <h4 class="alert-heading">
                            <i class="ti-info-alt text-warning mr-2"></i><span data-lang="js_007_24">Notes</span>
                        </h4>

                        <p class="font-italic">
                            <span data-lang="js_009U$R|9|3">The Gender column will be handled automatically:</span>
                            <select rst_el="gender" class="form-control underline d-inline-block position-relative" style="width:auto"></select>
                        </p>


                        <hr class="hrx" />

                        <p class="mb-0" data-lang="js_013_7|2">
                            <i class="text-small">
                                <span data-lang="js_009U$R|9|4">Date type data column will be automatically added if missing or invalid</span> /
                                <span data-lang="js_007_9">Birthdate</span>
                            </i>

                            <input rst_el="birthday" type="date" class="form-control underline d-inline-block position-relative" style="width:auto" onfocus="this.showPicker()">

                            <i class="text-small" data-lang="js_007_10">Hiredate</i>:
                            <input rst_el="hireday" type="date" class="form-control underline d-inline-block position-relative" style="width:auto" onfocus="this.showPicker()">

                        </p>
                    </div>
                </div>


                <!--	dialog user select section - position to import	-->
                <div class="row mx-0 form-group align-items-center mt-4">
                    <div class="col-12 col-md-3 col-form-label text-md-right text-left text-nowrap">
                        <span data-lang="js_007_14" class="font-italic text-right">Organization</span> :
                    </div>
                    <select rst_el="secid" class="col-12 col-md-9 form-control"></select>
                </div>
                <div class="row mx-0 form-group align-items-center mt-2">
                    <div class="col-12 col-md-3 col-form-label text-md-right text-left text-nowrap">
                        <span data-lang="js_007_15" class="font-italic text-right">Position</span> :
                    </div>
                    <select rst_el="posid" class="col-12 col-md-9 form-control"></select>
                </div>

                <div class="col-12 mt-3">

                    <div class="text-center my-1">

                        <a href="#" class="user-profile__close dume_invert d-none" style="justify-content:center;align-items: center;border-radius: 50%;padding: 20px;background-color: rgba(191, 191, 191, 0.3);
top:-5px;left: 50%;transform: translateX(-50%);">
                            <i class="ti-close"></i>
                        </a>

                        <div show_adv class="btn btn-primary">
                            <span class="ti-check-box"></span>
                            <span data-lang="js_009U$R|9|5">Synchronization options</span>
                        </div>

                    </div>

                    <div usr_hsnv class="row mx-0 position-relative" style="display:none">

                        <div class="usr_from_mcc" style="">

                            <!--<div class="mcc_usr_roam_hsnv" style="">
                                mcc_usr_roam_hsnv
                            </div>-->
                            <div class="m-2 mt-3 mt-md-0 align-self-md-center text-info" style="">
                                <span style="white-space:pre-wrap" data-lang="js_009U$R|9|6">The Users have a duplicate on employee's profile</span>&nbsp;(<b>2</b>)
                                <select imp_opt="upt" class="form-control underline d-inline-block position-relative" style="width:auto">
                                    <option value="1" data-lang="js_009U$R|10|1">Update</option>
                                    <option value="2" data-lang="js_009U$R|10|2">Delete</option>
                                    <option value="0" data-lang="js_009U$R|10|3">(None)</option>
                                </select>
                            </div>

                        </div>


                        <div class="muiten_2_db col-6" style="">

                            <!--<div>
                                <span class="font-italic">
                                    <i class="fa fa-user"></i>
                                    <span>Tong nhan vien</span>
                                </span>
                                <span class="badge badge-primary badge-pill  ml-2 mr-auto" style="padding-top:7px!important">15555</span>
                            </div>-->

                            <div class="m-2 mt-3 mt-md-0 align-self-md-center text-success" style="">
                                <span style="white-space:pre-wrap" data-lang="js_009U$R|9|7">The Users have not on the employee's profile yet</span>&nbsp;(<b>2</b>)
                                <select imp_opt="ins" class="form-control underline d-inline-block position-relative" style="width:auto">
                                    <option value="1" data-lang="js_009U$R|10|0">Insert</option>
                                    <option value="0" data-lang="js_009U$R|10|3">(None)</option>
                                </select>
                            </div>

                        </div>


                        <div class="usr_of_hsnv col-6" style="">

                            <div class="m-2 mt-3 mt-md-0 align-self-md-center text-secondary" style="text-decoration:line-through">
                                <span style="white-space:pre-wrap" data-lang="js_009U$R|9|8">Employees have been existing on profile do not match Users</span>&nbsp;(<b>2</b>)
                                <select imp_opt="del" class="form-control underline d-inline-block position-relative" style="width:auto">
                                    <option value="0" data-lang="js_009U$R|10|3">(None)</option>
                                    <option value="1" data-lang="js_009U$R|10|2">Delete</option>
                                </select>
                            </div>


                        </div>

                    </div>

                </div>

            </div>

            <div sua_empinf class="py-1 d-none">
                <h3 class="title text-center mt-2 mb-3" data-lang="js_007_13">Employee's profile</h3>
                <form class="form">
                    <div class="row">
                        <div class="col">
                            <div class="row">
                                <div class="col">
                                    <div class="form-group">
                                        <label data-lang="js_007_5">Last name</label>
                                        <input rst_el="ho" class="form-control" type="text" name="name" value="" maxlength="50">
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-group">
                                        <label data-lang="js_007_7">First name</label>
                                        <input rst_el="ten" class="form-control" type="text" name="username" value="" maxlength="50">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <!--https://stackoverflow.com/questions/29436074/change-date-input-triangle-to-a-calendar-icon-->
                        <div class="col">
                            <div class="row">

                                <div class="col">
                                    <label data-lang="js_007_12">Gender</label>
                                    <select rst_el="gender" class="form-control"></select>
                                </div>

                                <div class="col">
                                    <div class="form-group">
                                        <label data-lang="js_007_9">Birthdate</label>
                                        <input rst_el="birthday" type="date" class="form-control" onfocus="this.showPicker()">
                                        <!--<input class="form-control" type="text" name="name" placeholder="John Smith" value="John Smith">-->
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-group">
                                        <label data-lang="js_007_10">Hiredate</label>
                                        <input rst_el="hireday" type="date" class="form-control" onfocus="this.showPicker()">
                                        <!--<input class="form-control" type="text" name="username" placeholder="johnny.s" value="johnny.s">-->
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>



                </form>
            </div>

            <div ngonngu="en" class="d-none">
                <span data-lang="js_009U$R|10|7">Opps! There is no need to synchronize because of no new Users...</span>
                <span class="d-none" data-lang="js_009U$R|0|1">Chose action ...</span>
            </div>

        </div>


        <div gmnu="bk_sel_emp" class="btn emp_att_cnt cart_shake ml-auto d-none" data-totalemps="0"
             style="position: absolute;bottom: 0px;right: 15px;z-index: 2;">

            <i class="ti-user"></i>
            <i class="fa fa-caret-down" aria-hidden="true"></i>

        </div>

        <style type="text/css">

            .thietbi_left{
                background:antiquewhite;
                width:150px;
                height:150px;
                border-radius:50%;
                position:absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                margin-left: -50px;
              }
              .giaonhau_center{
                background:rgba(9,4,42,0.22);
                width:80px;
                height:80px;
               border-radius:0px 90%;
                transform:rotate(45deg);
                position:relative;
                z-index:1;
              }

              .hsnv_right{
                background:yellow;
                width:150px;
                height:150px;
                border-radius:50%;
                position:absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                margin-left: 50px;
                text-align: right;
              }

                .ko_roam .thietbi_left {
                    margin-left: -75px;
                }
                .ko_roam .giaonhau_center {
                    display:none!important;
                }

                .ko_roam .hsnv_right {
                    margin-left: 75px;
                }

            .darkcolor .thietbi_left {
                background:#7B3F61;
            }
            .darkcolor  .hsnv_right{
                background:#E78481;
            }

        </style>

    </div>



    <div style="height:800px" desk-urs-grid class="bg-green"></div>


    <div tmpl="device_list" class="list-group">

        <!--https://www.jquery-az.com/bootstrap4/demo2.php?ex=90.0_6 Starting list group here -->
        <div gmnu="general" class="d-none">
            <div class="list-group-item d-flex justify-content-between align-items-center">
                <span class="text-success">
                    <i class="fa fa-circle"></i>
                    <span>jQuery Tutorials</span>
                </span>
                <span class="badge badge-primary badge-pill">55</span>
            </div>
            <a href="https://www.jquery-az.com/javascript-tutorials/" class="list-group-item d-flex justify-content-between align-items-center list-group-item-action list-group-item-danger">
                JavaScript Tutorials
                <span class="badge badge-primary badge-pill">23</span>
            </a>
            <a href="#" mnu="thucthi_job" hrefx="https://www.jquery-az.com/bootstrap-tips-tutorials/" class="list-group-item d-flex justify-content-between align-items-center list-group-item-action list-group-item-success">
                Bootstrap 3 Tutorials
                <span class="badge badge-primary badge-pill">109</span>
            </a>
            <a href="#" mnu="get_fp_tmpl" href_bk="https://www.jquery-az.com/html-tutorials/" class="list-group-item d-flex justify-content-between align-items-center list-group-item-action list-group-item-info">
                Download finger template
                <span class="badge badge-primary badge-pill">10</span>
            </a>
            <a href="#" mnu="show_dev_lst" sta="0" class="list-group-item d-flex justify-content-between align-items-center list-group-item-action list-group-item-secondary disabled">
                hien thi danh sach thiet bi
                <span class="badge badge-primary badge-pill">0</span>
            </a>

        </div>



        <div gmnu="chitietFUK" class="d-none">

            <!--https://www.jquery-az.com/bootstrap4/demo2.php?ex=90.0_6 Starting list group here -->
            <a mnu="bk_opt" thietbi class="btn list-group-item d-flex justify-content-between ">
                <span class="dume_invert text-left text-large text-primary">
                    <!--<i class="ti-files mr-2"></i>-->
                    <span class="fa-stack">
                        <i class="fa fa-user" aria-hidden="true"></i>
                        <i class="fa ti-files  position-absolute" aria-hidden="true"></i>
                    </span>
                    <span data-lang="js_009U$R|2|5" style="white-space:break-spaces">Backup User</span>
                </span>
            </a>

            <a mnu="del_usr" phanmem class="btn list-group-item d-flex justify-content-between">
                <span class="dume_invert text-left text-large text-primary">
                    <span class="fa-stack">
                        <i class="ti-user" aria-hidden="true"></i>
                        <i class="fa fa-times  position-absolute" aria-hidden="true"></i>
                    </span>
                    <span data-lang="js_009U$R|2|2" style="white-space:break-spaces">Delete User</span>
                </span>
            </a>

            <a mnu="thietbi_restore_main_mnu" phanmem class="btn list-group-item d-flex justify-content-between">
                <label style="margin:0;text-align:left; cursor:pointer">
                    <!--<input type="file" name="" id="thietbi_restore_main_mnu" accept=".dat" style="border: 0;clip: rect(1px, 1px, 1px, 1px);height: 1px; margin: -1px;overflow: hidden;padding: 0;position: absolute;width: 1px;">-->
                    <span class="fa-stack" style="margin-left: -3px;margin-right: 8px;">
                        <span class="dume_invert vantay" style="display:inline-block;margin-top:3px;">
                        </span>
                        <i class="fa fa-user-plus text-success position-absolute" aria-hidden="true" style="margin-left: -5px;"></i>
                    </span>
                    <span class="dume_invert text-primary  text-large text-wrap" data-lang="js_009U$R|2|1" style="white-space:break-spaces">Upload User to devices</span>
                </label>
            </a>

            <a mnu="sync_profile_mnu" phanmem class="btn list-group-item d-flex justify-content-between">
                <span class="dume_invert text-left text-large text-primary">
                    <span class="fa-stack">
                        <i class="fa fa-user" aria-hidden="true"></i>
                        <i class="ti-control-shuffle position-absolute" aria-hidden="true"></i>
                    </span>
                    <span data-lang="js_009U$R|2|3" style="white-space:break-spaces">Sync User - Employee profile</span>
                </span>
            </a>

            <a mnu="sel_e_ascess" class="list-group-item py-2 text-large text-info">
                <span class="fa-stack">
                    <i class="ti-user" aria-hidden="true"></i>
                    <i class="ti-check position-absolute" aria-hidden="true"></i>
                </span>
                <span data-lang="js_009U$R|2|4" style="white-space:break-spaces">User's list.</span>
            </a>

        </div>


        <div gmnu="lst_more" class="d-none">
            <!--https://www.jquery-az.com/bootstrap4/demo2.php?ex=90.0_6 Starting list group here -->
            <a mnu="filter_usr_hsnv" thietbi class="btn list-group-item d-flex justify-content-between ">
                <span class="dume_invert text-left text-large">
                    <i class="ti-id-badge text-primary mr-2"></i>
                    <span style="white-space:pre-wrap;">Co tren may cham cong / ko co tren hsnv</span>
                </span>
            </a>
            <a mnu="filter_usr_hsnv" phanmem class="btn list-group-item d-flex justify-content-between">
                <span class="dume_invert text-left text-large">
                    <i class="ti-server text-primary mr-2"></i>
                    <span style="white-space:pre-wrap;">Co tren HSNV / ko co tren may cham cong</span>
                </span>
            </a>
        </div>


        <div gmnu="sync_sel_emp" class="d-none">

            <!--https://www.jquery-az.com/bootstrap4/demo2.php?ex=90.0_6 Starting list group here -->
            <a mnu="sync_hsvn_sel_emp" class="list-group-item d-none justify-content-between ">
                <span class="dume_invert  text-left text-large">
                    <i class="ti-control-shuffle text-primary mr-2"></i>
                    <span>Nap nhan vien da chon </span>
                </span>
            </a>

            <a mnu="del_usr" class="p-2 list-group-item d-flex justify-content-between text-danger">
                <span class="fa-stack mr-1">
                    <i class="ti-user" aria-hidden="true"></i>
                    <i class="fa fa-times  position-absolute" aria-hidden="true"></i>
                </span>
                <span class="mr-auto text-large" data-lang="js_009U$R|2|2" style="white-space:break-spaces">Delete User</span>
            </a>

            <a mnu="sync_profile_mnu" phanmem="" class="p-2  list-group-item d-flex justify-content-between">
                <span class="dume_invert text-left text-large text-primary">
                    <span class="fa-stack">
                        <i class="fa fa-user" aria-hidden="true"></i>
                        <i class="ti-control-shuffle position-absolute" aria-hidden="true"></i>
                    </span>
                    <span data-lang="js_009U$R|2|3" style="white-space:break-spaces">Sync User - Employee profile</span>
                </span>
            </a>

            <a mnu="xuat_excel" phanmem="" class="p-2 list-group-item d-flex justify-content-between">
                <span class="text-left text-large">
                    <i class="fa fa-file-excel-o  mr-2 text-success"></i>
                    <span class="dume_invert" data-lang="js_009U$R|0|2" style="white-space:break-spaces">Export file Excel</span>
                </span>
            </a>

            <a mnu="view_sel_lst" class="p-2 list-group-item d-flex justify-content-between">
                <span class="text-left text-large">
                    <i class="ti-check  mr-2" aria-hidden="true"></i>
                    <span data-lang="js_009U$R|0|3">Show only selected</span>
                </span>
            </a>
            <a mnu="clear_sel" class="p-2 list-group-item d-flex justify-content-between">
                <span class="text-left text-large">
                    <i class="fa fa-check-square  mr-2" aria-hidden="true"></i>
                    <span data-lang="js_009U$R|0|4">Show all list</span>
                </span>
            </a>

        </div>


        <div gmnu="bk_sel_emp" class="d-none">
            <!--https://www.jquery-az.com/bootstrap4/demo2.php?ex=90.0_6 Starting list group here -->
            <a mnu="bk_2_file" class="btn list-group-item d-flex justify-content-between ">
                <span class="dume_invert  text-left text-large">
                    <i class="ti-download text-primary mr-2"></i>
                    <span data-lang="js_009U$R|5|0">Download backup file</span>
                </span>
            </a>
            <!--<a mnu="bk_2_cloud" class="btn list-group-item d-flex justify-content-between">
                <span class="dume_invert  text-left text-large">
                    <i class="ti-cloud-up text-primary mr-2"></i>
                    <span data-lang="js_009U$R|5|1">Backup to Cloud</span>
                </span>
            </a>-->
        </div>

        <div gmnu="res_sel_emp" class="d-none">
            <!--https://www.jquery-az.com/bootstrap4/demo2.php?ex=90.0_6 Starting list group here -->
            <a mnu="up_sel_em_2_dev" class="list-group-item d-flex justify-content-between ">
                <span class="dume_invert  text-left text-large">
                    <i class="ti-upload text-primary mr-2"></i>
                    <span data-lang="js_009U$R|8|0">Upload selected User(s)</span>
                </span>
            </a>
            <!--<a mnu="clear_sel" class="list-group-item d-flex justify-content-between">
                <span class="dume_invert  text-left text-large">
                    <i class="ti-filter text-primary mr-2" aria-hidden="true"></i>
                    <span>Chi hien thi danh sach duoc chon ...</span>
                </span>
            </a>
            <a mnu="clear_sel" class="list-group-item d-flex justify-content-between">
                <span class="dume_invert  text-left text-large">
                    <i class="fa fa-times text-primary mr-2"  aria-hidden="true"></i>
                    <span>Clear select ...</span>
                </span>
            </a>-->
        </div>

    </div>



    <div class="col-md-3" chitiet="thietbi_cmd_bk_opt">
        <div style="position:sticky;top:0">

            <h3 class="btn btn-block panel-title text-center" style="pointer-events: none;">
                <span class="font-italic text-truncate">
                    <i class="fa fa-user"></i>
                    <span data-lang="js_009U$R|4|0">Total Users: </span>
                </span>
                <span class="badge badge-info badge-pill  ml-2 mr-auto" style="padding-top:7px!important">6</span>

            </h3>

            <div class="panel panel-default panel-white p-0">
                <div class="panel-body p-0">
                    <div class="list-group no-border">

                        <a mnu="bk_2_file" href="#" class="list-group-item">
                            <span class="dume_invert">
                                <i class="ti-download text-primary mr-2"></i>
                                <span data-lang="js_009U$R|5|0">Download backup file</span>
                            </span>
                        </a>

                        <!--<a mnu="bk_2_cloud" href="#" class="list-group-item">
                            <span class="dume_invert">
                                <i class="ti-cloud-up text-primary mr-2"></i>
                                <span data-lang="js_009U$R|5|1">Upload backup to Cloud</span>
                            </span>
                        </a>-->

                    </div>

                </div>
            </div>
            <div class="mt-3 font-italic text-info text-center">
                <i class="ti-hand-point-down" aria-hidden="true" style="font-size: 25px;vertical-align: text-top;"></i>
                <span data-lang="js_009U$R|5|3">You can select Users for custom backup.</span>
            </div>
            <div class="my-3 text-center">
                <div class="btn btn-info shownhanvien" data-lang="js_009U$R|5|4">
                    Show User list
                </div>
                <div class="btn btn-danger hidenhanvien d-none">
                    <i class="fa fa-times-circle"></i>
                    <span data-lang="js_009U$R|5|5">Hide User list</span>
                </div>
            </div>
        </div>
    </div>

    <div class="thietbi_cmd_restore d-flex flex-column flex-row" style="overflow-y:auto" chitiet="thietbi_cmd_restore">

        <ul id="tabp-thietbi_cmd_restore" class="mx-3 nav nav-tabs  d-flex justify-content-center">
            <li class="nav-item">
                <a href="#tabp-thietbi_cmd_restore_1" class="nav-link  text-uppercase active" data-toggle="tab" data-lang="js_009U$R|1|0">
                    Devices
                </a>
            </li>
            <li class="nav-item">
                <a href="#tabp-thietbi_cmd_restore_2" class="nav-link text-uppercase" data-toggle="tab" data-lang="js_009U$R|1|1">
                    Users
                </a>
            </li>
        </ul>

        <div class="tab-content px-2 d-flex flex-column flex-row" style="overflow-y:auto; overflow-x:hidden; background-color:transparent">
            <div class="px-2 tab-pane p-0 fade show active" id="tabp-thietbi_cmd_restore_1">

                <div class="row frm_chung">

                    <!-- Left sidebar -->
                    <div class="col-md-9 order-0 order-md-0">

                        <!-- End row -->

                        <div class="panel panel-default panel-white border-0">
                            <div class="panel-body">
                                <div class="row_tb2 row">
                                    <table class="table table-hover mails mcc_usr_lst">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th data-lang="js_009U$R|3|3">ID</th>
                                                <th data-lang="js_009U$R|1|4">Device name</th>
                                                <th>Serial Number</th>
                                                <th style="word-break:break-all;">FP.VER</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>

                                <div class="mt-3 mx-auto d-flex justify-content-center align-items-center" style="height:35px">

                                    <div class="clip-check check-primary m-0 hellohrm-chk" style="flex:1;margin-left: -10px !important;">

                                        <input type="checkbox" value="1" id="restore_all_device">
                                        <label class="m-0 text-capitalize" style="padding-left:20px!important" for="restore_all_device">
                                            &nbsp;<span data-lang="js_009U$R|4|5">total</span>&nbsp;(<b>2</b>)
                                        </label>

                                        <span class="font-italic text-yellow">
                                            <i class="ml-1 text-extra-large ti-hand-point-left" aria-hidden="true"></i>
                                            <span data-lang="js_009U$R|5|7">Please select target device upload to !</span>
                                        </span>

                                    </div>

                                    <div class="btn btn-primary Upload_FUK d-none">
                                        <i class="ti-upload" aria-hidden="true"></i>
                                        <span data-lang="js_009U$R|5|8">Upload</span>
                                    </div>

                                </div>


                            </div> <!-- panel body -->
                        </div> <!-- panel -->
                    </div>

                    <div class="col-md-3" style="z-index:0">

                        <h3 class="btn btn-block panel-title my-1 text-center" style="pointer-events: none;">
                            <span elui="etotal" class="d-flex">
                                <span class="font-italic text-truncate">
                                    <i class="fa fa-user"></i>
                                    <span data-lang="js_009U$R|4|0">Total Users: </span>
                                </span>
                                <span class="badge badge-info badge-pill  ml-2 mr-auto" style="padding-top:7px!important">6</span>
                            </span>
                        </h3>

                        <div noidung_file class="panel panel-default panel-white p-0">

                            <div class="panel-body p-0">

                                <div class="list-group no-border mail-list">

                                    <a mnu="usr" class="list-group-item  align-items-center d-none">

                                        <i class="ti-user text-large  mr-1"></i>

                                        <span class="badge badge-info badge-pill mr-1" style="padding-bottom: 2px!important;">12</span>

                                        <span class="text-truncate" data-lang="js_009U$R|1|1">Users</span>

                                    </a>

                                    <div class="list-group-item d-flex ">

                                        <a mnu="fp" class="d-flex  text-warning" style="margin-left: -5px;">
                                            <i class="vantay dume_invert mr-1"></i>
                                            <span class="badge badge-info badge-pill mr-1" style="padding-bottom: 2px!important;display: flex;align-items: center;">12</span>
                                            <span class="text-truncate" data-lang="js_009U$R|1|2">Finger print</span>

                                        </a>
                                    </div>

                                    <div class="list-group-item">
                                        <a mnu="ca">
                                            <i class="fa fa-meh-o text-large mr-1"></i>
                                            <span class="badge badge-info badge-pill mr-1" style="padding-bottom: 2px!important;">8</span>
                                            <span class="text-truncate" data-lang="js_009U$R|1|3">Face</span>
                                        </a>
                                    </div>

                                    <div class="list-group-item">
                                        <a mnu="ca">
                                            <i class="fa fa-id-card-o  mr-1"></i>
                                            <span class="badge badge-info badge-pill mr-1" style="padding-bottom: 2px!important;">8</span>
                                            <span class="text-truncate" data-lang="js_009U$R|3|5">Card</span>
                                        </a>
                                    </div>

                                    <div class="list-group-item">

                                        <a mnu="pw">
                                            <i class="fa fa-key  mr-1" style="rotate:45deg;" aria-hidden="true"></i>
                                            <span class="badge badge-info badge-pill mr-1" style="padding-bottom: 2px!important;">7</span>
                                            <span class="text-truncate" data-lang="js_009U$R|3|6">Password</span>
                                        </a>
                                    </div>

                                    <div class="list-group-item">

                                        <a mnu="adm" href="#" class="dume_invert">
                                            <i class="fa fa-user-secret text-extra-large  mr-1" aria-hidden="true"></i>
                                            <span class="badge badge-info badge-pill mr-1" style="padding-bottom: 2px!important;">1</span>
                                            <span class="text-truncate" data-lang="js_009U$R|1|5">Admin</span>
                                        </a>
                                    </div>

                                </div>

                            </div>

                        </div>

                        <div class="mt-3 font-italic text-info">
                            <i class="ti-hand-point-down" aria-hidden="true" style="font-size: 25px;vertical-align: text-top;"></i>
                            <span data-lang="js_009U$R|5|9">You can select Users for custom Upload.</span>
                        </div>
                        <div class="my-3 text-center">
                            <div class="btn btn-info shownhanvien" data-lang="js_009U$R|5|4">
                                Show User list
                            </div>
                            <div class="btn btn-danger hidenhanvien d-none">
                                <i class="fa fa-times-circle"></i>
                                <span data-lang="js_009U$R|5|5">Hide User list</span>
                            </div>
                        </div>
                    </div>
                    <!-- End Left sidebar -->
                    <!-- Right Sidebar -->
                    <!-- end Col-9 -->


                    <div class="col-md-8 mx-auto d-none">

                        <div class="text-center">
                            <a href="#" class="btn btn-info shownhanvien">
                                Show nhan vien
                            </a>
                            <a href="#" class="btn btn-danger hidenhanvien d-none">
                                <i class="fa fa-times-circle"></i>
                                Hide nhan vien
                            </a>
                        </div>

                        <div class="panel panel-default panel-white p-0">
                            <div class="panel-body p-0">
                                <div class="list-group no-border mail-list">
                                    <a href="#" class="list-group-item">
                                        <i class="ti-hand-point-right  mr-2"></i>
                                        <span class="text-danger">
                                            1. Xoa tat ca nhan vien hien co tren hsnv
                                        </span><span class="text-success">
                                            ,  va nap lai moi...
                                        </span>
                                    </a>
                                    <a href="#" class="list-group-item text-warning">
                                        <i class="ti-hand-point-right mr-2"></i>
                                        2. Xoa tat ca nhan vien nay tren hsnv
                                    </a>

                                </div>
                            </div>
                        </div>

                        <h3 class="panel-title">
                            <span class="fa fa-circle text-info mr-2"></span>
                            <span class="badge badge-primary badge-pill">23</span>
                            <span>nhan vien co tren may cham cong, nhung ko co tren hsnv</span>
                            <a href="#" class="px-2 py-0 btn btn-link text-truncate chitiet_1" style="border-radius: 10px;">
                                Chi tiet<i class="fa fa-caret-down mx-1" aria-hidden="true"></i>
                            </a>
                        </h3>
                        <div class="panel panel-default panel-white p-0">
                            <div class="panel-body p-0">
                                <div class="list-group no-border">
                                    <a href="#" class="list-group-item">
                                        <i class="ti-hand-point-right mr-2"></i>
                                        3. Nap nhung nhan vien nay vao hsnv
                                    </a>
                                    <a href="#" class="list-group-item text-warning">
                                        <i class="ti-hand-point-right mr-2"></i>
                                        4. Xoa tat ca nhan vien nay tren tat ca may cham cong /hoac chon may cham cong can xoa  ...
                                        <span class="px-2 mx-3 btn-danger btn-o  text-truncate btn-danger " style="border-radius: 5px;">Chon ...<i class="fa fa-caret-down" aria-hidden="true"></i></span>
                                    </a>
                                </div>
                            </div>
                        </div>

                    </div>


                </div>
            </div>

            <div class="px-2 tab-pane p-0 fade" id="tabp-thietbi_cmd_restore_2">

            </div>

        </div>
    </div>



    <style type="text/css">

        .darkcolor .panel-white.panel_fixedcolor {
            background-color: rgba(50, 50, 50, 1)!important;
        }

        .dong.filter_adv:after, .dong.filter_adv:before {
            display:none;
        }

        .filter_adv:after, .filter_adv:before {
            top: -100%; /*calc(-100% - 7px);*/
            left: 50%;
            border: solid transparent;
            content: "";
            height: 0;
            width: 0;
            position: absolute;
            pointer-events: none;
        }

        .filter_adv:after {
            border-top-color: rgb(255 ,255 ,255);
            border-width: 27px!important;
            margin-left: -27px;
        }



        .filter_adv:before {
            border-top-color: rgba(0,0,0,.07);/*#4d4d4d;*/
            border-width: 25px;
            margin-left: -25px;

            margin-top: 5px;

        }

        .darkcolor .filter_adv:before{
                border-top-color: #4d4d4d;
        }

        .darkcolor .filter_adv:after {
            border-top-color: rgba(50, 50, 50, 1);
        }


        .dropdown-menu.pg_list.show{
            display: inline-grid!important;
        }

        .usr_from_mcc{
            display:flex;
            justify-content:center;
            position: absolute;
            height: 200px;
            border-radius: 30px;
            left: 50%;
            transform: translateX(-70px);
            z-index: 1;
            background: radial-gradient(#01abce 5%, rgba(191, 191, 191, 0.15) 9%) 0 0 / 20px 20px;
            width: 100px;
            border-left: 1px dashed #01abce;
            border-right: 1px dashed #01abce;
        }

        .ko_roam .usr_from_mcc {
            display:none!important;
        }

        .ko_roam .muiten_2_db:before  {
            right:-10px!important;
        }

        .mcc_usr_roam_hsnv{
            position: absolute;
            margin-top: -50px;
            /* font-size: 24px; */
            transform: rotate(-90deg);
            /* width: 200px; */
            /* margin: 100px auto; */
            text-align: center;
            /* border: 1px solid #000; */
            /* padding: 20px; */
            border-bottom: 3px dashed red;
            /* text-align: right; */
            white-space: nowrap;
            /* align-self: flex-start; */
            /* right: 0px; */
            /* top: 0px; */
            /* left: 50%; */
            margin-left: 20px;
        }

        .usr_of_hsnv{
            display:flex;
            justify-content:center;
            height: 200px;
            border: 1px solid #E78481;
            /* margin: 5px; */
            border-radius: 50px;
            border-left: none;
            /* margin-left: -150px; */
            padding-left: 70px;
            /* border-left: 1px dashed #01abce; */
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
        }

        .ko_roam .usr_of_hsnv {
             border-top-left-radius: 50px;
             border-bottom-left-radius: 50px;
            padding-left: 30px;
        }


        .muiten_2_db{
            display:flex;
            justify-content:center;
            align-items: center;

            height: 200px;
            /*font-size: large;*/
            border: 1px solid #7B3F61;
            /* margin: 5px; */
            border-radius: 50px;
            /* background: red; */
            border-right: none;
            /* margin-left: 75px; */
            padding-right: 75px;
            /* border-right: 1px dashed #01abce; */
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }


        .muiten_2_db:after {
            content: "";
            position: absolute;
            width: 0;
            height: 0;
            border-top: 80px solid transparent;
            border-left: 30px solid rgba(191, 191, 191, 0.5);
            border-bottom: 80px solid transparent;
            margin: 0px -60px 0 0px;
            right: 0;
            transform: translateY(-50%);
            top: 50%;
        }
            .muiten_2_dbx:before {
                background: hotpink;
                /* border-radius: 50%; */
                content: "";
                position: absolute;
                height: 130px;
                /* margin-inline-start: -6.5px; */
                /* margin-top: -4px; */
                width: 1px;
                /* transform: rotate(45deg); */
                right: -50px;
                top: 50%;
                z-index:1;
            }


        .ko_roam .muiten_2_db {
            border-top-right-radius: 50px;
            border-bottom-right-radius: 50px;
            padding-right: 0;
        }

        .ko_roam .muiten_2_db:after {
            margin: 0px -20px 0 0px;
        }


        tr.usr_mcc td {
            border-bottom: none !important;
        }

            tr.usr_mcc td:first-child {
                white-space: nowrap;
            }

        .mcc_usr_lst .vantay {
            height: 18px !important;
            line-height: 0;
            text-align: center;
            color: cyan;
        }

        .mcc_usr_lst thead > tr > th {
            border-top: none !important;
        }

        .usr_in_dev {
            border: 1px dashed rgba(191, 191, 191, 0.5) !important;
            border-radius: 7px;
            padding: 0 5px;
            margin: 0 5px;
            font-size: 12px !important;
            background-color: rgba(191,191,191,0.5);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100px;
            display: inline-block;
        }

        .mcc_usr_lst .khuonmat {
            line-height: 0;
            /* text-align: center; */
            position: relative;
        }

            .mcc_usr_lst .khuonmat > span {
                position: absolute;
                color: cyan;
                left: 50%;
                transform: translateX(-50%);
                margin-top: -1px;
            }

        .mcc_usr_lst td {
            min-height:33px!important;
        }

        .neo_head_sticky {
            transition: 0.25s;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(5px);
            background-color: rgb(191, 191, 191, 0.3);
        }


        .has_usr [lst_thongbao] {
            /*table usr co row*/
            display:none!important;
        }

        .no_usr > div:not([lst_thongbao]):not(.filter_usr_in_hsnv)  {
            display:none!important;
        }

        .search_no_usr > div:not([lst_thongbao]):not(.neo_head):not(.filter_adv_body):not(.filter_usr_in_hsnv) {
            display:none!important;
        }


        input[type=checkbox][id^=dume_]:not(:checked) + label {
            text-decoration: line-through;
            font-style: italic;
            color: red;
        }


        .vantay {
            background-size: contain;
            background-image: url("data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%2220px%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2220px%22%3E%3Cpath%20d%3D%22M17.81%204.47c-.08%200-.16-.02-.23-.06C15.66%203.42%2014%203%2012.01%203c-1.98%200-3.86.47-5.57%201.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82%202.52%209.86%202%2012.01%202c2.13%200%203.99.47%206.03%201.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5%209.72c-.1%200-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4%202.25-2.5%203.75-3.27C9.98%204.04%2014%204.03%2017.15%205.65c1.5.77%202.76%201.86%203.75%203.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5%201.7-3.4%202.96-.08.14-.23.21-.39.21zm6.25%2012.07c-.13%200-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34%200-2.97%202.54-5.39%205.66-5.39s5.66%202.42%205.66%205.39c0%20.28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39s-4.66%201.97-4.66%204.39c0%201.44.32%202.77.93%203.85.64%201.15%201.08%201.64%201.85%202.42.19.2.19.51%200%20.71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19%200-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39%200-.28.22-.5.5-.5s.5.22.5.5c0%201.41.72%202.74%201.94%203.56.71.48%201.54.71%202.54.71.24%200%20.64-.03%201.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91%2022c-.04%200-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22%200-1.62%201.38-2.94%203.08-2.94s3.08%201.32%203.08%202.94c0%201.07.93%201.94%202.08%201.94s2.08-.87%202.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84%200-5.44%201.58-6.61%204.03-.39.81-.59%201.76-.59%202.8%200%20.78.07%202.01.67%203.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96%200-1.2.23-2.29.68-3.24%201.33-2.79%204.28-4.6%207.51-4.6%204.55%200%208.25%203.51%208.25%207.83%200%201.62-1.38%202.94-3.08%202.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08%201.94c0%201.71.66%203.31%201.87%204.51.95.94%201.86%201.46%203.27%201.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z%22%20%2F%3E%3C%2Fsvg%3E");
            /*charset=utf8 hoat dong tren ie11 This solution works well for me, I use the charset=utf8 to instead of utf8.*/
            background-repeat: no-repeat;
            width: 20px;
            height: 20px;
            /*background-size: 20px 20px;*/
        }




        .emp_att_cnt:before {
            content: attr(data-totalemps);
            font-size: 12px;
            font-weight: 100;
            position: absolute;
            top: -12px;
            left: -12px;
            background: #28a745;
            line-height: 24px;
            padding: 0 5px;
            height: 24px;
            min-width: 24px;
            color: white;
            text-align: center;
            border-radius: 24px;
            box-shadow: rgba(125, 125, 125, 0.6) 0px 5px 10px;
        }

        .navx {
            position: sticky;
            top: 10px;
            z-index: 999;
            transition: 0.25s;
            max-width: 1000px;
            /*margin: 15px auto 0 auto;*/
            background: rgba(255, 255, 255, 0.75);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(5px);
        }

        @media (max-width: 1200px) {
            .navx {
                max-width: 900px;
            }
        }

        @media (max-width: 991px) {
            .navx {
                top: 0;
                max-width: 100%;
                border-radius: 0;
            }
        }

        .nav__food {
            list-style: none;
            display: flex;
            flex-flow: row nowrap;
            justify-content: center;
            padding: 0;
            overflow-x: auto;
            overflow-y: hidden;
            margin-bottom: 0 !important;
        }

        @media (max-width: 767px) {
            .nav__food {
                justify-content: flex-start;
            }
        }

        .nav__food li {
            position: relative;
            display: flex;
            flex-flow: column;
            align-items: center;
            padding: 10px;
        }

            .nav__food li a {
                display: flex;
                flex-flow: column;
                justify-content: center;
                align-items: center;
                width: auto;
                padding: 0 10px;
                text-decoration: none;
                transform: scale(1);
                transition: 0.25s;
            }

                .nav__food li a:hover {
                    transform: scale(1.1);
                }

                .nav__food li a span {
                    font-size: 12px;
                    color: #000;
                    text-align: center;
                    line-height: 1.4;
                    white-space: nowrap;
                }

                .nav__food li a img {
                    width: 40px;
                    margin-bottom: 10px;
                }


        .timkiem_dog {
            display: inline-block;
            /*flex-direction: column;
                    justify-content: center;*/
            /*align-items: center;*/
        }


        .search-box {
            display: flex;
            background: rgba(191, 191, 191, 0.5);
            border-radius: 50px;
        }

        .search-box-input {
            width: 0px;
            font-size: 14px;
            /*color: #fff;*/
            -webkit-transition: all 0.7s ease-in-out;
            -moz-transition: all 0.7s ease-in-out;
            -o-transition: all 0.7s ease-in-out;
            transition: all 0.7s ease-in-out;
            border: none;
            background: transparent;
            display: none;
            padding-right:5px;
        }

            .search-box-input:focus {
                outline: none;
            }

        .search-box-btn {
            display: flex;
            border-radius: 50%;
            width: 35px;
            min-width: 35px;
            height: 35px;
            min-height: 35px;
            /*transition: 10s;*/
            align-items: center;
            border: none;
            background: transparent;
        }
            .search-box-btn:not(.findwhat) > i:first-child {
                display:none!important;
            }

            .search-box-btn.findwhat > i:last-child {
                display:none!important;
            }

        .search-box-icon {
            margin: auto;
            color: black;
            font-weight: bold;
        }
        /*.search-box-input::placeholder{
                    color: white;
                    opacity: .7;
                }*/
        .dume_open {
            flex: 1;
        }

            .dume_open .search-box .search-box-input {
                /*padding-left: 2em;
                    padding-right: 1em;*/
                width: 100%;
                display: block;
            }

        .search-box-btn:active {
            transform: scale(.75);
        }

    </style>

    <div class="navx">
        <ul class="nav__food">
            <li>
                <a href="#meat">
                    <img src="https://i.imgur.com/ZihgqUz.png" alt="">
                    <span>Meat</span>
                </a>
            </li>
            <li>
                <a href="#seafood">
                    <img src="https://i.imgur.com/SA9XqyP.png" alt="">
                    <span>Seafood</span>
                </a>
            </li>
            <li>
                <a href="#vegetable">
                    <img src="https://i.imgur.com/5n41xro.png" alt="">
                    <span>Vegetable</span>
                </a>
            </li>
            <li>
                <a href="#fruits">
                    <img src="https://i.imgur.com/4JWksvZ.png" alt="">
                    <span>Fruits</span>
                </a>
            </li>
            <li>
                <a href="#bread">
                    <img src="https://i.imgur.com/hPcZCgH.png" alt="">
                    <span>Bread</span>
                </a>
            </li>
            <li>
                <a href="#ebm">
                    <img src="https://i.imgur.com/q6A06ZW.png" alt="">
                    <span>Eggs, Cheese & Milk</span>
                </a>
            </li>
        </ul>
    </div>

    <div class="timkiem_dog">
        <div class="search-box dume_invert">
            <button class="search-box-btn">
                <i class="fa fa-search" style="font-size:20px"></i>
            </button>
            <input type="text" class="search-box-input" maxlength="20" placeholder="What are you looking for ?">
        </div>
    </div>


    <style type="text/css">

        .after_2_tg9 .col-6 {
            max-width:calc(50% - 0.45rem)!important;
        }

        .darkcolor .text-muted .dume_invert{
            filter: invert(0.6)!important;
        }

        .usr_not_match_hsnv {
            transform: perspective(300px) rotateY(10deg);
            transform-origin: left;
            margin-left: auto;
        }

        .progress_exp_excel:before {
            content: "";
            background-position: center;
            background-size: cover;
            height: 100px;
            width: 250px;
            position: absolute;
            background: rgba(191, 191, 191, 1);
            /* top: 0; */
            z-index: -1;
            opacity: 0.5;
            transform: translate(-50%, -65%);
            left: 50%;
            border-radius: 10px;
        }

    </style>


    <div class="after_2_tg9 chat col-12 px-0 chat--mobile d-none">

        <div class="chat__container">

            <div class="chat__wrapper">

                <!--https://colorlib.com/polygon/elaadmin/ui-cards.html-->

                <div class="page-title text-center p-2" style="position:sticky;top:0">
                    <a href="#" class="user-profile__close d-flex dume_invert" style="left: 20px;justify-content:center;align-items: center;border-radius: 50%;padding: 20px;background-color: rgba(191, 191, 191, 0.3);"><i class="ti-close"></i></a>
                    <h3 class="title my-2 pt-1 text-truncate  ml-5 pl-2">
                        <span data-lang="js_009U$R|0|0">User managment</span>
                    </h3>
                </div>

                <div class="chat__content">

                    <div class="p-3" style="padding-bottom:0!important">

                        <div class="row">
                            <div class="col-12">
                                <div class="row no-gutters card-group flex-row   justify-content-between">
                                    <div class="card panel-white col-6 col-sm-auto">
                                        <div class="card-body">
                                            <div class="h1 text-muted text-center mb-4">
                                                <i class="ti-harddrive"></i>
                                            </div>
                                            <div class="h4 mb-0">
                                                <span soluong dev>0</span>
                                            </div>
                                            <small data-lang="js_009U$R|1|0" class="text-muted text-uppercase font-weight-bold">Devices</small>
                                            <!--<div class="progress progress-xs mt-3 mb-0 bg-flat-color-1" style="width: 40%; height: 5px;"></div>-->
                                            <!--<a href="https://hrm.dnd.vn/media/images/plane.png" download>
                                                Click Here to Download the Image
                                            </a>-->

                                        </div>
                                    </div>
                                    <div class="card panel-white col-6 col-sm-auto">
                                        <div class="card-body">
                                            <div class="h1 text-muted text-center mb-4">
                                                <i class="fa fa-users"></i>
                                            </div>
                                            <div class="h4 mb-0">
                                                <span soluong usr>0</span>
                                            </div>
                                            <small data-lang="js_009U$R|1|1" class="text-muted text-uppercase font-weight-bold">Users</small>
                                            <!--<div class="progress progress-xs mt-3 mb-0 bg-flat-color-2" style="width: 40%; height: 5px;"></div>-->
                                        </div>
                                    </div>
                                    <div class="card panel-white col-6 col-sm-auto">
                                        <div class="card-body">
                                            <div class="h1 text-muted text-center mb-4">
                                                <i class="dume_invert vantay" style="display: inline-block;
                                                   width: 40px;
                                                   height: 40px;"></i>
                                            </div>
                                            <div class="h4 mb-0">
                                                <span soluong fp>0</span>
                                            </div>
                                            <small data-lang="js_009U$R|1|2" class="text-muted text-uppercase font-weight-bold">Finger print</small>
                                            <!--<div class="progress progress-xs mt-3 mb-0 bg-flat-color-3" style="width: 40%; height: 5px;"></div>-->
                                        </div>
                                    </div>
                                    <div class="card panel-white col-6 col-sm-auto">
                                        <div class="card-body">
                                            <div class="h1 text-muted text-center mb-4">
                                                <i class="fa fa-meh-o"></i>
                                            </div>
                                            <div class="h4 mb-0">
                                                <span soluong fa>0</span>
                                            </div>
                                            <small data-lang="js_009U$R|1|3" class="text-muted text-uppercase font-weight-bold">Faces</small>
                                            <!--<div class="progress progress-xs mt-3 mb-0 bg-flat-color-4" style="width: 40%; height: 5px;"></div>-->
                                        </div>
                                    </div>
                                    <div class="card panel-white col-6 col-sm-auto">
                                        <div class="card-body">
                                            <div class="h1 text-muted text-center mb-4">
                                                <i class="fa fa-id-card-o" aria-hidden="true" style="font-size: smaller;"></i>
                                                <i class="fa fa-key  position-absolute" aria-hidden="true" style="font-size:70%;margin-left: -15px;margin-top: -10px;"></i>
                                            </div>
                                            <div class="h4 mb-0">
                                                <span soluong ca_pw>0</span>
                                            </div>
                                            <small data-lang="js_009U$R|1|4" class="text-muted text-uppercase font-weight-bold">Card / Pw</small>
                                            <!--<div class="progress progress-xs mt-3 mb-0 bg-flat-color-5" style="width: 40%; height: 5px;"></div>-->
                                        </div>
                                    </div>
                                    <div class="card panel-white col-6 col-sm-auto">
                                        <div class="card-body">
                                            <div class="h1 text-muted text-center mb-4">
                                                <i class="fa fa-user-secret"></i>
                                            </div>
                                            <div class="h4 mb-0">
                                                <span soluong adm>0</span>
                                            </div>
                                            <small data-lang="js_009U$R|1|5" class="text-muted text-uppercase font-weight-bold">Admin</small>
                                            <!--<div class="progress progress-xs mt-3 mb-0 bg-flat-color-1" style="width: 40%; height: 5px;"></div>-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="panel p-0 mt-3  mt-md-4" style="max-width: 500px;margin: auto;">

                            <h3 class="title text-secondary  text-center my-2">
                                <span class="ti-wand"></span>
                                <span data-lang="js_009U$R|2|0">All Device(s)</span>
                            </h3>

                            <div class="panel-body p-0">
                                <div class="list-group no-border">

                                    <div mnu="thietbi_restore" class="list-group-item py-2  text-large">
                                        <label for="thietbi_restore_main" style="margin:0; cursor:pointer">

                                            <input type="file" accept=".dat"
                                                   name="" id="thietbi_restore_main"
                                                   style="border: 0;clip: rect(1px, 1px, 1px, 1px);height: 1px; margin: -1px;overflow: hidden;padding: 0;position: absolute;width: 1px;">

                                            <span class="fa-stack">
                                                <span class="dume_invert vantay" style="display:inline-block;margin-top:3px;">
                                                </span>
                                                <i class="fa fa-user-plus text-success position-absolute" aria-hidden="true" style="margin-left: -5px;"></i>
                                            </span>

                                            <span data-lang="js_009U$R|2|1" style="white-space:break-spaces">Upload User to devices</span>

                                        </label>
                                    </div>

                                    <a mnu="del_usr_multi_dev" class="list-group-item py-2 text-large text-danger">
                                        <span class="fa-stack">
                                            <i class="ti-user" aria-hidden="true"></i>
                                            <i class="fa fa-times  position-absolute" aria-hidden="true"></i>
                                        </span>
                                        <span data-lang="js_009U$R|2|2" style="white-space:break-spaces">Delete User</span>
                                    </a>

                                    <a mnu="sync_profile" class="list-group-item py-2 text-large text-success">
                                        <span class="fa-stack">
                                            <i class="fa fa-user" aria-hidden="true"></i>
                                            <i class="ti-control-shuffle position-absolute" aria-hidden="true"></i>
                                        </span>
                                        <span data-lang="js_009U$R|2|3" style="white-space:break-spaces">Sync User - Employee profile</span>
                                    </a>

                                    <a mnu="sel_e_ascess" class="list-group-item py-2 text-large text-info">
                                        <span class="fa-stack">
                                            <i class="ti-user" aria-hidden="true"></i>
                                            <i class="ti-check position-absolute" aria-hidden="true"></i>
                                        </span>
                                        <span data-lang="js_009U$R|2|4" style="white-space:break-spaces">User's list.</span>
                                    </a>

                                </div>
                            </div>

                        </div>

                        <div chitiet_usr class="mt-3 mt-md-4">

                            <h3 class="title text-secondary  text-center my-2">

                                <i class="fa fa-pie-chart" aria-hidden="true"></i>
                                <span data-lang="js_009U$R|3|0">Detail</span>

                                <button data-toggle="dropdown" class="btn btn-sm btn-o dume_invert">
                                    <i class="ti-view-grid text-large"></i>
                                </button>

                                <ul class="dropdown-menu dropdown-light dropdown-menu-right lang-lst text-large ">
                                    <li>
                                        <a mnu="xem_detail" xem1 class="dropdown-item text-left" style="border-bottom-left-radius: 7px;border-bottom-right-radius: 7px;">
                                            <i class="ti-widgetized mr-2"></i><span data-lang="js_009U$R|3|1">View as column</span>
                                            <i class="ti-check text-success ml-2"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <hr class="dropdown-divider">
                                    </li>
                                    <li>
                                        <a mnu="xem_detail" xem2 class="dropdown-item text-left" style="border-top-left-radius: 7px;border-top-right-radius: 7px;">
                                            <i class="ti-view-grid mr-2"></i><span data-lang="js_009U$R|3|2">View as grid</span>
                                            <i class="text-success ml-2"></i>
                                        </a>
                                    </li>
                                </ul>

                            </h3>

                            <div gwv class="table-responsive table-lg my-3" style="display:none">

                                <table class="d-block table table-bordered">
                                    <thead>
                                        <tr>
                                            <th data-lang="js_009U$R|3|3" class="align-middle text-center">
                                                ID
                                            </th>
                                            <th class="align-top text-center">
                                                <i class="ti-harddrive mr-1"></i>
                                                <span data-lang="js_009U$R|3|4">Device name</span>
                                            </th>

                                            <th class="align-top text-center">
                                                <i class="fa fa-users mr-1"></i>
                                                <span data-lang="js_009U$R|1|1">User</span>
                                            </th>
                                            <th class="align-top text-center">
                                                <i class="dume_invert vantay" style="display:inline-block;margin-bottom:-3px"></i>
                                                <span data-lang="js_009U$R|1|2">Finger print</span>
                                            </th>
                                            <th class="align-top text-center">
                                                <i class="fa fa-meh-o  mr-1"></i>
                                                <span data-lang="js_009U$R|1|3">Face</span>
                                            </th>
                                            <th class="align-top text-center">
                                                <i class="fa fa-id-card-o mr-1"></i>
                                                <span data-lang="js_009U$R|3|5">Card</span>
                                            </th>
                                            <th class="align-top text-center">
                                                <i class="fa fa-key mr-1"></i>
                                                <span data-lang="js_009U$R|3|6">Password</span>
                                            </th>
                                            <th class="align-middle text-center">
                                                <i class="fa fa-user-secret  mr-1"></i>
                                                <span data-lang="js_009U$R|1|5">Admin</span>
                                            </th>

                                            <th data-lang="js_009U$R|3|7" class="text-small align-middle text-center">Action menu</th>

                                        </tr>
                                    </thead>
                                    <tbody>

                                        <tr>

                                            <td class="text-center align-middle">
                                                1
                                            </td>

                                            <td class="align-middle">
                                                <span>ZK-DEV</span>
                                            </td>

                                            <td class="align-middle">
                                                <small class="text-nowrap">USE:100 - MAX:2000</small>
                                                <div class="mb-0 progress" style="background: rgba(191, 191, 191, 0.15);border-radius: 20px;">
                                                    <div class="progress-bar text-nowrap" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 40%;">
                                                        5%
                                                    </div>
                                                </div>
                                                <small class="text-secondary">FREE: 20000</small>
                                            </td>

                                            <td class="align-middle">
                                                <small class="text-nowrap">USE:100 - MAX:2000</small>
                                                <div class="mb-0 progress" style="background: rgba(191, 191, 191, 0.15);border-radius: 20px;">
                                                    <div class="progress-bar text-nowrap" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%;">
                                                        5%
                                                    </div>
                                                </div>
                                                <small class="text-secondary">FREE: 20000</small>

                                            </td>

                                            <td class="align-middle">
                                                <small class="text-nowrap">USE:100 - MAX:2000</small>
                                                <div class="mb-0 progress" style="background: rgba(191, 191, 191, 0.15);border-radius: 20px;">
                                                    <div class="progress-bar text-nowrap" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%;">
                                                        5%
                                                    </div>
                                                </div>
                                                <small class="text-secondary">FREE: 20000</small>
                                            </td>

                                            <td class="text-center align-middle">
                                                0
                                            </td>

                                            <td class="text-center align-middle">0</td>

                                            <td class="text-center align-middle">0</td>

                                            <td class="text-center align-middle">
                                                <button pu_mnu gmnu="chitietFUK" class="p-1 btn btn-o btn-warning" style="transition:none!important"><span class="fa fa-pencil"></span></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>

                            <div cwv bk_dev class="row" style="display:none">

                                <!-- https://bootsnipp.com/snippets/KB03-->

                                <div class="col-md-6 col-12 mb-4">
                                    <div class="card panel-white h-100">
                                        <div class="card-body">

                                            <div class="row ">

                                                <div class="col-5 text-center">

                                                    <h1 class="rating-num">
                                                        1
                                                    </h1>

                                                    <div>
                                                        <span>ZK-DEV</span>
                                                    </div>

                                                    <div class="mt-2 align-top">
                                                        <button pu_mnu gmnu="chitietFUK" class="btn btn-sm btn-outline-warning" style="transition:none!important"><span class="fa fa-pencil"></span></button>
                                                    </div>

                                                </div>

                                                <div class="col-7">

                                                    <div class="mb-1 row no-gutters">

                                                        <div class="col-3" style="min-width:40px ;max-width:40px">
                                                            <i class="ti-user" aria-hidden="true"></i>
                                                        </div>
                                                        <div class="col-9" style="flex:1">
                                                            <div class="mb-0 progress" style="background: rgba(191, 191, 191, 0.15);border-radius: 20px;">

                                                                <span style="position: absolute;margin-left: -20px;">100% - 2000</span>

                                                                <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
                                                                    <span class="text-secondary" style="position: absolute;right: 0;">20000</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="my-1 row no-gutters">
                                                        <div class="col-3  text-nowrap" style="min-width:40px ;max-width:40px">
                                                            <i class="dume_invert vantay" style="display: inline-block;margin-top: -2px;margin-left:-2px;"></i>
                                                        </div>

                                                        <div class="col-9" style="flex:1">
                                                            <div class="mb-0 progress progress-striped" style="background: rgba(191, 191, 191, 0.15);border-radius: 20px;">
                                                                <span style="position: absolute;margin-left: -20px;">100% - 2000</span>
                                                                <div class="progress-bar" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 80%;display: flex;">
                                                                    <span class="text-secondary" style="position: absolute;right: 0;">20000</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="my-1 row no-gutters">
                                                        <!-- end 5 -->
                                                        <div class="col-3 " style="margin-top:-2px;min-width:40px ;max-width:40px">
                                                            <i class="fa fa-meh-o text-large" aria-hidden="true"></i>
                                                        </div>
                                                        <div class="col-9" style="flex:1">
                                                            <div class="mb-0 progress" style="background: rgba(191, 191, 191, 0.15);border-radius: 20px;">
                                                                <span style="position: absolute;margin-left: -20px;">100% - 2000</span>
                                                                <div class="progress-bar" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
                                                                    <span class="text-secondary" style="position: absolute;right: 0;">20000</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- end 4 -->
                                                    <div class="my-1 row no-gutters">
                                                        <!-- end 5 -->
                                                        <div class="col-3 " style="margin-top:-2px;min-width:40px ;max-width:40px">
                                                            <i class="fa fa-id-card-o" aria-hidden="true"></i>
                                                        </div>
                                                        <div class="col-9" style="flex:1">
                                                            <span style="position: absolute;margin-left: -20px;">0</span>
                                                        </div>
                                                    </div>

                                                    <div class="my-1 row no-gutters">
                                                        <!-- end 5 -->
                                                        <div class="col-3 " style="margin-top:-2px;min-width:40px ;max-width:40px">
                                                            <i class="fa fa-key" aria-hidden="true"></i>
                                                        </div>
                                                        <div class="col-9" style="flex:1">
                                                            <span style="position: absolute;margin-left: -20px;">0</span>
                                                        </div>
                                                    </div>

                                                    <div class="mt-1 row no-gutters">
                                                        <!-- end 5 -->
                                                        <div class="col-3 " style="margin-top:-2px;min-width:40px ;max-width:40px">
                                                            <i class="fa fa-user-secret" aria-hidden="true"></i>
                                                        </div>
                                                        <div class="col-9" style="flex:1">
                                                            <span style="position: absolute;margin-left: -20px;">0</span>
                                                        </div>
                                                    </div>


                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>

                    </div>

                </div>
            </div>

        </div>

    </div>

    <div class="filter_usr_in_hsnv row overflow-hidden position-relative d-none" style="margin-left: 0 !important; margin-right: 0 !important;">

        <!--https://stackoverflow.com/questions/37112218/css3-100vh-not-constant-in-mobile-browser-->
        <!--https://allthingssmitty.com/2020/05/11/css-fix-for-100vh-in-mobile-webkit/-->

        <a href="#" class="user-profile__close d-flex dume_invert" style="justify-content:center;align-items: center;border-radius: 50%;padding: 5px;
                                background-color: rgba(191, 191, 191, 0.3);left: auto;z-index:1">
            <i class="fa fa-times-circle text-danger dume_invert"></i>
        </a>

        <ul tabp_filter_usr_hsnv class="ml-3 w-100 nav nav-tabs  d-flex flex-nowrap justify-content-end">
            <li class="nav-item">
                <a href="#" class="nav-link  text-uppercase active text-primary" data-toggle="tab" data-lang="js_009U$R|4|15">
                    Match
                </a>
                <i class="fa fa-check-circle text-primary" aria-hidden="true" style="position: absolute;font-size: 30px;transform: translateX(-50%); margin-top: -10px;"></i>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link text-uppercase text-danger" data-toggle="tab" data-lang="js_009U$R|4|16">
                    Not match
                </a>
                <i class="fa fa-times text-danger d-none" aria-hidden="true" style="position: absolute;font-size: 30px;transform: translateX(-50%); margin-top:-10px;"></i>
            </li>
        </ul>

        <div class="pt-5 px-3 d-flex flex-column w-100 text-primary">

            <div style="/* position: absolute; */left: 50%;/* margin-left: 50px; */">
                <span style="position: absolute;font-size: 25px;margin-top: -30px">
                    <i class="ti-server mr-1"></i><span emp_cnt="">6</span>
                </span>
                <span data-lang="js_009U$R|9|1">Employees in profile</span>
            </div>

            <div class="row my-3 m-0">

                <span class="">

                    <span data-lang="js_012_9">
                        <!--<span class="usr_in_dev usr_in_dev m-0 pl-4">
                            <i class="btn btn-danger ti-close p-0 position-absolute" style="margin-left: -22px;"></i>
                            PR5694 ; TRẦN VĂN HIỆU ; 32
                        </span>

                        ;<span class="usr_in_dev">QC155 ; NGUYỄN THỊ YẾN HƯƠNG ; 37</span>-->

                        <span data-lang="js_009U$R|8|1">You can select Departments / Sections to limit employees</span>
                        <i class="ti-hand-point-right" aria-hidden="true" style="font-size: 25px;vertical-align: text-bottom;line-height: 17px;"></i>
                        <span lenh="btn_add_sec" class="ml-2   p-2 fa fa-plus  bg-primary csor-p"></span>

                    </span>

                </span>


                <div class="checkbox clip-check m-2 check-primary d-none">
                    <input id="hasregis_only-expr" type="checkbox" value="1" checked="">
                    <label for="hasregis_only-expr" class="d-flex flex-wrap m-0">
                        <span class="text-large" style="line-height:1.4" data-lang="js_012_34">Chỉ xuất đăng ký</span>
                    </label>
                </div>


            </div>


            <div rst_el class="tree_cakip d-none" style="transition: .5s all ease;">
                <ul class="p-0 m-0">
                    <li>

                        <span class="bg-primary">
                            <i class="ti-home mr-2"></i>
                            <i chk_sel="home" class="csor-p fa fa-square-o" aria-hidden="true" style="font-size: 18px;vertical-align: middle;width:20px"></i>
                            (Hello-HRM)
                        </span>

                        <ul sel_lst>

                            <li>
                                <span class="badge-important">
                                    <i chk_sel class="csor-p fa fa-square-o" aria-hidden="true" style="font-size: 18px;vertical-align: middle;width:20px"></i>
                                    <spanx></spanx>
                                </span>
                            </li>

                            <!--<li>
                                <span class="badge-important">
                                    <i chk_sel class="csor-p fa fa-square-o" aria-hidden="true" style="font-size: 18px;vertical-align: middle;width:20px"></i>
                                    <spanx>Wednesday, January 9: 4.00 hours</spanx>
                                </span>
                            </li>
                            <li>
                                <span class="badge-important">
                                    <i chk_sel class="csor-p fa fa-square-o" aria-hidden="true" style="font-size: 18px;vertical-align: middle;width:20px"></i>
                                    <spanx>Wednesday, January 9: 4.00 hours</spanx>
                                </span>
                            </li>
                            <li>
                                <span class="badge-important">
                                    <i chk_sel class="csor-p fa fa-square-o" aria-hidden="true" style="font-size: 18px;vertical-align: middle;width:20px"></i>
                                    <spanx>Wednesday, January 9: 4.00 hours</spanx>
                                </span>
                            </li>-->

                        </ul>
                    </li>

                </ul>
            </div>


        </div>

    </div>






    <section fuck_tmpl style="display:none">
        <div  exp_excel class="progress " style="width: 200px;transform: translateX(-50%);left: 50%;position: absolute;height: 6px;">
            <div class="progress-bar" style="width:0%"></div>
        </div>
    </section>

    <section fuck_dat style="display:none">
        <span usr="B7vjmvLx/Ah//9H+rbWmDW9OmQmDSZmbWUcVpE0i8dbPkZNNG1WBjnj6tTVIyb/zKjnENhXy8ule3qRQY04motDtsmMviMNv+fXQg5iz0cSlDAfszunmk8Vwy5YnjZZIQn/U+JAyuruXWNH+Srnhgg=="
              fp="B7vjmvLx/Ah//9H+rbWmDW9OmQmDSZmbWUcVpE0i8db437inMVQokz1Y+/wGsONSRj85aq+iGn39a0R10j++wNOXvHaIfvqlU1xJaIMNGVe4RfR+EUDFZj9repjcQGuX" 
              ca="B7vjmvLx/Ah//9H+rbWmDfMztvwoXj/O86NKR5OzEhvGIhtovzynNhvgF3r+R/8mFFKwnyXAOQpWqvRDBlIwaQ=="></span>
    </section>

</div>

<script type="text/javascript">


    const WO_FromData = function () { (null == this ? self : this).FormData = n; var e = XMLHttpRequest.prototype.send; function n() { if (!(this instanceof n)) return new n; this.boundary = "------RWWorkerFormDataBoundary" + Math.random().toString(36); var r = this.data = []; this.__append = function (t) { var e, n = 0; if ("string" == typeof t) for (e = t.length; n < e; n++) r.push(255 & t.charCodeAt(n)); else if (t && t.byteLength) for ((e = (t = "byteOffset" in t ? t : new Uint8Array(t)).byteLength) ; n < e; n++) r.push(255 & t[n]) } } XMLHttpRequest.prototype.send = function (t) { return t instanceof n && (t.__endedMultipart || t.__append("--" + t.boundary + "--\r\n"), t.__endedMultipart = !0, this.setRequestHeader("Content-Type", "multipart/form-data; boundary=" + t.boundary), t = new Uint8Array(t.data).buffer), e.call(this, t) }, n.prototype.append = function (t, e, n) { this.__endedMultipart && (this.data.length -= this.boundary.length + 6, this.__endedMultipart = !1); var r = Object.prototype.toString.call(e), a = "--" + this.boundary + '\r\nContent-Disposition: form-data; name="' + t + '"'; if (/^\[object (?:Blob|File)(?:Constructor)?\]$/.test(r)) return this.append(t, new Uint8Array((new FileReaderSync).readAsArrayBuffer(e)), n || e.name); /^\[object (?:Uint8Array|ArrayBuffer)(?:Constructor)?\]$/.test(r) ? (a += '; filename="' + (n || "blob").replace(/"/g, "%22") + '"\r\n', this.__append(a += "Content-Type: application/octet-stream\r\n\r\n"), this.__append(e), a = "\r\n") : a += "\r\n\r\n" + e + "\r\n", this.__append(a) } };

    const d0ggy = ['425A6839314159265359A86A8A21000113FF800414040077FFE01F3FAFFFFEBFEFDFFE4001FD6EB7776EC06928F24D347A8F62C921A64340000320680D0000006884C44C29B68D110D1E5340000680001A69A6D41A9A6A08D03403406800034034000000128849A27A991B420D1A060982686D4F44C26869E88D1899DC89B551CA2E885A8D79100540644106D0618CA830CBFB25FEDBED4D61ED89DAAB70BC5DECD83CF01848E10D4689D59181161523E1793AA042D3E155A185C722DE30299C8CCB2D0D3031CB2A51C09DAD131AC8A445E642428F63BEAACFB1CB60215A1BC5CC30E125B484AE8C6080886A0490300CD7230C8208E335D0EE8602CCEC623C4F92F64BD779C726B1D0F0ED3826C2C5A8F114498C5E78BE4590F08FD55AFE6007C4048519D9AC2C35FDF449668B870C201DD7CFACAF5DD22CB11AC6C52B62394592099C2DC56C338F05B8CE58DCA3CB3D18C51AA4DA8DD631C37E90241A8D67432180B45580C861E8D9D61023222708A1031C233444A36A9A0770AA602909A21A3E6522FA4CE861909021A478161238A2B6B0C67D80710AA6687608C0C5D23FC7D84D943AAC2EA282B052398AF9003841F5022CD08F7B9FF96515EF5C8ED0A39C978AE18CB171372156311B6830139561118DC34FA75280A128670AD08B391400C55A22A40C3491346630E34BFB96459C5D9483A5BF1D688E80B9FD2E50D4C9486360227388CC2431E414AA14CCC54A50B096B0892A6BC0AA12810FB2A9B1CD189A4340944C8B53CB11AB40741CC21C5640E1616C2EB848B1E092195A04FB6F5812453267E978105C62DFF177245385090A86A8A210',
        '425A683931415926535951B421980000DFDF80001077FFE45F7FBFFFFEBFE7DFDE4001FD9CE9BBAC0D126A3469A340068000D1A068D000001A01A2234D0D1946691A9EA0D1AF62C9234D003D403468346803D40D32293503D08DEA234C8D00D1A00C9A641A0340004A48D09EA2601EA8C04D34323D13D0260106D43464C4740D579390A90580F00471E5438A1AC70F4E0F62B5898B379B0F58A43656FE0F7978C43590A83FB5A82D06044B23EBB71AAD8A7892671887F5691794DE19C66998DAFE9CD52998064D20CC9384C8CEA11180ECB3E4BA637C44189916D21A2A1A78AB6ACA94EC30820E495A7147215B2829C573D021C8701438700E8C38ACC437959C6E3521779C47058B3FD3E3944ABDD752B76E045CA4F9BB0A531AA1864CA2E223843D3DE4B24970A451DABEA321FA5AD2BE56B084076D46269D20FD764C4E53F00A6D968D65D579B38768205EDC127B84898D364CFC450A2D3970BCC30459650ECAC2185AAB6789A04F24064710DDD76A0350C7A23F3C73394F093CAB4E282A31F214A4B4E5F6B12C3858ED2609B49A8190759414629933D6190440A2494E8120EA826D5730AA605918EDEEBF01D7DE710C9029630168100C8980A0CEE0C3E1A6CC31F496549E3E81BAB808EB83254278AE7C22F65024930912430C967344E6516A2E7A0FA3553E9140E1021C8FEFB4A4D3945F8B28ABF4F20B19EC840829BC5AE629C00228825718A166A59A4195A681954812602AEE129239E8A2CDA45F9C38183B49170AA05D88D882FEE0981E2AC46F8C839F8F5432F4858733E929988790BE9FE31B3FE2EE48A70A120A36843300',
        '425A68393141592653591CA41DFC00006B5F80001075F3800F3FBFFEFABFEFDF143001219812A69A934D349FA9A4F14D94F29A1A1A1E51E91EA683F62C92D13693D20D29A9E2988F4649EA64D0000003401A1904A8D44C4D32680000D0D01A000610384408CC0D9BD2DDCCB76ED747E4B8F7FC120B5744993B7539B670D17E5E3EF0672C736A2E3417F18B3321F9C9C9E20EFBBB9DD3104F77AAD2D2116B11A823C69158C7D1FB168A228F1B60AE1D495BEC449E64494D6B1AE707F3720C3AA5C3AD266A3CD27BC4D7A69897CD2DA039D9294E266C6D531F4C3F07A4420BAB8506EE3165E6534627989C4588A9C80D350F64CB1E6D261B24AEF91372AC85D1C6157D618019558A6322B888450C6C8B25684894E408D7A69235AF848EE11F40A1E0773830E8B3E55D0135CC11CCAC011060878403F05F80A299D86691F9C9E4B415A9E901954EA7C2DC294CE1EA241B4E794CFC8E812C14285625B14F477E5396614B49ED610D84EC534490B810101D240119808A909FE2EE48A70A12039483BF80'
    ];

    //code upload template
    const up_heavy_tmpl_init = function (dat) {
        //
        var //S1 = 1,//init
            tmpl,
            hedU;
            //lstT = [];
        //
        const UP__Q = (function () {

            const pending = [];

            function next() {
                //debugger;
                if (UP__Q.__adr) {
                    //
                    if (pending.length > 0) {
                        //
                        //debugger;
                        //
                        upload_engine.bind([function () {
                            //
                            pending.shift();//remove  finish upload at index 0
                            //
                            next();
                            //
                        }, pending[0]])();
                        //
                    };
                } else {
                    //loop lai neu chua co cloud address.
                    setTimeout(next, 100);
                };
            };

            return function (fn) {
                pending.push(fn);
                if (pending.length == 1) next();
            };

        })()

        ,

        BZ2__Q = (function () {

            const pending = [];

            function next() {
                //
                if (UP__Q.__adr) {
                    //
                    //debugger;
                    //
                    const fn = pending.shift();
                    //
                    if (fn) {
                        //
                        const tmpl = ArchUtils.bz2.decode(atob(fn[1])),
                            rst = tmpl.split(/\r?\n/),
                            z = rst.length > 3 ? 3 : rst.length - 1;
                        //
                        //
                        //may gita head openDatabase ... "openDatabase(115004)test:isThreadsafe:0, bCoreMutex:0,bFullMutex:0
                        for (var i = z; i > -1; i--) {
                            if (rst[i].indexOf('openDatabase') > -1 || rst[i].indexOf('isThreadsafe') > -1 || rst[i].indexOf('bCoreMutex') > -1 || rst[i].indexOf('bFullMutex') > -1) {
                                rst.splice(i, 1);
                            };
                        };
                        //
                        //
                        for (var k = 0; k < rst.length; k++) {
                            //
                            const fin = rst[k].split('|');
                            //
                            for (var n = 0; n < hedU.length; n++) {
                                //
                                if (hedU[n][0] == fin[0]) { //prevent [0] = "openDatabase(115038)test:isThreadsafe:0, bCoreMutex:0,bFullMutex:0"
                                    //
                                    //index dau tien la ID cua table USER_INFO cua device backup
                                    fin[0] = hedU[n][1];//
                                    rst[k] = fin.join(',');
                                    //
                                    //fin[0] = "fin_" + String.fromCharCode(30) + "_tmpl";//change user_pin -> signal mark start finger template
                                    ////signal trap build more td
                                    //lstT.push([-9999].concat(hedU[n]).concat(fin));
                                    //
                                };
                            };
                            //
                        };
                        //
                        //****** thay the tmpl = total block.
                        fn[1] = BZ2__Q.allBlock;
                        //
                        //debugger;
                        UP__Q([

                            //luu y rst co last item "" nen ko can + '\n'
                            rst.join('\n')  /*tmpl.replace(/\|/g, ',')*/

                            , fn]);//thay the dau , de dung lam value insert
                        //
                        setTimeout(next, 100);
                        //
                    };
                } else {
                    //loop lai neu chua co cloud address.
                    setTimeout(next, 100);
                };
            };

            return function (fn) {
                pending.push(fn);
                if (pending.length == 1) next();
            };

        })();
        //
        String.prototype.hexSQL = function () {
            var hex, i;
            var result = "";
            for (i = 0; i < this.length; i++) {
                hex = this.charCodeAt(i).toString(16);
                result += hex;//("000" + hex).slice(-4);
            };
            return result;
        };
        //
        function containsSpecialCharacter(str) {
            const specialChars =
                "!@#$%^&*()-_=+[{]};:'\",<.>/?\\|";
            for (var i = 0; i < str.length; i++) {
                if (specialChars.indexOf(str[i]) !== -1) {
                    return true;
                }
            }
            return false;
        };
        //
        function hex2s(h) {
            const HE = h.toString().trim();
            //
            if (HE.length == 0) return ""
            //
            const dogM= HE.match(/.{1,2}/g),
                a = parseInt(dogM[0], 16);//detect ky tu dau tien.
            //
            //
            if (!isNaN(a) && a.toString(16) === dogM[0].toLowerCase()) {//HEX
                return dogM.reduce(function (acc, char) {

                    return acc + String.fromCharCode(parseInt(char, 16));

                }, "");
            } else {
                return HE;
            };
        };
        //
        function _1st_up_heavy_tmpl_init(_eD) {
            //
            //debugger;
            //
            const dat = _eD.dat;
            //
            tmpl = dat[0];
            hedU = dat[1];
            soF = dat[2].fREL;
            //
            //
            //
            UP__Q.__loMCC = dat[3];//local connection info ..
            UP__Q.__upTMPL = {};
            UP__Q.__localKEY = {};
            UP__Q.__adrERR = [];
            //
            //
            //
            const lstT = [],

                hed_pkg_0 = function (xx) {
                    //
                    //***** splice # slice
                    const ox = xx.slice(0); //clone xx
                    //
                    //detect finger template
                    const fin = xx.indexOf("fin_" + String.fromCharCode(30) + "_tmpl");

                    if (fin > -1) {
                        //cut xx from index 0 to fin, and ox remain from fin to end !!!
                        xx = ox.splice(0, fin);
                        //
                        ox[0] = xx[2];//USER_PIN
                        lstT.push(ox);//finger template
                        //
                    } else {
                        xx = ox;
                    };
                    //
                    //
                    if (xx[0] == -9999) xx.splice(0, 1);//remove  -9999 padding
                    xx.splice(0, 1);//remove  index 0 padding
                    //
                    //chi lay du so field insert update ...
                    if (xx.length > soF) xx = xx.splice(0, soF);
                    //
                    //debugger;
                    //
                    for (var emt = 0; emt < xx.length; emt++) {
                        if (xx[emt].toString().trim() == "") {
                            xx[emt] = "''";
                        } else {
                            if (emt == 2) {
                                //
                                //debugger;
                                const dumeNA = hex2s(xx[emt]);
                                //
                                if (containsSpecialCharacter(dumeNA)) {
                                    //field Name has special character
                                    xx[emt] = "CAST(X'" + xx[emt] + "' As TEXT)";
                                } else {
                                    xx[emt] = "'" + dumeNA + "'";
                                };
                            } else {
                                xx[emt] = "'" + xx[emt] + "'";
                            };
                        };
                    };

                    xx.__fin = fin;

                    return xx;

                };
            //
            //debugger;
            //
            if (tmpl && (typeof tmpl === 'string' || tmpl instanceof String)) {
                //
                const BZIP2 = tmpl.split(String.fromCharCode(4));
                //
                //
                BZ2__Q.allBlock = BZIP2.length - 1;
                //
                //0: header
                UP__Q([

                     hedU.map(hed_pkg_0).join('\n') + '\n' //thay the ID bang $XX, se duoc tinh theo part [1] of filename

                    , [0, BZ2__Q.allBlock]]);

                // from 1 - > length -1 for template
                //
                for (var fz = 1; fz < BZIP2.length - 1; fz++) {
                    //
                    BZ2__Q([fz, BZIP2[fz]]);
                    //
                };
                //
            } else {
                //
                //debugger;
                const szBLO = 1,

                    hedBLO = tmpl[1].reduce(function (rt, xx) {
                        //
                        //*** yen tam tmpl[1] order theo User - finger ..
                        //
                        //theo dau van tay, nen co the nhieu dau van tay , cung 1 user.
                        var dumeX = xx,
                            minusID=parseInt(dumeX[1]);
                        //
                        if (minusID< 0) {
                            for (w = 0; w < hedU.length; w++) {
                                //debugger;
                                if (Math.abs(minusID).toString() == hedU[w][0]) {
                                    dumeX = hedU[w];
                                    break;
                                };
                            };
                        };
                        //
                        const uR = hed_pkg_0(dumeX),
                            isU = rt.filter(function (U) {
                                return U[0] == uR[0];
                            });
                        //
                        if (isU.length == 0) {
                            //debugger;
                            if (uR.__fin > -1) {//la finger ...
                                //Privilege
                                uR[1] = "'-1'";//flag neu exist se ko update privilege, name, card , password cua row exist.
                            };
                            rt.push(uR);
                        };
                        //
                        return rt;
                        //
                    }, []);
                //
                //debugger;
                //
                BZ2__Q.allBlock = Math.ceil(lstT.length / szBLO) + 1;//test, each finger 1 block.
                //
                UP__Q([

                  hedBLO.join('\n') + '\n' //thay the ID bang $XX, se duoc tinh theo part [1] of filename

                   , [0, BZ2__Q.allBlock]]);
                //

                //tinh toan se direct to UP__Q
                for (var fz = 0; fz < lstT.length ; fz += szBLO) {
                    //
                    UP__Q([

                          lstT.slice(fz, fz + szBLO).join('\n') + '\n' //thay the ID bang $XX, se duoc tinh theo part [1] of filename

                           , [fz + 1, BZ2__Q.allBlock]]);
                    //
                };
                //
            };
            //
            //S1 = 2;//da xong data co the upload len host.
            //
        };
        //
        //
        function _1st_up_heavy_tmpl_task(adr) {
            //
            //return;
            //
            if (!self['FormData']) {
                //
                //debugger;
                //da doi sang chung voi BZ2 decode,
                WO_FromData();

                //https://gist.github.com/Rob--W/8b5adedd84c0d36aba64
                //(function () {
                //    // Export variable to the global scope
                //    (this == undefined ? self : this)['FormData'] = FormData;

                //    var ___send$rw = XMLHttpRequest.prototype.send;
                //    XMLHttpRequest.prototype['send'] = function (data) {
                //        if (data instanceof FormData) {
                //            if (!data.__endedMultipart) data.__append('--' + data.boundary + '--\r\n');
                //            data.__endedMultipart = true;
                //            this.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + data.boundary);
                //            data = new Uint8Array(data.data).buffer;
                //        }
                //        // Invoke original XHR.send
                //        return ___send$rw.call(this, data);
                //    };

                //    function FormData() {
                //        // Force a Constructor
                //        if (!(this instanceof FormData)) return new FormData();
                //        // Generate a random boundary - This must be unique with respect to the form's contents.
                //        this.boundary = '------RWWorkerFormDataBoundary' + Math.random().toString(36);
                //        var internal_data = this.data = [];
                //        /**
                //        * Internal method.
                //        * @param inp String | ArrayBuffer | Uint8Array  Input
                //        */
                //        this.__append = function (inp) {
                //            var i = 0, len;
                //            if (typeof inp === 'string') {
                //                for (len = inp.length; i < len; i++)
                //                    internal_data.push(inp.charCodeAt(i) & 0xff);
                //            } else if (inp && inp.byteLength) {/*If ArrayBuffer or typed array */
                //                if (!('byteOffset' in inp))   /* If ArrayBuffer, wrap in view */
                //                    inp = new Uint8Array(inp);
                //                for (len = inp.byteLength; i < len; i++)
                //                    internal_data.push(inp[i] & 0xff);
                //            }
                //        };
                //    }
                //    /**
                //    * @param name     String                                  Key name
                //    * @param value    String|Blob|File|Uint8Array|ArrayBuffer Value
                //    * @param filename String                                  Optional File name (when value is not a string).
                //    **/
                //    FormData.prototype['append'] = function (name, value, filename) {
                //        if (this.__endedMultipart) {
                //            // Truncate the closing boundary
                //            this.data.length -= this.boundary.length + 6;
                //            this.__endedMultipart = false;
                //        }
                //        var valueType = Object.prototype.toString.call(value),
                //            part = '--' + this.boundary + '\r\n' +
                //                'Content-Disposition: form-data; name="' + name + '"';

                //        if (/^\[object (?:Blob|File)(?:Constructor)?\]$/.test(valueType)) {
                //            return this.append(name,
                //                            new Uint8Array(new FileReaderSync().readAsArrayBuffer(value)),
                //                            filename || value.name);
                //        } else if (/^\[object (?:Uint8Array|ArrayBuffer)(?:Constructor)?\]$/.test(valueType)) {
                //            part += '; filename="' + (filename || 'blob').replace(/"/g, '%22') + '"\r\n';
                //            part += 'Content-Type: application/octet-stream\r\n\r\n';
                //            this.__append(part);
                //            this.__append(value);
                //            part = '\r\n';
                //        } else {
                //            part += '\r\n\r\n' + value + '\r\n';
                //        }
                //        this.__append(part);
                //    };
                //})();
            };
            //
            //
            //debugger;
            //adr = adr.split(String.fromCharCode(29));
            //adr[0] = "http://wdms.dnd.vn:2432";// "http://wdms.dnd.vn:10996/000webhostapp.tep";// //debug local
            //
            //const allBlock = 2;
            //
            //for (var q = 0; q < allBlock; q++) {

            //    UP__Q([adr, 'document.querySelector("textarea").value', [q, allBlock]]);

            //};
            //
            UP__Q.__adr = adr;
            //
        };
        //
        function upload_engine() {
            //
            //debugger;
            //
            const content = this[1][0]
                , hedBlock = this[1][1],
                //
                diachi =[].concat( UP__Q.__adr),
                next_Q = this[0];
            //

            const RESP = function (me, msg) {
                //debugger;
                //
                const myI = diachi.indexOf(me);
                if (myI > -1 && diachi.length > 0) {
                    diachi.splice(myI, 1);
                };
                //
                //
                if (myI == -1 || diachi.length == 0) {
                    //
                    if (msg.dat[0] == 'err') {
                        //debugger;
                        //localconn post error thi cac package tiep theo se clear content cho nhe.
                        const __adrERR = UP__Q.__adrERR || [];
                        if (__adrERR.indexOf(me) == -1) {
                            __adrERR.push(me);
                            //
                            //xoa khoi queue upload.
                            delete UP__Q.__upTMPL[me];
                        };
                        //
                        UP__Q.__adrERR = __adrERR;
                        //
                    };
                    //
                    postMessage(msg);
                    //
                    //debugger;
                    //post next template packge...
                    next_Q();
                    //
                };
            }

            ,

            LOC = function () {
                //
                const me = this,
                    __localKEY = UP__Q.__localKEY[me[1]],

                    myADR = me[0] + ('&k=' + (__localKEY ? __localKEY : new Date().getTime().toString())) + "&tt=" + new Date().getTime(),


                    xhr = new XMLHttpRequest();


                //
                console.log(new Date().getTime(), myADR);
                //
                //var charN = content;//.slice(-1);
                //if (charN.substr(-2) === "\r\n") {
                //    // Yes, it does
                //} else if (charN.substr(-1) === "\n") {
                //    charN = charN.slice(0, -1);// + '\r\n';
                //};
                //
                var fuk = (hedBlock[0] == 0 ?

                (d0ggy.join('\n') + String.fromCharCode(30)) //xem chet cho nay . du me may ..

                : "") + content;
                //






                if (UP__Q.__adrERR && UP__Q.__adrERR.indexOf(me[1]) > -1) {
                    //debugger;
                    fuk = "";//error ko post content...
                }










                //
                xhr.open("POST", myADR, true);
                //xhr.timeout = 10000; // Set timeout to 4 seconds (4000 milliseconds)
       

                //xhr.setRequestHeader('Cache-Control', 'no-cache, no-store, max-age=0');
                //xhr.setRequestHeader('Expires', 'Thu, 1 Jan 1970 00:00:00 GMT');
                //xhr.setRequestHeader('Pragma', 'no-cache');
                //

                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        try {
                            //debugger;
                            // The file has been uploaded successfully
                            const fukPOST = JSON.parse(xhr.response.toString().trim());
                            //
                            if (parseInt(fukPOST[1]) == parseInt(fukPOST[2])) {//equal
                                //
                                if (fukPOST[3] == '-1') {
                                    //
                                    UP__Q.__localKEY[me[1]] = fukPOST[0];
                                    //
                                    RESP(me[1], { cmd: 'up_templ_rst', dat: [fukPOST[0]], hedBlock: hedBlock });
                                    //
                                } else {
                                    throw new Error('session error');
                                };
                            } else {
                                debugger;
                                setTimeout(function () {
                                    LOC.bind(me)();
                                }, 500);
                            };
                            //
                        } catch (err) {
                            debugger;
                            RESP(me[1], { cmd: 'up_templ_rst', dat: ['err', err], hedBlock: hedBlock });
                        };
                        //
                        //post next template packge...
                        //next_Q();
                        //
                    };
                };

                xhr.onerror = function (e) {
                    //
                    debugger;
                    RESP(me[1], { cmd: 'up_templ_rst', dat: ['err', 'xhr.onerror'], hedBlock: hedBlock });
                    //
                    //post next template packge...
                    //next_Q();
                };
                //
                //const d0gX = [];
                ////
                //if (hedBlock[0] == 0) {
                //    //debugger;
                //    for (var w = 0; w < d0ggy.length; w++) {
                //        //https://stackoverflow.com/questions/66215719/how-to-add-x-after-every-2-words-on-a-string-in-javascript
                //        //add '\x' vao giua 02 ky tu hex
                //        d0gX.push(d0ggy[w]/*.replace(/../g, '\\x$&')*/);//ArchUtils.bz2.decode(atob(d0ggy[w]))
                //    };
                //    d0gX.push( String.fromCharCode(30));
                //};
                ////
                //console.log(fuk);
                //
           

                //file = ,
                //
                //xhr.send(new Blob([fuk], { type: 'text/plain' }));
                //
                xhr.send(fuk);
                //
            }
            ,

            SRV = function () {
                //debugger;
                const me = this,
                    myADR = me[0],
                    file = new Blob([content], { type: 'text/plain' }),
                    xhr = new XMLHttpRequest();
                //
                // We set up the callback to handle the server response
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        try {
                            //debugger;
                            // The file has been uploaded successfully
                            RESP(me[1],{ cmd: 'up_templ_rst', dat: JSON.parse(atob(xhr.response)), hedBlock: hedBlock });
                            //
                        } catch (err) {
                            RESP(me[1], { cmd: 'up_templ_rst', dat: ['err', err], hedBlock: hedBlock });
                        };
                        //
                        //post next template packge...
                        //next_Q();
                        //
                    };
                };

                xhr.onerror = function (e) {
                    //
                    debugger;
                    RESP(me[1], { cmd: 'up_templ_rst', dat: ['err', 'xhr.onerror'], hedBlock: hedBlock });
                    //
                    //post next template packge...
                    //next_Q();
                    //
                };
                //
                //
                // We open the connection to the server
                xhr.open("POST", myADR, true);//

                // We set the "Content-Type" header to "multipart/form-data"
                //*** chorme se ko post duoc file neu keep setRequestHeader "Content-Type"
                //xhr.setRequestHeader("Content-Type", "multipart/form-data");

                // We create a FormData object and add the selected file
                const formData = new FormData();
                //
                //
                formData.append("file", file);
                formData.append("tok", myADR[myADR.indexOf('ko_can_req_dev') + 1]);
                //
                // We send the request to the server with the send() method
                xhr.send(formData);
                //
            };
            //
            //
            //debugger;
            //
            for (var w = diachi.length -1 ; w >-1 ; w--) {
                //
                const adr = diachi[w].split(String.fromCharCode(29)),

                    url = (adr[1] == 'localconn') ? (adr[0] + "?" + (hedBlock[0] == "clean" + BZ2__Q.allBlock ? '-1' : hedBlock[0])/*lan dau tien se check key*/ + "=" + adr[2]  /*__uuidphone*/) :

                            (adr[0].indexOf('http://') == -1 ? 'https://' : '') + adr[0] +

                            (adr[0] === "http://wdms.dnd.vn:2432" ? '/' : '/zk/')

                            + 'fin.php?XDEBUG_SESSION_START=154A5348&f=t' + (hedBlock[0] + '_' + adr[1].split('_')[1])
                            + (adr.length > 2 ? '&g=' + encodeURIComponent(adr[3]) + '&h=' + encodeURIComponent(adr[2]) + '&l=' + encodeURIComponent(adr[4]) : '') + '&t=' + new Date().getTime();

                //
                //url = "http://192.168.1.210:11222/zk/fin.php?0=FUCK";
                //
                if (adr[1] == 'localconn') {
                    //
                    if (hedBlock[0] == 0) {
                        //du me block finger se lam /tmp =10Mb cua mcc die !!!
                        LOC.bind([url, diachi[w]])();
                        //
                    } else {
                        //
                        //cho OK luon, roi se post finger.dat block sau ...
                        //debugger;
                        //ghi nhan block nay con phai xu ly sau
                        if (hedBlock[0].toString().indexOf('clean') > -1) {
                            //debugger;
                        } else {
                            const blockKEY = JSON.stringify(hedBlock);
                            //
                            if (!UP__Q.__upTMPL[blockKEY]) {
                                UP__Q.__upTMPL[blockKEY] = [content, [[url, diachi[w]]]];//m,ay cham cong so 1
                            } else {
                                UP__Q.__upTMPL[blockKEY][1].push([url, diachi[w]]); // may cham cong so N
                            };
                        };
                        //
                        const __localKEY = UP__Q.__localKEY[diachi[w]];
                        RESP(diachi[w], { cmd: 'up_templ_rst', dat: [__localKEY], hedBlock: hedBlock });
                        //
                    };
                } else {
                    SRV.bind([url, diachi[w]])()
                };
                //
            };
        };
        //


        const QUEUE_UP_LOCAL_TMPL = (function () {

            const pending = []
                ,

                POST_TMPL = function () {
                    //
                    //debugger;
                    //
                    const BIND_DAT = this,
                        next_Q = BIND_DAT[0],
                        //
                        INFO = BIND_DAT[1],
                        localZK = ["return_heavy_tmpl_local"].concat( INFO[2][0]),
                        hedBlock = INFO[2][2],
                        me = INFO[1],

                       __localKEY = UP__Q.__localKEY[me[1]],
                        myADR = me[0] + ('&k=' + (__localKEY ? __localKEY : new Date().getTime().toString())) + "&tt=" + new Date().getTime(),

                        xhr = new XMLHttpRequest();
                    //
                    //
                    var fuk = UP__Q.__upTMPL[INFO[0]][0];
                    //
                    if (UP__Q.__adrERR && UP__Q.__adrERR.indexOf(me[1]) > -1) {
                        //debugger;
                        fuk = "";//error ko post content...
                    };
                    //
                    xhr.open("POST", myADR, true);
                    //
                    //
                    xhr.onreadystatechange = function () {
                        if (xhr.readyState === 4 && xhr.status === 200) {
                            try {
                                //debugger;
                                // The file has been uploaded successfully
                                const fukPOST = JSON.parse(xhr.response.toString().trim());
                                //
                                if (parseInt(fukPOST[1]) == parseInt(fukPOST[2])) {//equal
                                    if (fukPOST[3] == '-1') {
                                        //
                                        UP__Q.__localKEY[me[1]] = fukPOST[0];
                                        //
                                        postMessage({ cmd: 'up_templ_rst', dat: [ fukPOST[0] ].concat(localZK), hedBlock: hedBlock });
                                        //
                                    } else {
                                        throw new Error('session error');
                                    };
                                } else {
                                    debugger;
                                    setTimeout(function () {
                                        POST_TMPL.bind(BIND_DAT)();
                                    }, 500);
                                    //
                                    return;//ko next_Q 
                                };
                                //
                                //
                            } catch (err) {
                                debugger;
                                postMessage({ cmd: 'up_templ_rst', dat: ['err'].concat(localZK), hedBlock: hedBlock });
                            };
                            //
                            //post next template packge...
                            next_Q();
                            //
                        };
                    };

                    xhr.onerror = function (e) {
                        //
                        //debugger;
                        //sau khi up xong thi phai tra ve 
                        postMessage({ cmd: 'up_templ_rst', dat: ['err'].concat(localZK) , hedBlock: hedBlock });
                        //
                        //post next template packge...
                        next_Q();
                    };
                    //
                    xhr.send(fuk);
                };

            function next() {
                //debugger;
                if (pending.length > 0) {
                    //
                    POST_TMPL.bind([function () {
                        //
                        pending.shift();//remove  finish upload at index 0
                        //
                        next();
                        //
                    }, pending[0]])();
                    //
                    //
                };
            };

            return function (fn) {
                pending.push(fn);
                if (pending.length == 1) next();
            };

        })();

        //
        function _up_heavy_tmpl_local(localZK, myBLOCK, hedBlock) {
            //prevent over 10Mb /tmp in zk device. up template tung cai ...
            //debugger;
            //
            const blockKEY = JSON.stringify(hedBlock),
                  penddingBLO = UP__Q.__upTMPL[blockKEY];

            //console.log('_up_heavy_tmpl_local', blockKEY);

            if (penddingBLO) {
                const mcc = penddingBLO[1];
                //debugger;
                for (var w = mcc.length - 1; w > -1 ; w--) {
                    if (mcc[w][0].indexOf(localZK[0]) > 0) {//dia chi upload to mcc co chua IP cua mcc
                        //
                        const hientai = mcc.splice(w, 1);//bo ra luon
                        hientai.unshift(blockKEY);//xai unshift de kiem soat index hon
                        //
                        hientai.push([localZK, myBLOCK, hedBlock]);
                        //
                        QUEUE_UP_LOCAL_TMPL(hientai);
                        //
                    };
                };
            };
            //
        };
        //
        //
        const jobO= {

            '1st_up_heavy_tmpl_init': _1st_up_heavy_tmpl_init
            ,
            '1st_up_heavy_tmpl_task': _1st_up_heavy_tmpl_task
            ,

            'up_heavy_tmpl_local': _up_heavy_tmpl_local//prevent over 10Mb /tmp in zk device. up template tung cai ...

            ,

            'end_up_heavy_tmpl_clean': function () {

                //debugger;

                //UP__Q.__adr[0] = 'http://wdms.dnd.vn:2432';
                upload_engine.bind(
                            [function () {

                            }, ['', ["clean" + BZ2__Q.allBlock, 0]]]
                    )();
            }

        };
        //
        return jobO;
    };

</script>

<script type="text/javascript">


    (function (fac) {
        "use strict";

        //debugger;

        if (!Main._devget) Main._devget = fac();

    })(function (ajaxUtility, Deferred, extend, CustomStore, dataUtils) {

        "use strict";

        function O(opts) { // constructor


            const genericCloseBtnHtml = '<h2  type="button" class="ml-auto p-0 m-0 text-danger csor-p" style="line-height:0;width: 15px;" aria-hidden="true">&times;</h2>'
            ,

            desk_UI = function (imF) {

                removeStyleProp(imF[0], ["height", "transform"]);
                imF.addClass('container_x_y');

            }
            ,

            chat__actions = function (e) {
                //
                //debugger;
                //e.preventDefault();
                //
                const li = $(e.currentTarget);
                //debugger;
                if (li.hasClass('chat__details')) {

                    //lang-lst
                    //debugger;
                    //opts.MNU.find(".lang-lst").appendTo(li);

                    //return;
                    li.attr('gmnu', 'general');
                    //
                    const th$a = this;
                    //setTimeout(function () {
                    __mnu.act_menu(th$a);
                    //});


                } else if (li.hasClass('chat__previous')) {
                    //
                    //opts.MNU.closest('.popuphwnd').modal('hide');
                    opts.impSCR.trigger('exit_view').removeClass('chat--show');
                    //
                };
            }
            ,

            input_file_CHANGE = function (e) {

                //debugger;

                const reader = new FileReader(), fi = this.files[0], th$a = $(this);

                if (this.files && this.files.length > 0) {
                    //
                    const reader = new FileReader(), fi = this.files[0];
                    //
                    reader.readAsText(fi);
                    reader.onload = function () {
                        //
                        try {
                            //debugger;
                            __mnu.thietbi_restore_S1(reader.result, th$a.attr('__dumeMCC'), th$a.next().next());
                            //
                        } catch (er) {
                            //
                            devDlg(0, _La$N('js_003_err', aLAN) || "Errors have occurred, please try again !").show();
                            //
                        };
                        //
                        th$a.trigger('resetVAL');
                        //
                    };
                    //
                    reader.onerror = function () {

                        th$a.trigger('resetVAL');

                        console.log(reader.error);
                    };
                };
            }
            ,

            mnu_each_mcc = function (e) {
                //
                //click vao nut mui ten phia sau mcc ...
                const nut = $(e.currentTarget);
                //
                if (!nut.attr('data-toggle')) {
                    nut.attr('data-toggle', "dropdown");
                    //clean truoc roi tinh sau ...
                    window.bootstrap.Dropdown._clearMenus();
                    //
                    nut.off('click.bs.dropdown').on('click.bs.dropdown', mnu_each_mcc)

                    .parent().off('show.bs.dropdown').on('show.bs.dropdown', function (ex) {
                        //
                        //debugger;
                        if (nut.attr('mnu') == 'thiet_bi_dume') {
                            mnu_each_mcc.__ul.find('a[mnu_bk]').parent()['addClass']('d-none');
                            mnu_each_mcc.__ul.find('a[mnu]').parent()['removeClass']('d-none');
                            //
                           const doggy= mnu_each_mcc.__ul.find('input:file')
                                .off('change', input_file_CHANGE).val(null)
                                .on('change', input_file_CHANGE);

                           if (__isSafari()) doggy.removeAttr('accept');
                            //
                        } else {
                            mnu_each_mcc.__ul.find('a[mnu]').parent()['addClass']('d-none');
                            mnu_each_mcc.__ul.find('a[mnu_bk]').parent()['removeClass']('d-none');
                        }
                    }.bind(nut));

                } else {
                    const DopDW = nut.data('bs.dropdown');
                    if (DopDW) {
                        if (mnu_each_mcc.__mnu != nut.attr('mnu')) {
                            if ($(DopDW._menu).hasClass('show')) {
                                window.bootstrap.Dropdown._clearMenus();
                            };
                        } else {
                            return;
                        };
                    };
                };
                //
                //$($(this).data()['bs.dropdown']._element).parent()[0].className
                //
                mnu_each_mcc.__ul.insertAfter(nut);
                mnu_each_mcc.__mnu = nut.attr('mnu');

                //if (!e.currentTarget.___mnu && !nut.parent().hasClass('list-group-item')) {
                //    //
                //    const ul = nut.closest('.list-group').find('.lang-lst');
                //    //
                //    e.currentTarget.___mnu = ul.insertAfter(nut.attr('data-toggle',"dropdown" ));
                //    //
                //};

            }
            ,

            DA = []
            ,

            hisVER = {
                '1.0.0.0': {
                    hSEP: '|' //String.fromCharCode(4)
                    , fNUM: 15, fREL: 7
                }
            }

            ,

            sum_FP_FA_CA_PW = function (it) {
                //
                if (!it) return [0, 0, 0, 0, 0, 0];
                //
                return [1,//_usr =
                    parseInt(it[9]), //_fp = 
                    parseInt(it[10]),  //_fa =
                    it[7].length > 0 ? 1 : 0, // _ca = i
                    it[5].length > 0 ? 1 : 0, //_pw =
                    it[3] == '14' ? 1 : 0 // _adm = 
                ];
                //
            }
            ,

            sum_FP_FA_CA_PW_9999 = function (it) {

                return [1,//_usr =
                    parseInt(it[9]) >-1 ?  1:0 , //_fp = 
                    parseInt(it[10]) > -1 ? 1 :0,  //_fa =
                    it[7].length > 0 ? 1 : 0, // _ca = i
                    it[5].length > 0 ? 1 : 0, //_pw =
                    it[3] == '14' ? 1 : 0 // _adm = 
                ];

            }
            ,

            sum_THONGKE = function (a,b) {
                //debugger;
                if (!a) return;
                //panel thong ke
                for (var w = 0; w < a.length; w++) {
                    b.eq(w).html(a[w]);
                };
            }

            ,

            filter_DA1 = function (DA_1, str) {
                //
                //debugger;
                //
                const uniqAC = [],
                    _sum = [0, 0, 0, 0, 0, 0],
                    re = (typeof str === 'string' || str instanceof String) ?
                    
                    DA_1.filter(function (it, y) {
                        //
                        //debugger;
                        //
                        const mL = it.length - 1,

                            isMatch_MAIN = it[mL] > 0 && it[mL - 1].toLowerCase().indexOf(str) > -1,
                            //user match emp or not match emp?
                            isMatch = isMatch_MAIN && (!__mnu.__nv || __mnu.__opeFILTER[__mnu.__nv[0]](it[2]));

                        //
                        if (isMatch) {
                            //
                            if (uniqAC.indexOf(it[2]) == -1) {
                                uniqAC.push(it[2]);
                            };
                            //
                            //
                            const _S = (it[0] == -9999 ? sum_FP_FA_CA_PW_9999 : sum_FP_FA_CA_PW)(it);
                            for (var w = 1; w < _sum.length; w++) {
                                _sum[w] += _S[w];
                            };
                            //
                        };
                        //
                        return isMatch;
                        //
                    }) :
                    
                    DA_1.filter(function (it, y) {
                        //
                        //debugger;
                        //
                        const mL = it.length - 1,
                            isMatch = str.indexOf( (y + 1).toString())>-1;// parseInt(it[mL]) )  it[mL] > 0 && it[mL - 1].toLowerCase().indexOf(str) > -1;
                        //
                        if (isMatch) {
                            //
                            if (uniqAC.indexOf(it[2]) == -1) {
                                uniqAC.push(it[2]);
                            };
                            //
                            //
                            const _S = (it[0] == -9999 ? sum_FP_FA_CA_PW_9999 : sum_FP_FA_CA_PW)(it);
                            for (var w = 1; w < _sum.length; w++) {
                                _sum[w] += _S[w];
                            };
                            //
                        };
                        //
                        return isMatch;
                        //
                    });

                //
                _sum[0] = uniqAC.length;//uniq usr
                //
                re.__sum_FP_FA_CA_PW = _sum;
                re.__uniqAC = uniqAC;
                //
                //DA_1.__sum_FP_FA_CA_PW = _sum;
                //DA_1.__uniqAC = uniqAC;
                //
                return re;
            }

            ,

            apply_adv_filter = function (DA_1, ori_adv, chkFilter, fp_val /*upfp =-1 else 0*/) {
                //debugger;
                //update lastest item of array -> valid state.
                for (var w = 0; w < DA_1.length; w++) {
                    const it = DA_1[w];
                    var sta = 1;//active;
                    //
                    if (chkFilter.indexOf('adm') == -1) {//ko bao gom admin
                        if (it[3] == '14') {
                            sta = -1;//disable
                        };
                    };
                    //
                    if (sta == 1 && chkFilter.indexOf('ca_pw') == -1) {//ko bao gom admin
                        if (it[5].toString().trim().length > 0 || it[7].toString().trim().length > 0) {
                            sta = -1;//disable
                        };
                    };
                    //
                    if (sta == 1 && chkFilter.indexOf('fp') == -1) {//ko bao gom admin
                        if (it[9].toString().trim().length > 0 && parseInt(it[9]) > fp_val) {//finger 0
                            sta = -1;//disable
                        };
                    };
                    //
                    if (fp_val == 0) {
                        //debugger;
                        //ko phai la upload fp fp_val=-1. 
                        if (it[0] < 0) sta = -1;//devide filter 
                    };
                    //
                    it[it.length - 1] = Math.abs(it[it.length - 1]) * sta;
                    //
                };
                
                //
                DA_1.__isADV = 2;//reset
                //
                for (var w = 0; w < ori_adv.length; w++) {
                    if (chkFilter.indexOf(ori_adv[w]) == -1) {
                        DA_1.__isADV = 1;//
                        break;
                    };
                };
                //
            }

            ,

            hex2s=function (h) {
                const HE = h.toString().trim();
                if (HE.length == 0) return ""
                return HE.match(/.{1,2}/g).reduce(function (acc, char) { return acc + String.fromCharCode(parseInt(char, 16)) }, "");
            }
            ,

            timkiem_dog_change = function (e) {
                //
                srclocked(false);
                //debugger;
                clearTimeout(timkiem_dog_change.__TO);
                //
                const me = $(e.currentTarget), dat = this;
                //
                me.prev()[(me.val().trim().length > 0 ? 'add' : 'remove') + 'Class']('findwhat');
                //
                timkiem_dog_change.__TO = setTimeout(function () {
                    //
                    clearTimeout(timkiem_dog_change.__TO);
                    //
                    srclocked(true);
                    //
                    //debugger;
                    //console.log(new Date().getTime(), '.timkiem_dog change');
                    me.prev()[(me.val().trim().length > 0 ? 'add' : 'remove') + 'Class']('findwhat');
                    //
                    debugger;
                    //trigger fuck_search listion col-9 of table
                    me.trigger('fuck_search', [me]);
                    //
                    timkiem_dog_change.dis_SUM();
                    //
                }, 300);
                //
                srclocked(true);
            }
            ,

            tb_head_neo=function() {
                //
                
                const _dis_SUM= function () {
                    //
                    const chk = this[0],
                        chkS = this[1],
                        __GET = [];

                    chkS.trigger('req_DB', ['sum_FP_FA_CA_PW', __GET]);
                    //
                    //
                    const v = __GET[0];
                    //
                    if (v) {
                        for (var z = 0; z < chk.length; z++) {
                            if (chk[z].getAttribute('fi') == 'fp') {//start at fingier check
                                //
                                $(chk[z]).next().find('b').html(v[1]);//finger
                                $(chk[z + 1]).next().find('b').html(v[2]);//face
                                $(chk[z + 2]).next().find('b').html(v[3] + v[4]);//card + pw
                                $(chk[z + 3]).next().find('b').html(v[5]);//admin
                                //
                                break;//exit
                            };
                        };
                    };
                };

                return function (neo_head, frm, adv_fi) {

                    neo_head.off('click').on('click', '.btn', function (e) {
                        //debugger;
                        if (this.hasAttribute('gmnu')) {
                            const th$a = this;
                            //setTimeout(function () {
                            __mnu.act_menu(th$a);
                            //});
                        };
                    });
                    //
                    desk_mobi.neo_head(neo_head, opts.mobiui);
                    //
                    //debugger;
                    var dss = 0;
                    //
                    //
                    const adv_run = adv_fi ? adv_fi.slice(0) : []//clone 
                    ,

                    dume = neo_head.find('.timkiem_dog')
                        .off('click')
                        .on('click', '.search-box-btn', function (xx,yy) {

                            //debugger;
                            if (yy) {
                                $(this).removeClass('findwhat');
                                dss = 0;
                                dume.removeClass('dume_open');
                                return;
                            };
                            //
                            if (dss == 0) {
                                dss = 1;
                                dume.addClass('dume_open');
                            } else {
                                //
                                const findico = $(this);//dume.find('input').val("");
                                //
                                if (findico.hasClass('findwhat')) {
                                    //srclocked(true);
                                    //debugger;
                                    findico.removeClass('findwhat').next()/*input*/.val("").trigger('change');
                                    //
                                } else {
                                    dss = 0;
                                    dume.removeClass('dume_open');
                                };
                            };

                        })
                    ,

                    search_input = dume.find('.search-box-input').off('change paste keyup').on('change paste keyup', function (e) {
                        //debugger;
                        //timkiem_dog_change();
                        if (e.type != 'change') {
                            //
                            e.stopImmediatePropagation();
                            //e.currentTarget.focus();
                            clearTimeout(search_input.__FUK_CHG);
                            //
                            search_input.__FUK_CHG = setTimeout(function () {
                                clearTimeout(search_input.__FUK_CHG);
                                search_input.blur();
                                search_input.focus();
                                //
                            },300);
                            //
                            //
                            //search_input.trigger('change');
                            return;
                            //
                        };
                        //
                        timkiem_dog_change.bind()(e);
                        //
                    })
                    //
                    ,

                    nut_filter_adv = neo_head.find('.filter_adv'),

                    btn_filter = nut_filter_adv.find('>button:first-child'),

                    body_filter_adv = neo_head.prev().off('change').on('change', 'input[type="checkbox"]', function (e, force,exP) {
                        //
                        debugger;

                        const chk = body_filter_adv.find('input[type="checkbox"]:checked');

                        btn_filter.removeClass('cart_shake');
                        //
                        btn_filter.find('>i').removeClass().addClass(achk.length == chk.length ? 'ti-list-ol' : 'ti-filter');
                        //
                        setTimeout(function () {
                            //
                            btn_filter.addClass('cart_shake');
                            //
                            //
                            //
                            //check advance filter.
                            var isCHG = 1, chgV = [];
                            //check xuoi
                            for (var z = 0; z < chk.length; z++) {
                                const fi = chk[z].getAttribute('fi').toString();
                                if (adv_run.indexOf(fi) === -1) {
                                    isCHG = 2;
                                };
                                //
                                if (adv_fi.indexOf(fi) > -1) chgV.push(fi);//chi push nhung field co trong origin.
                                //
                            };
                            if (isCHG === 1) {//chua co thay doi gi
                                for (var z = 0; z < adv_run.length; z++) {
                                    if (chgV.indexOf(adv_run[z]) === -1) {
                                        isCHG = 2;
                                        break;
                                    };
                                };
                            };
                            //
                            if (force == '1' || isCHG === 2) {
                                //co su thay doi.
                                adv_run.length = 0;//remove all item
                                for (var z = 0; z < chgV.length; z++) {
                                    adv_run.push(chgV[z]);
                                };
                                //
                                //
                                srclocked(false);
                                //debugger;
                                clearTimeout(timkiem_dog_change.__TO);
                                timkiem_dog_change.__TO = setTimeout(function () {
                                    //
                                    srclocked(true);
                                    //
                                    //debugger;
                                    //trigger fuck_search listion col-9 of table
                                    search_input.trigger('fuck_search', [search_input, adv_run, isCHG === 2 || force, exP]);
                                    timkiem_dog_change.dis_SUM();
                                    //
                                }, 300);
                                //
                                srclocked(true);
                                //
                            };
                            //
                        });
                        //console.log(achk.length, '; ', chk.length);
                        //filter_adv
                    })

                    ,

                    achk = body_filter_adv.find('input[type="checkbox"]').each(function (h, c) {
                        //
                        const ck = $(this),
                            //prefix dume_* de khi uncheck - line through red text
                            id = 'dume_' + frm + '_' + h + "_" + new Date().getTime();
                        //
                        ck.attr('id', id);
                        ck.next().attr('for', id);
                        //
                    })

                    ,

                    close_filter_adv = body_filter_adv.find('a.user-profile__close').off('click').on('click', function (e) {

                        //debugger;

                        btn_filter.removeClass('cart_shake');
                        //
                        nut_filter_adv.addClass('dong');//hide arrow;
                        //
                        body_filter_adv.slideUp(function () {
                            $(this).addClass('d-none');
                            neo_head.trigger('dume_neo_head', ['refresh_scroll'])
                                //show nut show advace filter.
                                .find('.filter_adv_menu [mnu="1"]').closest('li').removeClass('d-none')
                                .next().addClass('d-none');
                        });
                    });
                    //
                    //
                    if (_La$N('js_009U$R|5|6', opts.lan)) {
                        search_input.attr('placeholder', _La$N('js_009U$R|5|6', opts.lan));
                    };
                 


                    //checkbox select all row table 
                    const chkID =/* id =*/ 'selR_' + frm + '_' + new Date().getTime(),
                        chkS = neo_head.find('input[type="checkbox"]').attr('id', chkID);
                    //chkS.next().attr('for', id);
                    //
                    //
                    timkiem_dog_change.dis_SUM = _dis_SUM.bind([achk, chkS]);
                    //
                    //
                    neo_head.find('.filter_adv_menu').off('click').on('click', 'a', function (lkEVT) {
                        //
                        debugger;

                        const mnu = this.getAttribute('mnu'),
                            mEL=$(this);
                        //
                        if (mnu == "1") {
                            //
                            //
                            //trigger build sum before display on check valid filter
                            timkiem_dog_change.dis_SUM();
                            //
                            //
                            btn_filter.removeClass('cart_shake');
                            //
                            nut_filter_adv.removeClass('dong');//show arrow
                            //
                            //slow is 600
                            //fast is 200
                            //default is 400

                            const tim = neo_head.hasClass('neo_head_sticky') ? 0 : 400;

                            body_filter_adv.hide().removeClass('d-none').slideDown(tim, function () {
                                if (tim == 0) {
                                    //trigger de scroll advance filter visible.
                                    neo_head.trigger('dume_neo_head', [body_filter_adv]);
                                };
                                mEL.closest('li').addClass('d-none').next().removeClass('d-none');
                            });
                            //
                        } else if (mnu == "2") {
                            //
                            if (neo_head.hasClass('neo_head_sticky')) {
                                body_filter_adv.addClass('d-none');//ko can dai dong...
                            } else {
                                close_filter_adv.trigger('click');
                            };
                            //
                            mEL.closest('li').addClass('d-none').prev().removeClass('d-none');
                            //
                            nut_filter_adv.addClass('dong');//hide arrow;
                            //
                        } else if (mnu == "mobi_gioihan") {
                            //
                            __mnu.filter_usr_hsnv(neo_head, mnu, mEL);
                            //
                        } else if (["sel_a_pg", "rmv_a_pg", "sel_all", "rmv_all",'xuat_excel'].indexOf(mnu) > -1) {
                            //
                            //alert('here');
                            chkS.trigger('selrow', [mnu, lkEVT]);
                            //
                        };
                    });
                    //
                    //
                    //
                    //
                    const STICKY_HED = [];
                    neo_head.trigger('STICKY_HED', [STICKY_HED]);
                    //
                    //
                    if (STICKY_HED.length > 0) {
                        //
                        const frm_chung = STICKY_HED[0],
                        fnSTICKY = function (zz, mod) {
                            //
                            //debugger;
                            //const me = this ,
                            //    neoH = neo_head[0].getBoundingClientRect().height + 1,
                            //    tbT = th$a[0][0].getBoundingClientRect().top;
                            ////
                            //if (tbT > neoH) {
                            //    stickyTOP = tbT;
                            //} else {
                            //    stickyTOP = 0;
                            //};
                            //stickyTOP = mod == 1 ? neo_head[0].getBoundingClientRect().height : 0;

                            stickyTOP[0] = mod;
                            stickyTOP[2] = '';
                            //
                            if (zz) {
                                dogT = this.getBoundingClientRect().top + 1;
                                $(this).trigger('scroll');
                            };
                            //
                            stickyTOP[1] = mod == 1 ? dogT : 0;
                            //
                        }
                        ,
                        stickyTOP = [
                            opts.mobiui,//mobil mode 
                            0, //top limit
                            ''//
                        ];

                        //chat__content = opts.impSCR.find('.chat__content'),

                        var dogT = frm_chung.off('scroll').on('scroll', function () {

                            const cls = (stickyTOP[0] == 0 ?

                                    this.scrollTop > stickyTOP[1] :

                                    neo_head[0].getBoundingClientRect().top < stickyTOP[1]

                                ) ? 'add' : 'remove';
                            //
                            //console.log(new Date().getTime(), 'scroll');
                            //
                            if (cls != stickyTOP[2]) {
                                stickyTOP[2] = cls;
                                neo_head[cls + 'Class']('neo_head_sticky');
                            };
                            //
                        })

                        .off('update_sticky').on('update_sticky', fnSTICKY)

                        .off('dume_neo_head').on('dume_neo_head', function (e, t) {
                            //
                            if (t === 'refresh_scroll') {
                                frm_chung.trigger('scroll');
                            } else {
                                const ot = stickyTOP[0] == 0 ? 0 : (frm_chung.scrollTop() + t.offset().top - STICKY_HED[1]);//70 la vi titlebar > titlebar general
                                //console.log(ot);
                                frm_chung.animate({ scrollTop: ot });
                            };
                            //
                        })[0].getBoundingClientRect().top + 1;
                        //
                        //
                        setTimeout(function () {
                            //no lay top ko kip.
                            //debugger;
                            fnSTICKY.apply(frm_chung[0], [$.Event('fakeE'), opts.mobiui]);
                            //
                        }, 100);
                        //
                    };
                    //
                    return chkS;
                    //
                }
            }()

            ,

            MNU_SEL_ROW = function (e, mod, lkEVT) {

                debugger;

                const th$a = this,

                    DA_1 = [],// th$a[0],

                    //idxs = DA_1.length,//DA_1

                    td = th$a[1].find('tr:gt(0)'),//__TB

                    cntSEL_U = th$a[2],

                    chks = td.find('input[type="checkbox"]');//.prop("checked", isA);

                //
                var isA = true;// chk_SEL_A.is(":checked"),
                //    
                //debugger;
                //
                if (mod == 'xuat_excel') {
                    //
                    //debugger;
                    const selUSR = [];
                    th$a[1].trigger('_dume_dat_get', [DA_1]);
                    //
                    for (var w = 0; w < DA_1.length ; w++) {
                        //chi push cai chua chon.
                        //const idx = DA_1[w][DA_1[w].length - 1].toString();
                        selUSR.push(DA_1[w]);
                        //
                    };
                    //debugger;
                    __mnu.xuat_excel_evt(lkEVT, JSON.parse(JSON.stringify(selUSR)));
                    //
                    return;
                    //
                } else if (mod == 'sel_all') {
                    //
                    //debugger;
                    //
                    th$a[1].trigger('_dume_dat_get', [DA_1]);
                    //
                    for (var w = 0; w < DA_1.length ; w++) {
                        //chi push cai chua chon.
                        const idx = DA_1[w][DA_1[w].length - 1].toString();

                        if (cntSEL_U.indexOf(idx) == -1) cntSEL_U.push(idx);
                        //
                    };

                } else if (mod == 'rmv_all') {

                    cntSEL_U.length = 0;
                    isA = false;

                } else if (mod == 'sel_a_pg') {

                    for (var w = 0; w < chks.length ; w++) {
                        //chi push cai chua chon.
                        const idx = chks[w].getAttribute('idx');
                        if (cntSEL_U.indexOf(idx) == -1) cntSEL_U.push(idx);
                    };

                } else if (mod == 'rmv_a_pg') {
                    for (var w = 0; w < chks.length ; w++) {
                        //chi push cai chua chon.
                        const fI = cntSEL_U.indexOf(chks[w].getAttribute('idx'));
                        if (fI > -1) {
                            cntSEL_U.splice(fI, 1);
                        };
                    };
                    isA = false;
                };
                //
                //
                chks.prop("checked", isA);
                //
                //call nguoc ve xy ly tiep cong viec con lai.
                $(e.currentTarget).trigger('selrow_cb');
                //
            }
            ,
            paging = function () {
                //https://codepen.io/yasser-mas/pen/pyWPJd
                //getPagination('.table-class');
                //getPagination('table');

                /*					PAGINATION
                - on change max rows select options fade out all rows gt option value mx = 5
                - append pagination list as per numbers of rows / max rows option (20row/5= 4pages )
                - each pagination li on click -> fade out all tr gt max rows * li num and (5*pagenum 2 = 10 rows)
                - fade out all tr lt max rows * li num - max rows ((5*pagenum 2 = 10) - 5)
                - fade in all tr between (maxRows*PageNum) and (maxRows*pageNum)- MaxRows
                */


                const __genTR = function (m, m_nxt, cntSEL_U, isMULTI_DEV) {
                    //
                    //m[0: device id, m[1] maAC
                    //debugger;
                    //console.log(m[1]);
                    //
                    const idx = Math.abs(m[m.length - 1]).toString(),

                        chkname = 'chkna_' + idx,

                        isAC = !m_nxt || (m_nxt[0] + String.fromCharCode(30) + Math.abs(parseInt(m_nxt[1])) == m[0] + String.fromCharCode(30) + Math.abs(parseInt(m[1]))) ? 'class="usr_mcc"' : '',

                        devNA = (isMULTI_DEV && m[0].toString().length > 0 && m[0] != -9999) ? '<span class="usr_in_dev">' + DA[3][Math.abs(parseInt(m[0]))][1] + '</span>' : '',

                        isFACE = (m[10] != '' && parseInt(m[10]) > (m[0] == -9999 ? -1 : 0)) ? '<span class="khuonmat"><span class="dume_invert">' + m[10] + '</span><i class="fa fa-meh-o text-extra-large" aria-hidden="true"></i></span>' : '',

                        isFP = (m[9] != '' && parseInt(m[9]) > (m[0] == -9999 ? -1 : 0)) ? '<i class="vantay dume_invert">' + (m[0] == -9999 ? ('<span style="line-height: 20px;font-size: large;">' + m[9] + '</span>')

                        : (parseInt(m[9]) > 1 ? m[9] : '')) + '</i>' : '',

                        isCARD = (m[7].trim().length > 0 ? m[7] : '-'),

                        isPW = m[5].trim().length > 0 ? m[5] : '-',

                        isADM = m[3] == '14' ? '<i class="fa fa-user-secret mr-1 text-primary" aria-hidden="true"></i>' : '',

                        CHK = cntSEL_U.indexOf(idx)>-1 ? ' checked="checked"' : '';
                    //
                    //__genTR.__prevAC = m[0] + String.fromCharCode(30) + m[1];
                    //debugger;
                    //
                    return '<tr ' + isAC + '><td class="text-nowrap">' +

                            '<input usr=' + m[1] + ' idx=' + idx +  CHK + ' type="checkbox" class="dume_invert"/>' +
                            '<span class="ml-1">' + m[2] + '</span>' + (m[1].ho ? '<a sua_usr_info class="ml-1 ti-check text-success"></a>' : isEDT) +

                        '</td>' +
                            '<td style="word-break:break-all;">' + devNA + isADM +  m[4] + '</td>' +
                            '<td>' + isCARD + ' / ' + isPW + '</td>' +
                            '<td><span class="d-flex align-items-center justify-content-end">' +

                                    isFACE +
                                    isFP +
                                    (isCARD!='-'?'<i class="fa fa-id-card-o" aria-hidden="true"></i>':'') +
                                    (isPW!='-'?'<i class="fa fa-key" style="rotate:45deg;" aria-hidden="true"></i>':'') +

                        '</span></td>' +
                        '</tr>';

                    //'<tr><td colspan=4>' +
                    //    '<div class="text-small  font-italic d-flex justify-content-end">' +
                    //        '<span class="d-flex align-items-center usr_in_dev">' +
                    //            '<span class="text-secondary mr-2">4000TID-C</span>' +
                    //            '<span class="khuonmat mx-1"><span class="dume_invert">2</span><i class="fa fa-meh-o text-large" aria-hidden="true"></i></span>' +
                    //            '<i class="vantay dume_invert mx-1">2</i>' +
                    //            '<i class="fa fa-id-card-o mx-1" aria-hidden="true">2222223d</i>' +
                    //            '<i class="fa fa-key" style="rotate:45deg;" aria-hidden="true"></i><span class="fa">342</span>' +
                    //        '</span>' +

                    //        //'<span class="d-flex align-items-center usr_in_dev">' +
                    //        //    '<span class="text-secondary">RJ2200</span>' +
                    //        //    '<span class="khuonmat"><span class="dume_invert">2</span><i class="fa fa-meh-o text-large" aria-hidden="true"></i></span>' +
                    //        //    '<i class="vantay dume_invert">2</i>' +
                    //        //    '<i class="fa fa-id-card-o" aria-hidden="true"></i>' +
                    //        //    '<i class="fa fa-key" style="rotate:45deg;" aria-hidden="true"></i>' +
                    //        //'</span' +
                    //    '</div>' +
                    //'</td></tr>'

                    //'<tr><td>' +

                    //    '<input usr=' + m[1] + ' idx=' + idx + ' type="checkbox" class="dume_invert"/>' +
                    //    '<span class="ml-1">' + m[2] + '</span>' +

                    //'</td>' +
                    //    '<td><span class="usr_in_dev">RJ2200</span>' + hex2s(m[4]) + '</td>' +
                    //    '<td>' + (m[7].trim().length > 0 ? m[7] : '-') + ' / ' + (m[5].trim().length > 0 ? m[5] : '-') + '</td>' +
                    //    '<td class="d-flex align-items-center justify-content-end">' +

                    //            '<span class="khuonmat"><span class="dume_invert">2</span><i class="fa fa-meh-o text-large" aria-hidden="true"></i></span>' +
                    //            '<i class="vantay dume_invert">2</i>' +
                    //            '<i class="fa fa-id-card-o" aria-hidden="true"></i>' +
                    //            '<i class="fa fa-key" style="rotate:45deg;" aria-hidden="true"></i>' +

                    //'</td>' +
                    //'</tr>';
                }
                ,
                __showTR = function (idx, lne, l_nxt, cntSEL_U, isMULTI_DEV) {
                    //
                    //1             6		        |14	            |Khai	    |123		    |0		            |13756068       |
                    //0:dev id,  new1: ID    1:User_PIN    ,2: Privilege   ,2: Name    ,3: Password    ,4: Verify_Type     ,5: Main_Card   ,6: Vice_Card
                    if (typeof lne === 'string' || lne instanceof String) {
                        //
                        //debugger;
                        return __genTR(lne.split(String.fromCharCode(4)), l_nxt ? l_nxt.split(String.fromCharCode(4)) : l_nxt, cntSEL_U, isMULTI_DEV);//lne.split('|')
                        //
                    };
                    //
                    return __genTR(lne, l_nxt, cntSEL_U, isMULTI_DEV);
                    //
                };

                function limitTrang(pagination) {
                    // alert($('.pagination li').length)
                    //debugger;
                    const LI = pagination.find('li'),
                        act = LI.siblings('.active'),
                        act_idx = parseInt(act.attr('data-page'));
                    //
                    if (LI.length > 7) {

                        if (act_idx <= 3) {

                            pagination.find('li:gt(5)').hide();
                            pagination.find('i:lt(5)').show();
                            pagination.find('[data-page="next"]').show();

                        } if (act_idx > 3) {

                            pagination.find('li:gt(0)').hide();
                            pagination.find('[data-page="next"]').show();
                            for (var i = (parseInt(pagination.find('li.active').attr('data-page')) - 2) ; i <= (parseInt(pagination.find('li.active').attr('data-page')) + 2) ; i++) {
                                pagination.find('[data-page="' + i + '"]').show();

                            };
                        };
                    };
                    //
                    //
                    $(LI[LI.length - 1]).removeClass('d-none');
                    $(LI[0]).removeClass('d-none');
                    //
                    //
                    if (act_idx == LI.length - 2) {
                        $(LI[LI.length - 1]).addClass('d-none');
                    } else if (act_idx == 1) {
                        $(LI[0]).addClass('d-none');
                    };
                    //
                };

                function SEL_ROW_STA(TR, cntSEL_U) {
                    //debugger;
                    const chks = TR.find('td:eq(0) > input[type="checkbox"]');//.prop("checked", isA);
                    for (var w = 0; w < chks.length; w++) {
                        chks[w].checked = cntSEL_U.indexOf(chks[w].getAttribute('idx')) >-1;
                    };
                };

                function __Pagination(daR, __TB, sel_PGSZ, cntSEL_U,fuck_search) {

                    //debugger;

                    var lastPage = 1, pages_hide = [],
                        tBDY = __TB.find("tbody");



                    if (__TB.hasClass("mcc_usr_lst") && !paging.__mcc_usr_lst_TR) {
                        //backup lai template de giam dung luong file khi obfucator
                        paging.__mcc_usr_lst_TR = tBDY.clone();
                    };
                    //
                    //clean table
                    tBDY.empty();
                    //
                    //
                    const pagination = __TB.next().find(".pagination"),
                        sl_usr = pagination.next().find('span[sl_usr]').html(daR.length),
                        sl_pg = pagination.next().find('span[sl_pg]').html(1);//default 1 page


                    (sel_PGSZ || __TB.prev().find('[pagesz="maxRows"]'))

                    .off('change')

                    //.val(10)

                    .on('change', function (evt) {

                        //$('.paginationprev').html('');						// reset pagination

                        daR.pagenum = 0;


                        lastPage = 1; pages_hide = []; tBDY.empty();

                        //debugger;



                        pagination.find('li').slice(1, -1).remove();

                        var totalRows = daR.length; // numbers of rows
                        var trnum = 0; // reset tr counter
                        var maxRows = parseInt($(this).val()); // get Max Rows from select option

                        if (maxRows == 100000 || totalRows <= maxRows) {

                            pagination.hide();

                        } else {
                            pagination.show();
                        };


                        var isMULTI_DEV = false;
                        for (var idx = 1; idx < daR.length; idx++) {
                            if (daR[idx][0] != daR[idx-1][0]) {
                                isMULTI_DEV = true;
                                break;
                            };
                        };
                        //
                        for (var idx = 0; idx < daR.length; idx++) {
                            trnum++; // Start Counter
                            if (trnum > maxRows) {
                                // if tr number gt maxRows
                                //$(this).hide(); // fade it out
                                //
                                break;
                            };
                            //
                            pages_hide[lastPage - 1] += __showTR(idx, daR[idx], daR[idx + 1], cntSEL_U, isMULTI_DEV);
                            //
                        };
                        //
                        tBDY.append(pages_hide[lastPage - 1]);
                        pages_hide[lastPage - 1] = null;//reset
                        //

                        //daR.forEach(function (it,idx) {

                        //    debugger;

                        //    // each TR in  table and not the header
                        //    trnum++; // Start Counter
                        //    if (trnum > maxRows) {
                        //        // if tr number gt maxRows

                        //        //$(this).hide(); // fade it out
                        //        //
                        //        break;
                        //    }
                        //    if (trnum <= maxRows) {
                        //        //
                        //        __showTR(idx, daR[idx], __TR);
                        //        $(this).show();

                        //    } // else fade in Important in case if it ..
                        //}); //  was fade out to fade it in

                        //<a class="page-link" href="#">1</a>


                        if (totalRows > maxRows) {

                            // if tr total rows gt max rows option
                            const pagenum = daR.pagenum //hien thi tong so trang
                                = Math.ceil(totalRows / maxRows), // ceil total(rows/maxrows) to get ..
                                btnPREV = pagination.find('[dume_id="prev"]');


                            const fukP = pagination.next().next().empty()
                                .off('click').on('click', 'a', function (a) {
                                    //debugger;
                                    //doan nay la dung de jumb den trang duoc click.
                                    pagination.find('li[data-page="' + $(a.currentTarget).text() + '"]').trigger('click');
                                });


                            //	numbers of pages
                            for (var i = 1; i <= pagenum;) {
                                // for each page append pagination li
                                btnPREV.before(
                                    '<li class="page-item" data-page="' +
                                      i +
                                      '">\
								  <a class="page-link" href="#">' +
                                      i++ +
                                      '<span class="sr-only">(current)</span></a>\
								</li>'
                                  )
                                  .show();

                                fukP.append('<a href="#" class="dropdown-item">' + (i-1) + '</a>');


                            } // end for i

                        }; // end if row count > max rows

                        if (daR.pagenum > 0) {
                            sl_pg.html(daR.pagenum);
                            pagination.next().attr('data-toggle','dropdown');//ko cho dropdown
                        } else {
                            //
                            //debugger;
                            const __disp=pagination.next().data()['bs.dropdown'];
                            if (__disp) __disp.dispose();
                            //
                            sl_pg.html(1);
                            pagination.next().removeAttr('data-toggle');//ko cho dropdown
                            //
                        };


                        pagination.find('[data-page="1"]').addClass('active'); // add active class to the first li

                        pagination.find('li').off('click').on('click', function (evt) {
                            //
                            //debugger;

                            // on click each page
                            //evt.stopImmediatePropagation();
                            //evt.preventDefault();

                            var pageNum = $(this).attr('data-page'); // get it's number

                            const maxRows = parseInt(sel_PGSZ.val()); // get Max Rows from select option
                            //
                            //
                            //backup lai de dung sau nay khoi build
                            if (!pages_hide[lastPage - 1]) {
                                pages_hide[lastPage - 1] = tBDY.find('tr').detach();
                            };
                            //

                            if (pageNum == 'prev') {
                                if (lastPage == 1) {
                                    return;
                                }
                                pageNum = --lastPage;
                            }
                            if (pageNum == 'next') {
                                if (lastPage == pagination.find('li').length - 2) {
                                    return;
                                };
                                pageNum = ++lastPage;
                            };
                            //
                            //
                            //
                            lastPage = parseInt(pageNum);
                            const LI = pagination.find('li').removeClass('active'); // remove active class from all li
                            LI.siblings('[data-page="' + lastPage + '"]').addClass('active'); // add active class to the clicked
                            //
                            // $(this).addClass('active');					// add active class to the clicked
                            limitTrang(pagination);
                            //
                            if (pages_hide[pageNum - 1]) {

                                SEL_ROW_STA(pages_hide[pageNum - 1],cntSEL_U);

                                pages_hide[pageNum - 1].appendTo(tBDY);

                                pages_hide[pageNum - 1] = null;

                                return;
                            };
                            //
                            //
                            var trIndex = 0; // reset tr counter
                            for (var idx = 0; idx < daR.length; idx++) {
                                //debugger;
                                // each tr in table not the header
                                trIndex++; // tr index counter
                                // if tr index gt maxRows*pageNum or lt maxRows*pageNum-maxRows fade if out
                                if (
                                  trIndex > maxRows * pageNum ||
                                  trIndex <= maxRows * pageNum - maxRows
                                ) {
                                    //$(this).hide();
                                } else {
                                    pages_hide[lastPage - 1] += __showTR(idx, daR[idx], daR[idx + 1], cntSEL_U, isMULTI_DEV);
                                    //$(this).show();
                                }; //else fade in
                            };
                            //
                            debugger;
                            //
                            tBDY.append(pages_hide[lastPage - 1]);
                            pages_hide[lastPage - 1] = null;//reset
                            //
                        }); // end of on click pagination list

                        limitTrang(pagination);

                        //debugger;

                        $(this).trigger('page_changed', [daR, maxRows]);

                    })

                    .change()
                    //
                    .trigger('render_tb', [daR, fuck_search, pagination]);

                    //.on('shown.bs.dropdown', function (a) {

                    //debugger;
                    pagination.parent().off("show.bs.dropdown").on("show.bs.dropdown", function (e) {

                        console.log(new Date().getTime(), 'show.bs.dropdown');

                        //debugger;
                        const PAA = opts.pas[1],
                            pH = PAA.innerHeight(),
                            pig = pagination.next()[0].getBoundingClientRect();

                        //console.log(pig);
   

                        pagination.next().next().css({ 'max-height': (pH - pig.top < 100 ? pig.top - 75 : pH - 100) + 'px' })

                        .find('a').removeClass('active').eq(lastPage-1).addClass('active');


                        pagination.next().data()['bs.dropdown']._config.offset = function (p) {
                            //debugger;
                            
                            /*
                            console.log(new Date().getTime(), 'fucking', pH, p.popper.height);

                            const innerH = pH - 100;//title bar
                            if (p.popper.height > innerH) {
                                //p.popper.height -= p.popper.height - innerH;
                                //debugger;
                                const safe_B = p.reference.bottom + p.reference.height,
                                    safe_BB = (safe_B < 100 ? safe_B : 0);

        
                                //if (safe_BB > 0) p.popper.bottom = safe_BB;

                              
                                //p.popper.top = -1 * (innerH - safe_BB);

                            } else {
                                //pagination.next().next().css({'max-height':'auto','margin-top': 'auto'});
                            };
                            */
                            //
                            p.popper.left = 0;

                        };//"NaN,NaN";
                    });

                    //pagination.next().next().on("shown.bs.dropdown", function (e) {
                    //    //debugger;
                    //    alert("hree");
                    //});

                    // end of on select change

                    // END OF PAGINATION
                    //
                    //backup trong truong hop select all & filter.
                    __TB.off('_dume_dat_get').on('_dume_dat_get', function (a, DA_1) {
                        //debugger;
                        DA_1.push.apply(DA_1, daR);
                    });
                    //
                };

                function calc_R_DAT(mcc) {
                    //
                    //debugger;
                    //
                    const uniqAC = [],
                         _sum = [0, 0, 0, 0, 0, 0],
                        DA_1 = (mcc ? DA[1].filter(function (it, idx) {
                            //debugger;
                            return mcc.indexOf(it[0]) > -1;
                            //var isMatch = false;
                            //for (var fuk = 0; fuk < mcc.length; fuk++) {
                            //    if (it.indexOf(mcc[fuk] + opts.tmplVER.hSEP) == 0) {
                            //        isMatch = true;
                            //        break;
                            //    }
                            //};
                            //return isMatch;
                        }) : DA[1])

                        .map(function (it, k) {
                            //
                            //debugger;
                            //
                            if (uniqAC.indexOf(it[1][1]) == -1) uniqAC.push(it[1][1]);
                            //
                            const fuk = it[1].slice(0),

                                mccID = DA[3][it[0]][0],

                                endIndex = fuk.length;//clone;

                            fuk[3] = hex2s(fuk[3]);
                            //
                            fuk.unshift(
                                
                              (!mcc || mcc.length>0) ?   mccID * (!mcc || mcc.indexOf(it[0][0].toString())>-1?1:-1) : ''
                                
                                );//nhet vao index 0
                            //

                            fuk[endIndex + 1] = ((!mcc || mcc.length > 1) ? DA[3][it[0]][1] + String.fromCharCode(4) : '') + make_SEARCH_F(fuk);

                            fuk.push(k+1);//active equal index + 1 of row, start index at 1, not 0 !!!
                            //
                            //
                            //debugger;
                            const _S = sum_FP_FA_CA_PW(fuk);
                            for (var w = 1; w < _sum.length; w++) {
                                _sum[w] += _S[w];
                            };
                            //
                            //
                            return fuk;
                            //
                            //const t$r0 = fukg.slice(0);     //clone vao DUMA
                            //t$r0.push(1);//active


                            ////me kiep, phai dung String.fromCharCode(4) vi tu day qua code xu ly
                            //return DA[3][it[0]][1] //ten may cham cong
                            //    + String.fromCharCode(4) + fuk.join(String.fromCharCode(4));
                            ////
                        });
                    //
                    _sum[0] = uniqAC.length;//uniq usr
                    DA_1.__sum_FP_FA_CA_PW = _sum;
                    //
                    DA_1.__uniqAC = uniqAC;
                    //
                    return DA_1;
                };

                var isEDT = '';

                return function (usr, __TB, sel_PGSZ, cntSEL_UU, fuck_search, _isEDT) {
                    //
                    //debugger;
                    isEDT = _isEDT || '';
                    //
                    if (DA.length == 0) {
                        //
                        //moi load form
                        DA[0] = [];//khoi tao
                        DA[1] = [];//khoi tao
                        DA[2] = JSON.parse(JSON.stringify(gloEVTs.giaidoan2.fnXX.___devs));//device list
                        DA[3] = {};
                        //
                        //paging.__showTR = __showTR;
                        //
                    } else {
                        //
                        //debugger;
                        //detail device , usr luc nay se la id cua device.
                        const DA_1=(typeof usr === 'string' || usr instanceof String) ?

                            calc_R_DAT(usr.split('|'))

                            : usr;

                        __Pagination(DA_1, __TB, sel_PGSZ, cntSEL_UU, fuck_search);

                        return DA_1;
                    };
                    //
                    //debugger;
                    var DA_1, bk__usr;

                    const

                        DA_VALID_CHK = function (chkMCC) {
                            //debugger;
                            //
                            DA_VALID_CHK.__chkMCC = !chkMCC ? chkMCC : chkMCC.map(Number);//backup lai cac may cham cong duoc check.
                            //
                            var idx = 0;
                            //
                            DA_1.map(function (xx, y) {
                                //
                                //debugger;
                                var factor = -1;
                                if (!chkMCC/*all*/ || chkMCC.indexOf(Math.abs(xx[0]).toString()) > -1) {
                                    //limitU.push((y + 1).toString());//xai index
                                    factor = 1;
                                    //
                                    idx += 1;
                                    xx[xx.length - 1] = idx;//update row idx ...
                                };
                                //
                                xx[0] = Math.abs(xx[0]) * factor;
                                //
                            });
                            //
                        }
                       ,

                       cntSEL_U = [],

                       frm_chung = __TB.closest('.frm_chung'),

                       col_md = frm_chung.find('>div'),

                       elFIN = 'input[type="checkbox"]:not(#sel_all_device)',

                       lst_grp = col_md.eq(0).css({ 'z-index': 4 })//dropdown menu se ko bi overlay khi mouse hover.
                       .find('.list-group'),

                       lst_grp0 = lst_grp.eq(0)

                       .off('click').on('click', '.btn', mnu_each_mcc)//click vao nut mui ten phia sau mcc ... -> show menu)
                       .off('change').on('change', 'input[type="checkbox"]', function (e) {
                           //
                           debugger;
                           //
                           srclocked(true);
                           //
                           var chkMCC = null;
                           //
                           if (this.id == 'sel_all_device') {
                               //
                               chkMCC = [];
                               //
                               //debugger;
                               const chk = $(this).is(":checked");
                               //
                               lst_grp0.find(elFIN).each(function (di,it) {
                                   debugger;
                                   if (it.getAttribute('usr_lst') == "addFUCK") {//show user list invalid
                                       const __lst = chkMCC.__lst || [];
                                       //
                                       __lst.push(it.id.split('_')[1]);
                                       chkMCC.__lst = __lst;
                                       //
                                   } else {
                                       chkMCC = chkMCC || [];
                                       chkMCC.push(it.id.split('_')[1]);
                                       $(it).prop("checked", chk);
                                   };
                               });
                               //
                               lst_grp0_hed.children().first()['removeClass']('tri-state');
                               //
                               //
                               if (chk) {
                                   if (!chkMCC.__lst) {
                                       chkMCC = null;//all
                                   } else {
                                       //keep chkMCC
                                       delete chkMCC.__lst;
                                   };
                               } else {
                                   chkMCC = [];//empty.
                               };
                               //
                           } else {

                               const chk = lst_grp0.find(elFIN + ':not([usr_lst="addFUCK"]):checked'),

                                   valM = lst_grp0.children().find('input[type="checkbox"]').filter(function (di, it) {
                                       //debugger;
                                       return di>0 && it.getAttribute('usr_lst') != "addFUCK";//add - d-none

                                   }).length 

                                   ,

                                   cls = chk.length != valM ? 'add' : 'remove',

                                   sCK = chk.length > 0,

                                   hed = lst_grp0_hed.children().first();

                               //
                               hed.find('input[type="checkbox"]').prop("checked", sCK);
                               //
                               lst_grp0_hed.children().first()[cls + 'Class']('tri-state');
                               //
                               //
                               chkMCC = chk.map(function (k, mcc) {
                                   return mcc.id.split('_')[1];//getAttribute('na');// 
                               }).toArray();
                               //
                           };
                           //
                           //
                           if (__mnu.render_list_on_loaded) {//load xong roi.
                               //debugger;
                               __maxRows.find('[show_lsta]').trigger('click');
                               //
                           } else {
                               //
                               //debugger;
                               //
                               //const limitU = [],

                               //    pagesz = __maxRows.find('[pagesz="maxRows"]');
                               //
                               //

                               DA_VALID_CHK(chkMCC);
                               //DA_1= calc_R_DAT(chkMCC);


                               //backup lai datasource.
                               //__TB.data('DA_1', DA_1);
                               //
                               //__Pagination(filter_DA1(DA_1, limitU)
                               //     , __TB
                               //     , pagesz
                               //     , cntSEL_U//__maxRows luc nay bi doi di roi.
                               // );

                               debugger;
                               //filter_DA1(DA_1, limitU);
                               col_md.eq(1).find('.filter_adv_body input[type="checkbox"][fi="adm"]').trigger('change', ['1'/*force*/]);

                           };
                           //
                           srclocked(false);
                           //
                       })
                       ,
                       lst_grp0_hed = lst_grp0.children().first()
                       ,

                       lst_grp0_it = lst_grp0_hed.length > 0 && lst_grp0.children().last().remove()[0].outerHTML,

                       dulieu = function (_usr) {
                           //
                           bk__usr = JSON.stringify(_usr);
                           //
                           for (var a = 0; a < _usr.length; a++) {
                               //
                               var z = _usr[a].length - 1;
                               if (_usr[a][z][5] == 'OK') {
                                   //
                                   //detect version template store
                                   for (var V in hisVER) {
                                       if (hisVER.hasOwnProperty(V)) {
                                           //USER_INFOR . fNUM field.
                                           for (var sepe = z - 1; sepe > -1; sepe--) {
                                               if (_usr[a][sepe].split(hisVER[V].hSEP).length == hisVER[V].fNUM) {
                                                   opts.tmplVER = hisVER[V];
                                                   break;
                                               };
                                           };
                                       };
                                   };
                                   //
                                   //
                                   const maxID = z > 0 && _usr[a][z - 1].split(opts.tmplVER.hSEP),
                                       devI = _usr[a][z];
                                   //
                                   if (maxID !== false) { //host smarterASP.net, chua co fio_xxx function, nen downoad ko duoc free ftp from other host *** it'OK, not error.
                                       //
                                       //bo idex dau tien vi day la total record | max ID table. 6|11
                                       var whatFUK = maxID.splice(0, 1)[0];//next block keep total here
                                       if (whatFUK.indexOf('|') == -1) {
                                           //du me , neu seperate field ko phai la | thi no dinh lien 2 field voi nhau.
                                           maxID.splice(0, 1)[0];//bo them cai nua.... *** co tinh de 2 line du phong viec sau nay.
                                       } else {
                                           whatFUK = whatFUK.split('|');
                                           maxID.unshift(whatFUK[whatFUK.length - 1]);//push lai ID of table at index 0
                                       };
                                       //
                                       //debugger;
                                       //retore lai line vua cat auto ID cua sql lite
                                       _usr[a][z - 1] = maxID.join(opts.tmplVER.hSEP);
                                       //
                                       //debugger;
                                       //
                                       for (var u = 0; u < z ; u++) {
                                           //
                                           //DA[1].push(devI[0] + opts.tmplVER.hSEP + _usr[a][u]);//them device id vao truoc moi line --> neu la string thi chua build datarow.
                                           //
                                           //
                                           DA[1].push([devI[0].toString(), _usr[a][u].split(opts.tmplVER.hSEP)]);
                                           //
                                       };
                                   };
                                   //
                                   //debugger;
                                   //
                                   devI.tgU = z;
                                   DA[0].push(devI);
                                   DA[3][devI[0]] = devI;
                                   //
                                   const newIT = $(lst_grp0_it),
                                       na = 'dume_' + devI[0] /*id mcc*/ + "_" + devI[6] /*finger version*/ + "_" + new Date().getTime(),
                                       lbl = newIT.find('label').html('<span>' + devI[1] + ' (</span><b>' + z + '</b>)').attr('for', na);
                                   //
                                   lbl.prev().attr('id', na);
                                   lbl.prev().attr('na', devI[1]);//ten may cham cong
                                   lbl.next().attr('mnu', na);//dung de check html khi click.bs.dropdown.
                                   //
                                   lst_grp0.append(newIT);
                               };
                               //
                           };
                           //
                           //sort DA[1]
                           if (DA[0].length > 1) {
                               //sort only when more than 1 device.
                               DA[1].sort(function (a, b) {
                                   //debugger;
                                   const x = parseInt(a[1][1]);
                                   let y = parseInt(b[1][1]);
                                   if (x < y) { return -1; }
                                   if (x > y) { return 1; }
                                   return 0;
                               });
                           };




                           DA_1 = calc_R_DAT(null);



                       };

                    //
                    opts.impSCR.off('xoa_nguoidung').on('xoa_nguoidung', function (ef, usr, dev) {
                        //click mmu xoa nguoi dung se trigger ve day de lay array usr
                        //debugger;
                        const dvs = dev ?  [dev] :

                            DA_VALID_CHK.__chkMCC//arrray of device is check left panel.);
                        //
                        //
                        DA_1.map(function (xx, y) {
                            if (!dvs || dvs.indexOf(xx[0]) > -1) {//all
                                usr.push(xx);
                            };
                        });
                    })
                    .off('build_ds').on('build_ds', function (ef, usr, dev) {
                        //click mmu xoa nguoi dung se trigger ve day de lay array usr
                        debugger;
                        usr.push.apply(usr,calc_R_DAT(dev));

                        //DA_1.map(function (xx, y) {
                        //    if (!dev || xx[0] == dev) {//all
                        //        usr.push(xx);
                        //    };
                        //});
                    });
                    //
                    col_md.eq(2).remove();//remove col-md-8
                    //
                    //debugger;
                    //
                    opts.pas[1].off('DOWN_ATTLOG_END_USR').on('DOWN_ATTLOG_END_USR', function (evt, usrUPT) {

                        //debugger;

                        const old__usr = JSON.parse(bk__usr);
                        //
                        for (var w = 0; w < usrUPT.length; w++) {
                            //
                            const r = usrUPT[w].length - 1,
                               devU = usrUPT[w][r];

                            if (usrUPT[w][r][5] == 'OK') {


                                for (var a = 0; a < old__usr.length; a++) {
                                    const z = old__usr[a].length - 1,
                                       devI = old__usr[a][z];

                                    if (old__usr[a][z][5] == 'OK') {
                                        if (devU[0] == devI[0]) {

                                            old__usr[a] = usrUPT[w];//update lai.
                                            break;

                                        }
                                    };
                                };

                            };

                        };

                        //usr


                        cntSEL_U.length = 0;//reset luon

                        DA[0] = [];//khoi tao
                        DA[1] = [];//khoi tao
                        //DA[2] = JSON.parse(JSON.stringify(gloEVTs.giaidoan2.fnXX.___devs));//device list
                        DA[3] = {};
                        //
                        //
                        //neu ko se remove vi no nam trong device
                        mnu_each_mcc.__ul.appendTo(lst_grp0);
                        //
                        //remove all device list.
                        lst_grp0.find('.list-group-item:not(:first)').remove();
                        //
                        //
                        //me kiep phai reset lai neu ko no chi liet ke 1 device, neu show list
                        DA_VALID_CHK.__validMCC = '-1';//init mode.
                        delete DA_VALID_CHK.__chkMCC;
                        //
                        dulieu(old__usr);
                        //
                        //
                        //refresh lai.
                        //lst_grp0.find('input[type="checkbox"]#sel_all_device').trigger('change');
                        //
                    });
                    //
                    //
                    dulieu(usr);
                    //
                    //
                    //so luong thiet bi
                    lst_grp0_hed.find('b').html(DA[0].length);
                    mnu_each_mcc.__ul = lst_grp.find('.lang-lst')
                        .off('click').on('click', 'li>a', __mnu.thietbi_cmd);

                    //
                    //debugger;
                    //
                    const __maxRows = __TB.prev().appendTo(col_md.eq(0).find('>div:first-child')),

                        selU = frm_chung.next().next().attr('gmnu', "sync_sel_emp")//.attr('no-title', "")

                        .off('click').on('click', function (e) {

                            //debugger;

                            console.log(new Date().getTime(), 'click');

                            //click vao nut sel emp show popup menu

                            //__mnu.get_fp_tmpl.__dat = [cntSEL_U,
                            //    [
                            //        [].slice.apply(dev.attr('for').split('_'), [1, 3]) //lay id, va finger print version
                            //    ]
                            //];//list emp bk
                            //
                            const th$a = this;
                            //setTimeout(function () {
                            __mnu.act_menu(th$a);
                            //});
                            //
                        });


                    //
                    selU.attr('title', selU.prev().find('[data-lang="js_009U$R|0|1"]').text().toUpperCase());
                    //
                    //
                    DA_1.__isADV = 2;//orgini

                    __mnu.sync_hsvn_sel_emp = __mnu.thucthi_job;

                    __mnu.render_list_on_loaded = (function (elEVT,mod) {
                        //
                        //
                        delete __mnu.render_list_on_loaded;//load xong roi.
                        //
                        if (elEVT) {
                            frm_chung.closest('.chat__content').prev().find('.chat__infos').toggleClass('text-right text-center').addClass("text-truncate")
                            .html(

                                frm_chung.prev().find('.title').clone()
                                .removeClass('ml-5').toggleClass('pt-1 m-1')
                                .html($(elEVT.currentTarget).find('[data-lang]').text())

                            );
                        };
                        //
                        const th$a = this;
                        //
                        //debugger;
                        //cho nay hoi ky chut, gap qua thoi ke no.
                        const div9 = th$a[0].closest('.frm_chung>div');


                        //div9[0].style.setProperty('display', '');
                        div9.removeClass('d-none');


                        pgcnt.slideDown(function () { pgcnt.removeClass('d-none d-flex') }).removeClass('d-none d-flex').addClass('d-flex');
                        pgsz.slideDown(function () { pgcnt.removeClass('d-none d-flex') }).removeClass('d-none d-flex').addClass('d-flex');
                        //
                        //debugger;
                        //
                        const ori_adv = ['0'//ko co tren may cham cong / co tren file upload
                                , '1'//co tren may cham cong / ko co tren file upload
                                , '2'//co tren may cham cong + co tren file upload
                                , 'fp'//finger
                                , 'fa'//face
                                , 'ca_pw'//card /password
                                , 'adm'// quyen admin
                        ]

                            ,

                            TB_ROW_SEL = function () {

                                selU[(cntSEL_U.length > 0 ? 'remove' : 'add') + 'Class']('d-none');
                                //
                                if (cntSEL_U.length > 0) {
                                    //
                                    selU.removeClass('cart_shake').attr('data-totalemps', cntSEL_U.length);
                                    //
                                    setTimeout(function () {
                                        selU.addClass('cart_shake');
                                    }, 100);
                                    //
                                };
                                //
                                chk_SEL_A.prop("checked", cntSEL_U.length > 0);
                                //
                                chk_SEL_A.parent()[(DA_1.length != cntSEL_U.length ? 'add' : 'remove') + 'Class']('tri-state');
                                //
                            }
                        ,

                        ONLY_LST_U_fuck_search = function (ev, searchBOX, chkFilter, force) {
                            //
                            //debugger;
                            //
                            if (chkFilter) {
                                //update lastest item of array -> valid state.
                                apply_adv_filter(DA_1, ori_adv, chkFilter, 0/*index 9 >0 */);
                                //
                            };
                            //
                            //
                            if (DA_VALID_CHK.__validMCC != '-1') {
                                force = '1';//bat buoc filter.
                            };
                            //
                            //
                            const str = searchBOX ? searchBOX.val().trim().toLowerCase() : "",

                                   DA_1_filter = (str == '' && DA_1.__isADV == 2 && !force) ? DA_1 : filter_DA1(DA_1, str);
                            //
                            //ev = null khi call when load only device.
                            if (ev) chk_SEL_A.__sumINF = [DA_1_filter.__sum_FP_FA_CA_PW];
                            //
                            //
                            isEDT = '';//trong noi bo cua no thi reset...
                            //
                            __Pagination(

                                   DA_1_filter

                                , th$a[0]
                                , th$a[1].find('[pagesz="maxRows"]')
                                , cntSEL_U, '1');

                            //
                            srclocked(false);
                            //
                        }
                        ,

                        SHOW_LST_U = function (chk_sel_all_device, validMCC,load) {
                            //
                            chk_sel_all_device.prop('checked', true).parent().removeClass('tri-state')
                                    .parent()[(validMCC == '-1' ? 'remove' : 'add') + 'Class']('d-none');
                          
                            //
                            DA_VALID_CHK.__validMCC = validMCC;
                            //
                            if (!load) {
                                debugger;
                                //set check all device
                                const searchB = neo_head.find('.search-box-input').val(''),
                                    timkiem_dog = searchB.prev().trigger('click', ['dume_ignore!!!'])
                                    .closest('.timkiem_dog').removeClass('dume_open').parent().children();

                                //
                                cntSEL_U.length = 0;//clear select
                                TB_ROW_SEL();
                                //
                                timkiem_dog.eq(1)/*[nut_lenh]*/.find('> button:first-child').find('>i').removeClass('ti-filter').addClass('ti-list-ol');
                                //reset filter check ...
                                neo_head.prev().find('.user-profile__close').trigger('click');//.find('.filter_adv_menu [mnu="2"]').trigger('click');
                                neo_head.prev().find('input[fi]').prop('checked', true);//reset all check.
                                //
                                //
                                if (neo_head.next().hasClass('filter_usr_in_hsnv')) {
                                    neo_head.next().find('a.user-profile__close').trigger('click');
                                };
                                //
                            };
                            //
                            //
                            //
                            //debugger;
                            const lstMCC = lst_grp0.find(elFIN),
                               vaLST = validMCC=='-1' ? null : validMCC.split(',');
                            //
                            for (var w = 0; w < lstMCC.length; w++) {
                                //
                                const idd = lstMCC[w].id.split('_'),

                                    cls = (!vaLST || vaLST.indexOf(idd[1])) > -1 ? 'remove' : 'add';
                                //
                                lstMCC[w].setAttribute('usr_lst', cls + 'FUCK');
                                $(lstMCC[w]).prop('checked', cls == 'remove');
                                //
                                $(lstMCC[w]).closest('.list-group-item')[cls + 'Class']('d-none');
                                //
                            };
                            //
                            //
                            DA_VALID_CHK(vaLST);//filter database theo list mcc.
                            //
                            ONLY_LST_U_fuck_search(null, null, ori_adv, "1");
                            //
                        };
                        //
                        //
                        //
                        if (mod && mod != '-1') {
                            //
                            SHOW_LST_U(lst_grp0.find('#sel_all_device'), mod,'load');
                            //
                        } else {
                            //
                            DA_VALID_CHK.__validMCC = '-1';//init mode.

                            isEDT = '';//trong noi bo cua no thi reset...

                            __Pagination(DA_1, th$a[0], th$a[1].find('[pagesz="maxRows"]'), cntSEL_U);
                            //
                        };
                        //
                        //
                        th$a[0]/*__TB*/.off('change').on('change', 'input[type=checkbox]', function (e) {
                            //
                            //debugger;
                            const chk = $(this),
                                 usrid = chk.attr('idx').trim(),//lay idx vi ID + User_Pin + fingerid
                                 isHas = cntSEL_U.indexOf(usrid);


                            if (chk.is(':checked')) {
                                if (isHas == -1) cntSEL_U.push(usrid);
                            } else {
                                if (isHas > -1) cntSEL_U.splice(isHas, 1);
                            };
                            //
                            TB_ROW_SEL();
                            //
                        });
                        //
                        //
                        //
                        const neo_head = div9.find('.neo_head').off('STICKY_HED').on('STICKY_HED', function ($e, hed) {
                            //debugger;
                            hed.push(frm_chung.closest('.chat__content'));
                            hed.push(60);
                        })

                        ,

                        chk_SEL_A = new tb_head_neo(neo_head.off('fuck_search').on('fuck_search', ONLY_LST_U_fuck_search ), '1', ori_adv)

                        .off('selrow').on('selrow', MNU_SEL_ROW.bind([DA_1, th$a[0], cntSEL_U]))

                        .off('selrow_cb').on('selrow_cb', TB_ROW_SEL)

                        .off('req_DB').on('req_DB', function (je, cmd, a, b, c) {
                            //
                            //debugger;
                            //lay db hoac some in for of db
                            if (cmd == 'sum_FP_FA_CA_PW') {
                                a.push(

                                    chk_SEL_A.__sumINF && chk_SEL_A.__sumINF[0] || DA_1.__sum_FP_FA_CA_PW

                                );
                            };
                            //
                        });
                        //
                        //click menu trong popover cua nut sel usr
                        selU.off('__mnu_click').on('__mnu_click', function (e, lnk, lnkEVT) {
                            //popup menu click thi no se trigger ve day.
                            //
                            //debugger;
                            //
                            if (lnk == 'view_sel_lst') {

                                //srclocked(true);

                                isEDT = '';//trong noi bo cua no thi reset...

                                __Pagination(

                                    filter_DA1(DA_1, cntSEL_U)

                                   , __TB

                                   , __maxRows.find('[pagesz="maxRows"]')

                                   , cntSEL_U);


                                //srclocked(false);

                            } else if (lnk == 'clear_sel') {
                                //
                                //cntSEL_U.length = 0;//reset
                                //debugger;
                                //trigger check admin cua filter.
                                neo_head.prev().find('input[type="checkbox"][fi="adm"]').trigger('change', ['1'/*force change.*/]);
                                //
                                //trigger device list ben trai.
                                //lst_grp0.find(elFIN).trigger('change');
                                //
                                TB_ROW_SEL();
                                //
                            } else if (lnk == 'xuat_excel') {
                                //
                                //alert('xuat excel');
                                const selUSR = DA_1.filter(function (y) {
                                    return cntSEL_U.indexOf(y[y.length - 1].toString()) > -1;
                                });
                                //for (var w = 0; w < cntSEL_U.length; w++) {
                                //    selUSR.push(DA_1[parseInt(cntSEL_U[w]) - 1])
                                //};
                                //debugger;
                                __mnu.xuat_excel_evt(lnkEVT, JSON.parse(JSON.stringify(selUSR)));
                                //

                            } else {
                                //} else if (lnk == 'del_usr') {
                                //    debugger;
                                //    const selUSR = [];
                                //    //
                                //    for (var w = 0; w < cntSEL_U.length; w++) {
                                //        selUSR.push(DA_1[parseInt(cntSEL_U[w]) - 1])
                                //    };
                                //    //

                                //} else if (lnk == 'sync_profile_mnu') {
                                //    //debugger;
                                //    debugger;

                                //    //debugger;
                                //    __mnu.thucthi_job(lnkEVT, selUSR, '-3');
                                const iM = ['del_usr', 'sync_profile_mnu'].indexOf(lnk);
                                if (iM > -1) {
                                    //
                                    //debugger;
                                    const selUSR = DA_1.filter(function (y) {
                                        return cntSEL_U.indexOf(y[y.length - 1].toString()) > -1;
                                    });
                                    //
                                    //for (var w = 0; w < cntSEL_U.length; w++) {
                                    //    selUSR.push(DA_1[parseInt(cntSEL_U[w]) - 1])
                                    //};
                                 
                                    lnkEVT.__cmd_from_usr_lst = lnk;//signal execute from User's List screen.
                                    //
                                    __mnu.thucthi_job(lnkEVT, JSON.parse(JSON.stringify(selUSR)), iM == 1 ? '-3' : lnk);
                                    //
                                };
                            };
                            //
                        });
                        //


                        //__mnu.render_list_on_loaded = function (x, y, z) {
                        //    alert('du me may');
                        //};

                        lst_grp0.on('onLST_USRS', function (sk, args) {
                            //trigger at #sel_all_device, a first child check of lst_grp0
                            debugger;
                            //
                            if (DA_VALID_CHK.__validMCC != args) {
                                const chk_sel_all_device = sk.target;
                                SHOW_LST_U($(sk.target), args);
                            };
                            //
                        });
                        //
                    }).bind([__TB, __maxRows]);
                    //
                    //
                    const pgcnt = __maxRows.find('[elui="pgcnt"]').removeClass('d-none d-flex').addClass(opts.mobiui == 0 ? 'd-flex' : 'd-none'),
                        pgsz = __maxRows.find('[elui="pgsz"]').removeClass('d-none d-flex').addClass(opts.mobiui == 0 ? 'd-flex' : 'd-none');
                    //
                    desk_mobi.btnlst(__maxRows.find('[elui="btnlst"]'), opts.mobiui).off('click').on('click', '.btn', function (w) {
                        //debugger;
                        const me = $(this);
                        if (this.hasAttribute("hide_lsta")) {
                            //
                            me.addClass('d-none').next().removeClass('d-none');
                            pgcnt.removeClass('d-flex d-none').slideUp();
                            pgsz.removeClass('d-flex d-none').slideUp();
                            //
                            $(col_md[1]).addClass('d-none');//.style.setProperty('display', 'none', 'important');
                            //
                        } else if (this.hasAttribute("show_lsta")) {
                            //
                            if (__mnu.render_list_on_loaded) {
                                __mnu.render_list_on_loaded();
                            } else {
                                //
                                $(col_md[1]).removeClass('d-none');//.style.setProperty('display', '');
                                //
                                pgcnt.slideDown().removeClass('d-none d-flex').addClass('d-flex');
                                pgsz.slideDown().removeClass('d-none d-flex').addClass('d-flex');
                            };
                            //
                            me.removeClass('d-none d-flex').addClass('d-none').prev().removeClass('d-none');
                            //
                        } else {
                            //show_more
                            const th$a = this;
                            //setTimeout(function () {
                            __mnu.act_menu(th$a);
                            //});
                        };
                    });
                    //
                    //
                    //
                    __maxRows.find('[elui="sync_profile"]').removeClass('d-none d-flex').addClass('d-flex ').off('click').on('click', function (xx) {
                        //debugger;
                        if (['span', 'i'].indexOf(xx.target.tagName.toLowerCase()) == -1) return;
                        //
                        const usr = [].concat(calc_R_DAT(DA_VALID_CHK.__validMCC == '-1'? null : DA_VALID_CHK.__validMCC.split(',')));
                        //
                        //debugger;
                        __mnu.thucthi_job(xx, usr, '-3');

                    })
                    //
                    //********* nut show list, hide list tam thoi an di, sau nay co gi thi tinh tiep ..
                    .next()[0].style.setProperty('display', 'none', 'important');
                    //********************************************************************************
                    //
                    //lan dau tien load len se = total usr
                    const etotal = __maxRows.find('[elui="etotal"] >span:last-child');
                    //pgcnt.find('>span:last-child').html(duynhatAC.length);
                    //
                    __maxRows.off('render_tb').on('render_tb', function (e, daR, fuck_search) {
                        //
                        //debugger;
                        //const duynhatAC = [];
                        //daR.map(function (it) {
                        //    const dgg = it.split(opts.tmplVER.hSEP);
                        //    if (duynhatAC.indexOf(dgg[2]) == -1) duynhatAC.push(dgg[2]);
                        //});
                        //
                        //
                        if (daR.__uniqAC) etotal.html(daR.__uniqAC.length);
                        //
                        //maxrow nam trong pane left

                        __maxRows[(daR.length > 0 ? 'slideDown' : 'slideUp')]();//[(daR.length > 0 ? 'slideDown' : 'slideUp') + 'Class']('d-none');
                        //
                        //
                        col_md.eq(1).removeClass('has_usr no_usr search_no_usr').addClass((daR.length > 0 ? 'has_usr' :

                                fuck_search == '1' ? 'search_no_usr' : 'no_usr'

                            ));
                        //
                        //
                        //doi ve cuoi
                        //div.lst_thongbao
                        //const mePA = __TB.closest('div.panel')[(daR.length > 0 ? 'remove' : 'add') + 'Class']('d-none');
                        //mePA.prev()[(daR.length > 0 ? 'remove' : 'add') + 'Class']('d-none');
                        //mePA.next()[(daR.length > 0 ? 'add' : 'remove') + 'Class']('d-none');

                    })
                    .off('page_changed').on('page_changed', function (e, daR, maxR) {
                        //debugger;
                        pgcnt.find('>span:last-child').html(daR.pagenum);
                        pgcnt.removeClass('d-flex d-none')[daR.pagenum > 0 ? 'slideDown' : 'slideUp'](function () {
                            pgcnt.removeClass('d-none d-flex').addClass(daR.pagenum > 0 ? 'd-flex' : 'd-none');
                        });
                    });
                    //
                    //debugger;
                    //
                    ////if (opts.mobiui == 1) {
                    ////    //
                    ////    //col_md[1].style.setProperty('display', 'none', 'important');
                    ////    //
                    ////    //backup lai datasource.
                    ////   //__TB.data('DA_1', DA_1);
                    ////    //
                    ////    //mobi chua hien thi list nen phai tinh.
                    ////    etotal.html(DA_1.__uniqAC.length);
                    ////    //
                    ////} else {
                    ////    //__mnu.render_list_on_loaded();
                    ////    __maxRows.find('[show_lsta]').trigger('click');
                    ////};
                    //
                };
                //  Developed By Yasser Mas
                // yasser.mas2@gmail.com
            }()

            ,

            SCR_effect = function (pa, I, O, clsI, clsO, c$b, trans, clen) {
                //
                if (!trans) trans = { 'height': 'auto', 'transform': 'rotateX(-50deg) scale(0.7)', 'overflow': 'hidden' };
                if (!clen) clen = ["transform", "height"];
                //
                if (GetIEVersion() == '11') {
                    if (clen.indexOf("overflow") == -1) clen.push("overflow");
                };
                //
                //1. state normal after In appear.
                I.one(tra$Na.g(), function () {//end 'chat--show' annimation.

                    setTimeout(function () {
                        //debugger;
                        pa.addClass('container_x_y');
                        removeStyleProp(pa[0], clen);
                        //
                    }, 100);

                    if (c$b) c$b();

                }).css('display', 'block');
                //
                //2. Out disappear
                O[clsO[0]](clsO[1]);
                //
                ///3. papa effect during In-Out
                pa.one(tra$Na.g(), function () {//end 'chat--show' annimation.
                    //
                    I[clsI[0]](clsI[1]);
                    //
                }).addClass('container_x').css(trans);
            }

            ,

            make_SEARCH_F = function (fukg) {

                return fukg[4] + String.fromCharCode(4) + fukg[5] + String.fromCharCode(4) + fukg[7];

            }
            ,

            shared_lstT = function (bz2, hedU, lstT,verINF,pgre) {
                //shared to worker
                //debugger;
                //


                const defer = $.Deferred();



                const _usrIDX = [], DUMA = []
                    , _sum = [0, 0, 0, 0, 0, 0]
                    , endIndex = verINF.fREL
                    + 1//vi co ID cua table USER_INFO 
                    + 1 //finger count
                    + 1; //face count ;=> du dinh se applend serach field vao last index.
                //
                //pgre [tail,pbar]
                //index 0: list of user + finger index
                //index last: header of backup user

                var fz = 1;

                const deBZ2 = function () {
                    //

                    if (fz > bz2.length - 2) {//ko lay lastest index
                        // for (var fz = 1; fz < bz2.length - 1; fz++) {

                        //ha ha... nhung cai nao ko co trong lstT la user info not have finger template.
                        for (var n = 0; n < hedU.length; n++) {
                            if (_usrIDX.indexOf(n) == -1) {
                                //
                                _usrIDX.push(n);
                                //
                                const fukg = hedU[n].slice(0, endIndex);//clone
                                fukg[3] = hex2s(fukg[3]);
                                fukg.unshift(-9999);
                                //
                                fukg[9] = "-1";
                                fukg[10] = "-1";
                                lstT.push(fukg.slice(0));//clone to lstT
                                //
                                //
                                fukg[endIndex + 1] = make_SEARCH_F(fukg);
                                fukg.push(DUMA.length + 1);//active
                                DUMA.push(fukg);
                                //
                                //DUMA.push("" //ten may cham cong, prevent search miss
                                //                        + String.fromCharCode(4) + fukg.join(String.fromCharCode(4)));
                                //
                            };
                        };
                        //
                        DUMA.__uniqAC = _usrIDX;
                        //
                        for (var k = 0; k < DUMA.length; k++) {
                            const _S = sum_FP_FA_CA_PW_9999(DUMA[k]);
                            for (var w = 1; w < _sum.length; w++) {
                                _sum[w] += _S[w] > -1 ? _S[w] : 0;
                            };
                        };
                        //
                        //debugger;
                        _sum[0] = _usrIDX.length;//uniq usr
                        //
                        DUMA.__sum_FP_FA_CA_PW = _sum;
                        //
                        lstT.__DUMA = DUMA;
                        //
                        //
                        return defer.resolve();
                    };
                    //
                    //
                    //debugger;
                    //
                    const rst = ArchUtils.bz2.decode(atob(bz2[fz])).split(/\r?\n/),
                            z = rst.length > 3 ? 3 : rst.length - 1;

                        //
                    //may gita head openDatabase ... "openDatabase(115004)test:isThreadsafe:0, bCoreMutex:0,bFullMutex:0
                    for (var i = z; i > -1; i--) {
                        if (rst[i].indexOf('openDatabase') > -1 || rst[i].indexOf('isThreadsafe') > -1 || rst[i].indexOf('bCoreMutex') > -1 || rst[i].indexOf('bFullMutex') > -1) {
                            rst.splice(i, 1);
                        };
                    };


                    const tog = bz2.length - 2,
                       phantram = 100 * fz / tog;
                    //
                    pgre[0].attr('taiing', 'Decompressing ... ' + parseInt(phantram) + "%");
                    pgre[1].css('width', phantram + "%");
                    //
                    //debugger;
                    //
                    for (var k = 0; k < rst.length; k++) {
                        //
                        //
                        const fin = rst[k].split('|');
                        //
                        for (var n = 0; n < hedU.length; n++) {
                            //
                            if (hedU[n][0] == fin[0]) {//prevent [0] = "openDatabase(115038)test:isThreadsafe:0, bCoreMutex:0,bFullMutex:0"
                                //
                                fin[0] = "fin_" + String.fromCharCode(30) + "_tmpl";//change user_pin -> signal mark start finger template

                                ////signal trap build more td
                                const fukg = hedU[n].slice(0, endIndex);//clone
                                //
                                //
                                fukg[3] = hex2s(fukg[3]);
                                //
                                fukg.unshift(-9999);
                                //
                                //luu giu dau vet lai cho viec add user not finger template
                                if (_usrIDX.indexOf(n) == -1) {
                                    //
                                    _usrIDX.push(n);
                                    //
                                    if (fukg[4].trim().length > 0 /*ten*/ || fukg[5].trim().length > 0 /*pw*/ || fukg[7].trim().length > 0 /*card*/) {
                                        //
                                        fukg[1] = "-" + fukg[1];//them vao dau tru, de phan biet khi tach ra
                                        fukg[9] = "-1";//clear finger print count
                                        fukg[10] = "-1";//clear face count
                                        //
                                        //phien phuc
                                        //clone vao lstT
                                        lstT.push(fukg.slice(0));
                                        //
                                        //
                                        fukg[endIndex + 1] = make_SEARCH_F(fukg);
                                        //
                                        const t$r0 = fukg.slice(0);     //clone vao DUMA
                                        t$r0.push(DUMA.length + 1);//active
                                        DUMA.push(t$r0);
                                        //
                                        //phuc hoi lai.
                                        fukg[1] =  hedU[n][0];
                                        //
                                    };
                                };
                                //
                                fukg[9] = fin[1];//finger number
                                fukg[10] = "-1";//clear face num
                                //
                                //make search field
                                fukg[endIndex + 1] = make_SEARCH_F(fukg);
                                //
                                //
                                fukg[3] = "0";//clear privilge admin 
                                fukg[4] = "";//clear ten o finger print
                                fukg[5] = "";
                                fukg[7] = "";
                                //
                                //
                                const t$r1 = fukg.slice(0);     //clone vao DUMA
                                t$r1.push(DUMA.length + 1);//active
                                DUMA.push(t$r1);
                                //
                                //
                                //DUMA.push("" //ten may cham cong, prevent search miss
                                //            + String.fromCharCode(4) + fukg.join(String.fromCharCode(4)));
                                //
                                //
                                //fukg.unshift(-9999);
                                fukg.splice(-1);//bo search item
                                lstT.push(fukg.concat(fin));
                                //
                            };
                            //
                        };
                        //
                    };
                    //
                    //
                    fz += 1;
                    window.requestAnimationFrame(deBZ2);
                    //
                };

                deBZ2()
                //
                //
                return defer.promise();
                //
            };


            opts.tmplVER = hisVER['1.0.0.0'];

            const desk_mobi = {
                neo_head: function (el, mod) {

                    if (el) desk_mobi.__neo_head = el;

                    if (!desk_mobi.__neo_head) return;

                    desk_mobi.__neo_head.find('[nut_lenh] > .btn').each(function (j, x) {
                        //debugger;
                        //if (mod == 0) {//desktop
                        //    if (j == 0) {
                        //        $(x).removeClass('dropdown-toggle');//hide dropdown icon after button
                        //    } else {
                        //        $(x).removeClass('d-none');
                        //    };
                        //} else {
                        if (j == 0) {
                            $(x).addClass('dropdown-toggle');//hide dropdown icon after button
                        } else {
                            $(x).addClass('d-none');//mobi da co nut o cho show/hide list
                        };
                        //};
                    });
                }
                ,

                btnlst: function (el, mod) {

                    if (el) desk_mobi.__btnlst = el;

                    if (!desk_mobi.__btnlst) return;

                    desk_mobi.__btnlst.removeClass('d-flex d-none').addClass(mod == 1 ? 'd-flex' : 'd-none');

                    if (mod == 0) {
                        //desktop
                        if (desk_mobi.__neo_head) {
                            //).hasClass('d-none') ? 'add' : 'remove' + '
                            desk_mobi.__neo_head.parent()['removeClass']('d-none');
                            //debugger;
                            const show_lsta = desk_mobi.__btnlst.find('[show_lsta]');
                            if (!show_lsta.hasClass('d-none')) {
                                show_lsta.trigger('click');
                            };
                        };
                    } else {
                        // debugger;
                        const hide_lsta = desk_mobi.__btnlst.find('[hide_lsta]');
                        if (hide_lsta.hasClass('d-none')) {
                            if (desk_mobi.__neo_head) {
                                desk_mobi.__neo_head.parent()['addClass']('d-none');
                            };
                        };
                    };

                    return desk_mobi.__btnlst;
                }

            }

            function SL_NGUOIDUNG(RMV, del_usr) {
                //
                const multiDEV = [], multiCNT = [];
                //
                //debugger;
                //if (del_usr.length > 0) {
                //    if (!del_usr[0]) {
                //        debugger;
                //        return;
                //    };
                //};
                //
                var _usr = 1,
                    rst = sum_FP_FA_CA_PW(del_usr[0]),
                    //
                    _fp = rst[1],// parseInt(del_usr[0][9]),
                    _fa = rst[2],//parseInt(del_usr[0][10]),
                    _ca = rst[3],//del_usr[0][7].length > 0 ? 1 : 0,
                    _pw = rst[4],//del_usr[0][5].length > 0 ? 1 : 0,
                    _adm = rst[5];//del_usr[0][3] == '14' ? 1 : 0;
                //
                //debugger;
                //
                if (del_usr.length == 0) {
                    //
                    //********** ko lam gi, cung ko duoc bo dieu kien nay !!!!
                    //
                } else if (RMV.indexOf(del_usr[0][0]) > -1) {
                    _usr = 0;
                    _fa = 0;
                    _fp = 0;
                    _ca = 0;
                    _pw = 0;
                    _adm = 0;
                } else {
                    multiDEV.push(del_usr[0][0]);
                    multiCNT.push([_usr, _fp, _fa, _ca, _pw, _adm]);
                };
                //
                //
                //debugger;
                for (var y = 0; y < DA[0].length; y++) {
                    const atY = DA[0][y][0];
                    //
                    if (RMV.indexOf(atY) == -1 && multiDEV.indexOf(atY) == -1) {
                        multiDEV.push(DA[0][y][0]);
                        multiCNT.push([0, 0, 0, 0, 0, 0]);
                    };
                    //
                };
                //
                //
                for (var w = 1; w < del_usr.length; w++) {
                    //
                    const atW = del_usr[w][0],
                        mIDX = multiDEV.indexOf(atW);
                    //
                    if (RMV.indexOf(atW) > -1) {
                        continue;
                    };
                    //
                    //
                    //debugger;
                    //
                    _usr = 1;
                    rst = sum_FP_FA_CA_PW(del_usr[w]);
                    //
                    //
                    _fp = rst[1];//parseInt(del_usr[w][9]);
                    _fa = rst[2];// parseInt(del_usr[w][10])
                    _ca = rst[3];//del_usr[w][7].length > 0 ? 1 : 0;
                    _pw = rst[4];//del_usr[w][5].length > 0 ? 1 : 0;
                    _adm = rst[5];//del_usr[w][3] == '14' ? 1 : 0;
                    //
                    if (mIDX == -1) {
                        multiDEV.push(atW);
                        multiCNT.push([_usr, _fp, _fa, _ca, _pw, _adm]);
                    } else {
                        multiCNT[mIDX][0] += _usr;
                        multiCNT[mIDX][1] += _fp;
                        multiCNT[mIDX][2] += _fa;
                        multiCNT[mIDX][3] += _ca;
                        multiCNT[mIDX][4] += _pw;
                        multiCNT[mIDX][5] += _adm;
                    };
                };
                //
                //
                _usr = 0;
                _fa = 0;
                _fp = 0;
                _ca = 0;
                _pw = 0;
                _adm = 0;
                //
                for (var w = 0; w < multiCNT.length; w++) {
                    _usr += multiCNT[w][0];
                    _fp += multiCNT[w][1];
                    _fa += multiCNT[w][2];
                    _ca += multiCNT[w][3];
                    _pw += multiCNT[w][4];
                    _adm += multiCNT[w][5];
                };
                //
                //debugger;
                //
                return [multiDEV, multiCNT, _pw, _usr, _fp, _fa, _ca, _adm];
                //
            };

            const clickEvent = ((document.ontouchstart !== null) ? 'click' : 'touchstart');

            const __mnu = {

                lst_only_more: function (e) {
                    //
                    debugger;
                    //
                }

                ,

                __opeFILTER: {
                    '0': function (acno) {
                        //debugger;
                        return __mnu.__nv[1].indexOf(acno) > -1;
                    }
                    ,
                    '1': function (acno) {
                        //debugger;
                        return __mnu.__nv[1].indexOf(acno) == -1;
                    }
                    ,
                    'v1': function () {
                        debugger;
                        if (!__mnu.__nv[2]) {//valid section
                            return __mnu.__opeFILTER.rawEM.map(function (m) {
                                return m.acno;
                            });
                        } else {
                            const SC = __mnu.__nv[2], re = [];
                            __mnu.__opeFILTER.rawEM.map(function (m) {
                                if (SC.indexOf(m.secid) > -1) {
                                    re.push(m.acno);
                                };
                            });
                            return re;
                        };
                    }
                }

                ,

                filter_usr_hsnv: function (clkE, mobi_mnu, lnkEL) {
                    //
                    //debugger;
                    srclocked(true);
                    //
                    const mnu = $(opts.MNU.data('bs.popover').element),

                        neo_head = mobi_mnu ? clkE : mnu.closest('.neo_head'),//từ cho nay suy ra table.

                        row_tb1 = neo_head.next(),//.find('.row_tb1').parent().parent(),

                        homC = 'fa-square-o fa-h-square fa-check-square-o',
                        int_chk = function (ch$) {
                            const ul = ch$.closest('ul'),
                                        chA = ul.find('[chk_sel]'),
                                        chU = ul.find('[chk_sel].fa-square-o');


                            ul.prev().find('i[chk_sel]').removeClass(homC)
                            .addClass(chU.length == 0 ? 'fa-check-square-o' : (chA.length == chU.length ? 'fa-square-o' : 'fa-h-square'));
                            //
                        }
                        ,

                        TEE_SEL = function (tee) {

                            tee.on(clickEvent, 'i[chk_sel]', function (e) {
                                //
                                const ch$ = $(e.currentTarget);
                                //
                                if (ch$.attr('chk_sel') == 'home') {
                                    //
                                    const ul = ch$.parent().next(),
                                    chA = ul.find('[chk_sel]');
                                    //
                                    //
                                    if (ch$.hasClass('fa-check-square-o')) {
                                        ch$.removeClass(homC).addClass('fa-square-o');
                                        chA.addClass('fa-square-o').removeClass('fa-check-square-o');
                                    } else {
                                        ch$.removeClass(homC).addClass('fa-check-square-o');
                                        chA.removeClass('fa-square-o').addClass('fa-check-square-o');
                                    };
                                    //
                                    ch$.trigger('usr_not_match_hsnv');
                                    //
                                } else {
                                    //
                                    ch$.toggleClass('fa-square-o fa-check-square-o');
                                    //
                                    int_chk(ch$);
                                    //
                                    ch$.trigger('usr_not_match_hsnv');
                                };
                            });

                        }
                        ,
                        clean$ = function (e$l) {
                            e$l.find('*').off(/*all event*/).unbind().removeData();
                            e$l.empty();
                            e$l.off(/*all event*/).unbind().removeData();
                            e$l.remove();
                        }
                        ,

                        usr_not_match_hsnv = function (cothamso) {
                            //
                            if (cothamso) {
                                const lSEC = usr_not_match_hsnv.__treSEC && usr_not_match_hsnv.__treSEC.find('li[secid]') || null;
                                __mnu.__nv[2] = null;
                                //
                                //
                                if (!lSEC) {
                                    //ko can lam gi ca.
                                    //
                                } else if (lSEC.length == 0) {
                                    if (usr_not_match_hsnv.__treSEC.find('i[chk_sel="home"]').hasClass('fa-check-square-o')) {
                                        __mnu.__nv[2] = [];//full
                                    };
                                } else {
                                    __mnu.__nv[2] = lSEC.find('i.fa-check-square-o').closest('li').map(function (j, m) {
                                        return parseInt(m.getAttribute('secid'));
                                    }).toArray();
                                };
                                //debugger;
                                __mnu.__nv[1] = __mnu.__opeFILTER.v1();//cache nhan vien hien tai trong hsnv
                                __mnu.__opeFILTER.__emp_cnt.text(__mnu.__nv[1].length);
                            };
                            //
                            //
                            neo_head.prev()//filter_adv_body
                            .find('input[type="checkbox"][fi="adm"]').trigger('change', ['1'/*force*/]);
                            //
                        }
                        ,

                        btn_add_sec = function (v1, bel) {
                            //
                            const oldT = bel.closest('.row'),

                                treSEC = function () {

                                    const rawT = $(__mnu._raw_tree && __mnu._raw_tree || t$p.find('.tree_cakip').remove().clone().removeClass('d-none')[0].outerHTML),
                                            treB = rawT.find('ul[sel_lst]'),
                                            oldSEC = [];

                                    if (oldT.prev().hasClass('tree_cakip')) {
                                        oldT.prev().find('li[secid]').map(function (x, it) {
                                            if ($(it).find('i.fa-check-square-o').length > 0) {
                                                oldSEC.push(parseInt(it.getAttribute('secid')));
                                            };
                                        });
                                    };
                                    //
                                    if (!__mnu._raw_tree) __mnu._raw_tree = rawT[0].outerHTML;
                                    //
                                    const treN = treB.find('li').remove().clone(); //ko duoc doi len tren !
                                    //
                                    //debugger;
                                    if (v1 && v1.secs) {
                                        for (var w = 0; w < v1.secs.length; w++) {
                                            const eachSEC = treN.clone().attr('secid', v1.secs[w].id),
                                                dis = eachSEC.find('spanx').html(v1.secs[w].dis);

                                            if (oldSEC.indexOf(v1.secs[w].id) > -1) {
                                                dis.prev().toggleClass('fa-square-o fa-check-square-o');
                                            };

                                            treB.append(eachSEC[0].outerHTML);
                                        };
                                    };
                                    //

                                    if (oldSEC.length > 0) {//update lai head check
                                        int_chk(treB.find('li:first-child'));
                                    };
                                    //
                                    //debugger;
                                    if (bel.hasClass('bg-danger')) {
                                        treB.prev().toggleClass('bg-primary bg-danger');
                                    };
                                    //
                                    return rawT[0].outerHTML;
                                    //
                                };
                            //
                            devDlg(1, ''//_La$N('js_001_27', aLAN) + '.. -> ' //+ $(e.currentTarget).find('[data-lang]').text() + '?'

                            + treSEC()

                            //+ sync_map.find('[usr_hsnv]').clone().removeClass('d-none').addClass('mx-0').removeAttr('style')[0].outerHTML

                            , null, {
                                cb: function (a) {
                                    //
                                    const bdy = a.find('.modal-dialog').removeClass('modal-sm').addClass('pu_fuk_mobi')
                                       .find('.modal-body').addClass('pt-0');
                                    //
                                    TEE_SEL(bdy.find('.tree_cakip'));
                                    //
                                    srclocked(false);
                                    //debugger;
                                    //
                                }
                                , isBS: "1"//buoc dung bootstrap
                            }).show().done(function (rst, tree) {
                                //
                                if (rst !== 1) return;
                                //
                                if (oldT.prev().hasClass('tree_cakip')) {
                                    clean$(oldT.prev());
                                };
                                //
                                const ftee = tree.clone(),
                                    duR = ftee.find('[sel_lst] li i.fa-square-o').closest('li').remove();
                                //


                                if (duR.length > 0) {
                                    int_chk(ftee.find('li:first-child'));
                                };
                                //
                                //debugger;
                                //
                                var kqT = "cothamso";
                                if (!ftee.find('i[chk_sel="home"]').hasClass('fa-square-o')) {
                                    kqT = $(ftee[0].outerHTML);
                                    if (bel.hasClass('bg-danger')) {
                                        kqT.addClass('usr_not_match_hsnv');
                                    };
                                    //
                                    TEE_SEL(kqT.insertBefore(oldT));
                                    //
                                    kqT.off('usr_not_match_hsnv').on('usr_not_match_hsnv', usr_not_match_hsnv);
                                    //
                                    usr_not_match_hsnv.__treSEC = kqT;
                                    //
                                } else {
                                    __mnu.__nv[2] = null;//reset
                                };
                                //
                                usr_not_match_hsnv(kqT);//lan dau tien.
                                //
                            });
                        };
                    //
                    //
                    var t$p = row_tb1;//.prev();

                    if (!t$p.hasClass('filter_usr_in_hsnv')) {

                        t$p = opts.pas[2].find('[tabp_filter_usr_hsnv]').parent().clone().removeClass('d-none').hide();

                        t$p.insertBefore(row_tb1).slideDown(function () {
                            //
                            //sum circle user - emp
                            __mnu.lod_nv({ "qry": ["id", "acno", "secid", "offdate"] }).done(function (v1) {
                                //
                                __mnu.__opeFILTER.rawEM = v1;
                                __mnu.__nv = ['0']
                                //debugger;
                                __mnu.__nv.push(__mnu.__opeFILTER.v1());//cache nhan vien hien tai trong hsnv
                                __mnu.__opeFILTER.__emp_cnt.text(__mnu.__nv[1].length);
                                //
                                usr_not_match_hsnv();
                                //
                            });
                            //
                            lnkEL.closest('li').addClass('d-none')//hide menu
                            //
                        }).find('a.user-profile__close').off('click').on('click', function () {

                            srclocked(true);

                            $(this).hide();
                            //t$p.css('opacity', 0);

                            t$p.slideUp(function () {
                                //
                                //console.log('t$p: ', new Date());
                                //
                                clean$(t$p);
                                //
                                delete __mnu.__nv;//clean nhan vien hien tai trong hsnv
                                usr_not_match_hsnv();
                                //
                                lnkEL.closest('li').removeClass('d-none')//show menu
                            });
                        });
                        //
                        //count emp in hsnv
                        __mnu.__opeFILTER.__emp_cnt = t$p.find('[emp_cnt]').text(0);
                        //
                        t$p.on('click', '[lenh]', function (e) {

                            const lenh = e.currentTarget.getAttribute('lenh');
                            if (lenh == "btn_add_sec") {
                                //
                                srclocked(true);
                                //
                                w0w['_gsC'](srcpf$ + '/media/css/JS_JS_nhapxuat.css' + src$id, 'css', function () { }, 'JS_JS_nhapxuat.css');
                                //
                                opts.$mainO.svrDAT({

                                    uri: '/api/headermaster', "act": 'GET', 'qry': 'jdat'//dung chung voi employees

                                }).done(function (v1) {
                                    //
                                    btn_add_sec(v1, $(e.currentTarget));
                                    srclocked(false);
                                    //
                                });
                            };
                        })
                        .on('show.bs.tab', function (e) {
                            //debugger;
                            const me = $(e.target),
                                ul = me.closest('ul');
                            //
                            ul.find('i').addClass('d-none');
                            const tp = me.next().removeClass('d-none'),
                                dix = ul.next().toggleClass('text-primary text-danger').find('>div');
                            //
                            if (dix.eq(1).hasClass('tree_cakip')) {
                                dix.eq(1)[(tp.hasClass('text-danger') ? 'add' : 'remove') + 'Class']('usr_not_match_hsnv');
                                dix.eq(1).find('[chk_sel="home"]').parent().toggleClass('bg-primary bg-danger');
                            };
                            //
                            ul.next().find('[lenh="btn_add_sec"]').toggleClass('bg-primary bg-danger');
                            //
                            //debugger;
                            __mnu.__nv[0] = me.parent().index();
                            //
                            usr_not_match_hsnv();
                            //
                        });
                        //
                    } else {
                        srclocked(false);
                    };
                    //
                    //alert('here');
                    //
                }
                ,

                thietbi_restore_S1: function (tmpl, __dumeMCC, dev) {
                    //
                    //debugger;
                    //
                    const bz2 = tmpl.split(String.fromCharCode(4)),

                        FPver = JSON.parse(atob(bz2[0])),

                        hedU = JSON.parse(atob(bz2[bz2.length - 1])),

                        lstT = [];

                    //
                    opts.__UPHIS = [];//luu giu device upload
                    //
                    //debugger
                    //
                    const BDY = opts.pas[2].find('.snippets.bootdeys').clone(),

                        pageTIT = BDY.find('.page-title'),

                            frm_chung = BDY.addClass('d-flex flex-column h-100').find('.frm_chung'),

                            selU = frm_chung.next().next().attr('gmnu', "res_sel_emp").attr('no-title', ""),

                            col = frm_chung.find('>div'),

                            col3 = col.eq(0).html(opts.pas[2].find('[chitiet="thietbi_cmd_bk_opt"]').html()),//.attr('class', 'col-md-8 mx-auto'),

                            col9 = col.eq(1),//.addClass('d-none'),

                            popc = opts.pas[1].find('.modal-content'),

                            frm_opt = $('<div class="col-12 px-0 chat--mobile"></div>')
                            .insertAfter(opts.impSCR)

                            .append([BDY, selU]),//bao gom nut select emp


                            cntSEL_U = [],

                           _sum = [0, 0, 0, 0, 0, 0];


                    //
                    //
                    cntSEL_U.__isTabU = '2';//chua co...
                    //
                    //
                    for (var h = 0; h < hedU.length; h++) {
                        const _S = sum_FP_FA_CA_PW([0].concat(hedU[h]));
                        for (var w = 1; w < _sum.length; w++) {
                            _sum[w] += _S[w];
                        };
                    };
                    //
                    //debugger;
                    _sum[0] = hedU.length;
                    //
                    //
                    //
                    const __TB = col9.find('.row_tb1 .mcc_usr_lst')

                        ,

                        __render = function (tail,pbar,tabEvnt) {
                            //
                            if (!window['ArchUtils']) {
                                //debugger;
                                const wokJS = gloEVTs.giaidoan2.fnXX.getOPT('wokJS');
                                apisvr.a$.scod(wokJS[1], 'ArchUtils');
                            };
                            //
                            //
                            __mnu.up_sel_em_2_dev = function () {
                                //
                                //debugger;
                                //
                                if (cntSEL_D.length == 0) {
                                    //
                                    srclocked(true);
                                    //
                                    devDlg(1, _La$N('js_001_27', aLAN) + '.. -> ban chua chon thiet bi can nap', null, {
                                        cb: function (a) {
                                            //
                                            srclocked(false);
                                            //
                                        }
                                    }).show().done(function (rst) {
                                        //debugger;
                                        if (rst == 1) {
                                            //srclocked(true);
                                            //
                                            //__mnu.get_fp_tmpl_job(usrINPUT && usrINPUT.val(), isBS, lstT, hedU);
                                            //
                                            TabPG.find('a[href="#tabp-thietbi_cmd_restore_1"]').tab('show');//.trigger('click');

                                            //setTimeout(function () {
                                            //    TabPG.find('#tabp-thietbi_cmd_restore_1').tab('show');
                                            //}, 1);
                                            //
                                        };
                                        //
                                    });
                                } else {
                                    //
                                    Upload_FUK.trigger("click", ["sel_emp_upload"]);
                                    //
                                };
                            };
                            //
                            //
                            selU.off('click').on('click', function (e) {

                                console.log(new Date().getTime(), 'click');

                                //click vao nut sel emp show popup menu

                                //__mnu.get_fp_tmpl.__dat = [cntSEL_U,
                                //    [
                                //        [].slice.apply(dev.attr('for').split('_'), [1, 3]) //lay id, va finger print version
                                //    ]
                                //];//list emp bk
                                //

                                //debugger;

                                const th$a = this;
                                //setTimeout(function () {
                                __mnu.act_menu(th$a);
                                //});
                                //
                            });
                            //
                            col9.removeClass('d-none');
                            //
                            const h3_ori = col3.find('h3').addClass('my-2 pl-2');
                            for (var w = 0; w < 100; w++) {
                                const fukDUG = h3_ori.next();
                                if (fukDUG.hasClass('list-group')) {
                                    break;
                                };
                                fukDUG.remove();
                            };
                            //
                            //
                            const chitiet_badge = noidung_file.clone().insertAfter(h3_ori).find('.badge');
                            //
                            //
                            //
                            const __maxRows = __TB.prev().appendTo(col3.find('>div:first-child')).off('render_tb').on('render_tb', function (e, daR, fuck_search) {
                                //
                                //debugger;
                                if (daR.__uniqAC) etotal.html(daR.__uniqAC.length);
                                //
                                __maxRows[(daR.length > 0 ? 'slideDown' : 'slideUp')]();//[(daR.length > 0 ? 'slideDown' : 'slideUp') + 'Class']('d-none');
                                //
                                col9.removeClass('has_usr no_usr search_no_usr').addClass((daR.length > 0 ? 'has_usr' :

                                        fuck_search == '1' ? 'search_no_usr' : 'no_usr'

                                    ));
                                //
                                //thong ke panel
                                sum_THONGKE(daR.__sum_FP_FA_CA_PW, chitiet_badge);
                                //
                                //
                            }).off('page_changed').on('page_changed', function (e, daR, maxR) {
                                //debugger;
                                pgcnt.find('>span:last-child').html(daR.pagenum);
                                pgcnt.removeClass('d-flex d-none')[daR.pagenum > 0 ? 'slideDown' : 'slideUp'](function () {
                                    pgcnt.addClass(daR.pagenum > 0 ? 'd-flex' : 'd-none');
                                });
                            })

                            ,

                            ori_etotal = __maxRows.find('[elui="etotal"]'),

                            etotal = ori_etotal.find('>span:last-child'),

                            pgcnt = __maxRows.find('[elui="pgcnt"]'),
                            pgsz = __maxRows.find('[elui="pgsz"]').removeClass('d-flex d-none').addClass('d-flex');
                            //
                            //
                            //
                            ori_etotal.attr('class', 'd-flex');
                            ori_etotal.children().eq(0).addClass('text-truncate');
                            ori_etotal.appendTo(h3_ori.empty());
                            //
                            //
                            shared_lstT(bz2, hedU, lstT, JSON.parse(FPver[FPver.length - 1])[3], [tail, pbar]).done(function () {
                                //
                                //debugger;
                                //const fuk = FPver;
                                //
                                //
                                const DA_1 = paging(lstT.__DUMA,

                                       __TB.off('change').on('change', 'input[type=checkbox]', function (e) {
                                           //
                                           //debugger;
                                           const chk = $(this),
                                                usrid = chk.attr('idx').trim(),//lay idx vi ID + User_Pin + fingerid
                                                isHas = cntSEL_U.indexOf(usrid);


                                           if (chk.is(':checked')) {
                                               if (isHas == -1) cntSEL_U.push(usrid);
                                           } else {
                                               if (isHas > -1) cntSEL_U.splice(isHas, 1);
                                           };
                                           //
                                           selU[(cntSEL_U.length > 0 ? 'remove' : 'add') + 'Class']('d-none');
                                           //
                                           if (cntSEL_U.length > 0) {
                                               selU.removeClass('cart_shake').attr('data-totalemps', cntSEL_U.length);
                                               setTimeout(function () {
                                                   selU.addClass('cart_shake');
                                               }, 100);
                                           };
                                           //
                                       })
                                       ,
                                       __maxRows.find('[pagesz="maxRows"]')
                                       ,
                                       cntSEL_U
                                )
                                ,
                                ori_adv = ['0'//ko co tren may cham cong / co tren file upload
                                    , '1'//co tren may cham cong / ko co tren file upload
                                    , '2'//co tren may cham cong + co tren file upload
                                    , 'fp'//finger
                                    , 'fa'//face
                                    , 'ca_pw'//card /password
                                    , 'adm'// quyen admin
                                ]
                                ,

                                TB_ROW_SEL = function () {
                                    //
                                    selU[(cntSEL_U.length > 0 ? 'remove' : 'add') + 'Class']('d-none');
                                    //
                                    if (cntSEL_U.length > 0) {
                                        //
                                        selU.removeClass('cart_shake').attr('data-totalemps', cntSEL_U.length);
                                        //
                                        setTimeout(function () {
                                            selU.addClass('cart_shake');
                                        }, 100);
                                        //
                                    };
                                    //
                                    chk_SEL_A.prop("checked", cntSEL_U.length > 0);
                                    //
                                    chk_SEL_A.parent()[(DA_1.length != cntSEL_U.length ? 'add' : 'remove') + 'Class']('tri-state');
                                    //
                                };
                                //
                                //delete de khi thuc hien upload serial lightweight
                                delete lstT.__DUMA;
                                //
                                //debugger;
                                DA_1.__isADV = 2;//orgini
                                //
                                const neo_head = col9.find('.neo_head').off('STICKY_HED').on('STICKY_HED', function ($e, hed) {
                                    //debugger;
                                    hed.push(frm_chung.closest('.tab-content'));
                                    hed.push(130);
                                })

                               ,

                               chk_SEL_A = new tb_head_neo(neo_head.off('fuck_search').on('fuck_search', function (ev, m$e, chkFilter, force) {

                                   //debugger;

                                   if (chkFilter) {
                                       //
                                       apply_adv_filter(DA_1, ori_adv, chkFilter, -1/*index 9 >-1 */);
                                       //
                                   };
                                   //
                                   //
                                   const str = m$e.val().trim().toLowerCase(),
                                       pagesz = __maxRows.find('[pagesz="maxRows"]'),
                                   DA_1_filter = (str == '' && DA_1.__isADV == 2 && !force) ? DA_1 : filter_DA1(DA_1, str);
                                   //
                                   //
                                   chk_SEL_A.__sumINF = [DA_1_filter.__sum_FP_FA_CA_PW];
                                   //
                                   paging(

                                   DA_1_filter

                                       , __TB
                                       , pagesz
                                       , cntSEL_U, '1');


                                   srclocked(false);


                               }), 'upfp', ori_adv)

                               .off('selrow').on('selrow', MNU_SEL_ROW.bind([DA_1, __TB, cntSEL_U]))

                               .off('selrow_cb').on('selrow_cb', TB_ROW_SEL)

                               .off('req_DB').on('req_DB', function (je, cmd, a, b, c) {
                                   //
                                   debugger;
                                   //lay db hoac some in for of db
                                   if (cmd == 'sum_FP_FA_CA_PW') {
                                       a.push(

                                           chk_SEL_A.__sumINF && chk_SEL_A.__sumINF[0] || DA_1.__sum_FP_FA_CA_PW

                                       );
                                   };
                                   //
                               });
                                //
                                tail.removeClass('taii').removeAttr('taiing').next().removeClass().empty();
                                //
                                //release tab and manual switch tab page.
                                delete tabEvnt.isDefaultPrevented;
                                TabPG.find('a[href="#tabp-thietbi_cmd_restore_2"]').tab('show');//.trigger('click');
                                //
                                srclocked(false);
                                //
                            });
                        }
                        ,

                    TabPG = opts.pas[2].find('[chitiet="thietbi_cmd_restore"]').clone().insertAfter(pageTIT)

                         .off('showing.bs.tab').on('show.bs.tab', function (e) {

                             //debugger;

                             if (!cntSEL_U.__render) {
                                 //
                                 cntSEL_U.__render = 1;
                                 //
                                 //debugger;
                                 //array lstT co index phan cach ...  fin[0] = "fin_" + String.fromCharCode(30) + "_tmpl"
                                 const pa = $(e.target);
                                 //
                                 //
                                 if (pa.attr("href") == '#tabp-thietbi_cmd_restore_2') {
                                     //
                                     //
                                     //chan ko cho switch tab, waite decompress bz2
                                     e.isDefaultPrevented = function () {
                                         return true;
                                     };
                                     //
                                     //
                                     cntSEL_U.__isTabU = '3';//da load.
                                     //
                                     //
                                     helloguy.css('display', '');//srclocked(true);
                                     //
                                     const tail= helloguy.find('.dx-loadindicator-wrapper').addClass('taii').attr('taiing', 'Loading ...'),
                                         pbar=tail.next()
                                         .addClass('progress_exp_excel').html(opts.pas[2].find('section[fuck_tmpl]').html()).find('.progress-bar');

                                     setTimeout(function () {
                                         //
                                         __render(tail, pbar, e);
                                         //
                                         //for (var w = 0; w < lstT.length; w++) {
                                         //    const tr = $(paging.__showTR(w, lstT[w])).appendTo(__TB);
                                         //};
                                     },100);
                                 };
                             };
                         })

                        ,

                        pag1 = TabPG.find('#tabp-thietbi_cmd_restore_1')
                        ,

                        noidung_file = pag1.find('[noidung_file]')
                        ,
                        noidung_badge = noidung_file.find('.badge')
                        ,
                        totalE = noidung_file.prev().find('.badge');


                    //
                    //
                    sum_THONGKE(_sum, noidung_badge);
                    totalE.html(_sum[0]);
                    //
                    //
                    //
                    col9.find('.row_tb2').remove();
                    //
                    //
                    //
                    pag1.next().append([frm_chung]);
                    //
                    //frm_chung.appendTo(pag1);





                    //col9.addClass('order-1 order-md-0')//mobile screen place on bottom
                    // .insertBefore(col3);
                    //sau do remove row_tb1
                    //.find('.row_tb1').remove();
                    //remove luon group button mau xanh
                    //col9.children().first().remove();

                    var cntSEL_D = [];

                    const lstDEV = pag1.find('.row_tb2 tbody').empty()

                        .off('change').on('change', 'input[type=checkbox]', function (e) {
                            //
                            debugger;

                            const chk = $(this),
                                 usrid = chk.attr('idx').trim(),
                                 isHas = cntSEL_D.indexOf(usrid);


                            if (chk.is(':checked')) {
                                if (isHas == -1) cntSEL_D.push(usrid);
                            } else {
                                if (isHas > -1) cntSEL_D.splice(isHas, 1);
                            };
                            //
                            //
                            const cls = cntSEL_D.length != (!__dumeMCC ? DA[0] : __dumeMCC).length ? 'add' : 'remove',

                                sCK = cntSEL_D.length > 0;
                            //
                            Upload_FUK[(sCK ? 'remove' : 'add') + 'Class']('d-none');
                            sel_dev.find('>span:last-child')[(sCK ? 'add' : 'remove') + 'Class']('d-none');
                            //
                            //
                            sel_dev.find('input').prop("checked", sCK);
                            //
                            sel_dev[cls + 'Class']('tri-state');
                            //
                        })
                    ,

                    Upload_FUK = lstDEV.closest('.panel-body').find('.Upload_FUK') //nut upload acton.
                    .off('click').on('click', function (b, selArgs) {

                        //debugger;

                        __mnu.get_fp_tmpl.__dat = [null, cntSEL_D.map(function (it, ix) {
                            return [it
                                , FPverTB//FP version, not use this case???
                                , "up_usrtmpl" //flag upload data to host in device_step2.html
                            ];
                        })];// [devid]];
                        //
                        //debugger;
                        //
                        __mnu.get_fp_tmpl(b, null, selArgs ? [cntSEL_U, lstT] : tmpl, hedU, FPver[FPver.length - 1]);//backup all template
                        //
                        //
                    })
                    ,
                    sel_dev = Upload_FUK.prev()//nut select all device
                    .off('change').on('change', 'input[type="checkbox"]', function () {

                        if (this.id == 'restore_all_device') {
                            //
                            const sCK = $(this).is(":checked");
                            //
                            sel_dev.removeClass('tri-state');
                            //
                            lstDEV.find('input[type="checkbox"]:not(#restore_all_device)').prop("checked", sCK);
                            //
                            Upload_FUK[(sCK ? 'remove' : 'add') + 'Class']('d-none');
                            sel_dev.find('>span:last-child')[(sCK ? 'add' : 'remove') + 'Class']('d-none');
                            //
                            //
                            cntSEL_D = sCK ? DA[0].filter(function (dev) {
                                //
                                //debugger;
                                //
                                return FPverTB === dev[6] && (!__dumeMCC || __dumeMCC.indexOf(dev[0].toString()) > -1)//gioi han theo may cham cong
                                //chi add cac thiet bi co cung FP verion
                                //
                            }).map(function (it, idx) {
                                return it[0].toString();
                            }, []) : [];
                            //
                        };
                    });
                    //
                    //
                    pag1.find('.shownhanvien').off('click').on('click', function () {
                        TabPG.find('a[href="#tabp-thietbi_cmd_restore_2"]').tab('show');//.trigger('click');
                    });
                    //
                    const FPverTB = JSON.parse(FPver[FPver.length - 1])[1];
                    //
                    //debugger;
                    //
                    for (var z = 0; z < DA[0].length; z++) {
                        //
                        const dev = DA[0][z],
                            TR = '<tr>' +
                            '<td><input idx="' + dev[0] + '" class="dume_invert" type="checkbox"></td>' +
                            '<td>' + dev[0] + '</td>' +
                            '<td>' + dev[1] + '</td>' +
                            '<td>' + dev[2] + '</td>' +
                            '<td>' + dev[6] + '</td</tr>';
                        //
                        if (FPverTB === dev[6] &&
                            (!__dumeMCC || __dumeMCC.indexOf(dev[0].toString()) > -1)//gioi han theo may cham cong
                            ) {//chi add cac thiet bi co cung FP verion
                            lstDEV.append(TR);
                        };
                        //
                    };
                    //
                    const totalDEV = lstDEV.children().length
                    sel_dev.find('b').html(totalDEV);
                    //
                    //debugger;
                    var is2_tg9 = opts.impSCR.hasClass('chat--show'),
                        exit_src = function () {

                            SCR_effect(popc,

                               is2_tg9 ? opts.impSCR : opts.impSCR.prev()

                                , frm_opt, ['addClass', 'chat--show'], ['removeClass', 'chat--show'],
                                function () {
                                    frm_opt.find('*').off(/*all event*/).unbind().removeData();
                                    frm_opt.empty();
                                    frm_opt.off(/*all event*/).unbind().removeData();
                                    frm_opt.remove();
                                }
                                ,

                                { 'height': 'auto', 'transform': 'rotateX(50deg) scale(0.7)', 'overflow': 'hidden' });
                        };

                    $('<a href="#" class="user-profile__close d-flex dume_invert" style="left: 20px;justify-content:center;align-items: center;border-radius: 50%;padding: 20px;background-color: rgba(191, 191, 191, 0.3);"><i class="ti-close"></i></a>')

                        .insertBefore(
                        //
                        pageTIT.removeClass('d-none').addClass("p-2").find('h3').addClass('my-2 pl-2').html(dev.html())
                        //
                    ).off('click').on('click', function () {
                        //
                        if (opts.__UPHIS.length > 0) {
                            //
                            //debugger;
                            cntSEL_U.length = 0;//clear
                            selU.addClass('d-none');//hide de bottom ko co dau vet.
                            //
                            //
                            //du me gio di download fp lai ...
                            //debugger;
                            opts.impSCR.removeClass('chat--show').prev().removeClass('d-none');
                            is2_tg9 = false;

                            const devTAB = TabPG.find('a[href="#tabp-thietbi_cmd_restore_1"]'),
                            internetConection = opts.pas[1].find("internetConection");
                            //
                            if (!devTAB.hasClass('active')) {
                                devTAB.tab('show');//.trigger('click');
                            };

                            popc.removeClass('container_x_y'),//shadow border
                            popc.addClass('container_x').css({ 'height': 'auto', 'transform': 'rotateX(40deg) scale(0.7) translateY(-50px)', 'overflow': 'hidden' });
                            //
                            //
                            TabPG.css('padding-bottom', '1rem')/*mb-3*/.find('.tab-content').css('overflow', 'hidden');
                            //
                            //
                            gloEVTs.giaidoan2.fnXX = opts.fnXX;//restore 
                            //
                            const _DEV = DA[2].filter(function (dev) {
                                return opts.__UPHIS.indexOf(dev.id.toString()) > -1;
                            })
                            , scr_OPT = gloEVTs.giaidoan2.fnXX.getOPT();
                            //
                            scr_OPT.ignoreCLEAN = "1";//keep annimation loading ...
                            internetConection.find('.loader_conn').empty().removeAttr('style');
                            //
                            //
                            //scr_OPT['el'].data('__bk_res', {
                            //    'sem': testD
                            //    //, "tok": "9HmxhBSVIZDBpQbPFaQYShmLi1IxIn1N+SO+ZfhQKC9GdYzU6NT8hmhsk7gZetCuj3hlFMlVStu+AVCxmaGXDG5mEi2boG988pXVn9CRiuJI3qr1Ehcuw1eBdqRmKGQB8nxqnPAYEq5TJWeY6zeHVPc0p+caC2IbOrtN425FLsP+AgmCYzdvbpD/bIZjbMFmP67ClMbDdR4ADbECvLpqxw=="
                            //});
                            //
                            //
                            opts.pas[1].off('DOWN_ATTLOG_END').one('DOWN_ATTLOG_END', function (evt, usr) {
                                //
                                //return;
                                //
                                scr_OPT['el'].removeData();
                                //
                                ////return;
                                //prof[0].style.removeProperty('max-height');
                                ////
                                //prof.hide().removeClass('khoacur user-profile--show');//chuan bi cho user-profile user-profile--large
                                ////
                                //debugger;
                                opts.pas[1].off('DOWN_ATTLOG_END').trigger('DOWN_ATTLOG_END_USR', [usr]);
                                //
                                //chi download thiet bi can thiet...
                                opts.impSCR.trigger('PNL_THONGKE_SL', ['1', _DEV]);
                                //
                                ////
                                setTimeout(function () {
                                    //prof.slideUp('slow').removeClass('khoacur');
                                    internetConection.slideUp();
                                    gloEVTs.giaidoan2.fnXX.getOPT('online_signal').stop();
                                    //
                                }, 300);
                                //
                                exit_src();
                                //
                            });
                            //popHWND.trigger('shown.bs.modal');
                            gloEVTs.giaidoan2.fnXX.initWOK_JOB(_DEV/*ko truyen vao lst ...*/);
                            //
                            //
                            setTimeout(function () {
                                internetConection.css({ 'z-index': '111111' }).slideDown(function () {
                                    //if (is2_tg9) {
                                    //    opts.impSCR.removeClass('chat--show').prev().removeClass('d-none');
                                    //};
                                    gloEVTs.giaidoan2.fnXX.getOPT('online_signal').start();
                                });
                            }, 100);
                            //
                        } else {
                            exit_src();
                        };
                        //
                    });
                    //
                    SCR_effect(popc, frm_opt,

                           is2_tg9 ? opts.impSCR : opts.impSCR.prev()

                        , ['addClass', 'chat--show'], ['removeClass', 'chat--show']);


                    if (totalDEV == 1) {
                        //debugger;
                        //neu chi co 1 thiet bi thi mac dinh select luon
                        sel_dev.find('input').prop('checked', true).trigger("change");

                    };

                }

                ,

                thietbi_cmd_bk_opt: function (lnk, dev) {

                    //debugger;

                    const BDY = opts.pas[2].find('.snippets.bootdeys').clone(),

                        frm_chung = BDY.addClass('d-flex flex-column h-100').find('.frm_chung').addClass('chat__content flex-grow'),

                        col = frm_chung.find('>div'),

                        col3 = col.eq(0).html(

                            opts.pas[2].find('[chitiet="thietbi_cmd_bk_opt"]').html()

                        ).attr('class', 'col-md-8 mx-auto'),

                        col9 = col.eq(1).addClass('d-none'),

                        popc = opts.pas[1].find('.modal-content'),

                        frm_opt = $('<div class="col-12 px-3 chat--mobile"></div>')
                        .insertAfter(opts.impSCR)
                        .append(BDY),

                        selU = frm_chung.next().next().attr('no-title', ''),

                        cntSEL_U = [],

                        SHOW_EMP_LST = function (fakE) {
                            //
                            //
                            //debugger;
                            const __TB = col9.find('.mcc_usr_lst').off('change').on('change', 'input[type=checkbox]', function (e) {
                                //
                                //debugger;
                                const chk = $(this),

                                    usrid = chk.attr('idx'),//dung idx cho dong bo vo menu sel all, va se convert sau khi thuc tien hanh download fp

                                //usrid = chk.attr('usr');//ID auto cua table USER_INFO //.next().text().trim(),
                                isHas = cntSEL_U.indexOf(usrid);
                                //
                                selU.removeClass('cart_shake');
                                //
                                if (chk.is(':checked')) {
                                    if (isHas == -1) cntSEL_U.push(usrid);
                                } else {
                                    if (isHas > -1) cntSEL_U.splice(isHas, 1);
                                };

                                selU[(cntSEL_U.length > 0 ? 'remove' : 'add') + 'Class']('d-none');
                                if (cntSEL_U.length > 0) {
                                    selU.attr('data-totalemps', cntSEL_U.length);
                                    setTimeout(function () {
                                        selU.addClass('cart_shake');
                                    }, 100);
                                };
                            })
                            ,
                            __maxRows = __TB.prev().appendTo(col3.find('>div:first-child'))
                            .off('render_tb').on('render_tb', function (e, daR, fuck_search) {
                                //
                                //debugger;
                                if (daR.__uniqAC) etotal.html(daR.__uniqAC.length);
                                //
                                __maxRows[(daR.length > 0 ? 'slideDown' : 'slideUp')]();//[(daR.length > 0 ? 'slideDown' : 'slideUp') + 'Class']('d-none');
                                //
                                col9.removeClass('has_usr no_usr search_no_usr').addClass((daR.length > 0 ? 'has_usr' :

                                        fuck_search == '1' ? 'search_no_usr' : 'no_usr'

                                    ));
                                //
                                //thong ke panel
                                sum_THONGKE(daR.__sum_FP_FA_CA_PW, noidung_badge);
                                SHOW_EMP_LST.__daR__sum_FP_FA_CA_PW = daR.__sum_FP_FA_CA_PW;
                                //
                                //
                            }).off('page_changed').on('page_changed', function (e, daR, maxR) {
                                //debugger;
                                pgcnt.find('>span:last-child').html(daR.pagenum);
                                pgcnt.removeClass('d-flex d-none')[daR.pagenum > 0 ? 'slideDown' : 'slideUp'](function () {
                                    pgcnt.addClass(daR.pagenum > 0 ? 'd-flex' : 'd-none');
                                });
                            })
                            ,

                            //etotal = __maxRows.find('[elui="etotal"] >span:last-child'),
                            pgcnt = __maxRows.find('[elui="pgcnt"]'),
                            pgsz = __maxRows.find('[elui="pgsz"]').removeClass('d-flex d-none').addClass('d-flex'),
                            ori_adv = ['0'//ko co tren may cham cong / co tren file upload
                                    , '1'//co tren may cham cong / ko co tren file upload
                                    , '2'//co tren may cham cong + co tren file upload
                                    , 'fp'//finger
                                    , 'fa'//face
                                    , 'ca_pw'//card /password
                                    , 'adm'// quyen admin
                            ]
                            ,

                            TB_ROW_SEL = function () {
                                //
                                selU[(cntSEL_U.length > 0 ? 'remove' : 'add') + 'Class']('d-none');
                                //
                                if (cntSEL_U.length > 0) {
                                    //
                                    selU.removeClass('cart_shake').attr('data-totalemps', cntSEL_U.length);
                                    //
                                    setTimeout(function () {
                                        selU.addClass('cart_shake');
                                    }, 100);
                                    //
                                };
                                //
                                chk_SEL_A.prop("checked", cntSEL_U.length > 0);
                                //
                                chk_SEL_A.parent()[(DA_1.length != cntSEL_U.length ? 'add' : 'remove') + 'Class']('tri-state');
                                //
                            };

                            //
                            __maxRows.find('[elui="etotal"]').remove();
                            //
                            //debugger;
                            const DA_1 = paging(dev.attr('for').split('_')[1],
                                __TB,
                                __maxRows.find('[pagesz="maxRows"]'),
                                cntSEL_U);
                            //
                            DA_1.__isADV = 2;//orgini
                            //
                            //
                            //__TB.data('DA_1', DA_1);
                            //
                            //
                            const neo_head = col9.find('.neo_head').off('STICKY_HED').on('STICKY_HED', function ($e, hed) {
                                //debugger;
                                hed.push(frm_chung);
                                hed.push(70);
                            })
                            ,
                            chk_SEL_A = new tb_head_neo(neo_head
                                .off('fuck_search').on('fuck_search', function (ev, m$e, chkFilter, force) {
                                    //
                                    //debugger;
                                    //
                                    if (chkFilter) {
                                        //
                                        apply_adv_filter(DA_1, ori_adv, chkFilter, 0/*index 9 >-0*/);
                                        //
                                    };
                                    //
                                    //
                                    const str = m$e.val().trim().toLowerCase(),
                                        DA_1_filter = (str == '' && DA_1.__isADV == 2 && !force) ? DA_1 : filter_DA1(DA_1, str);
                                    //
                                    chk_SEL_A.__sumINF = [DA_1_filter.__sum_FP_FA_CA_PW];
                                    //
                                    paging(

                                        DA_1_filter

                                        , __TB
                                        , __maxRows.find('[pagesz="maxRows"]')
                                        , cntSEL_U
                                        , '1');

                                    //
                                    //
                                    srclocked(false);


                                }), 'bkfp', ori_adv)

                            .off('selrow').on('selrow', MNU_SEL_ROW.bind([DA_1, __TB, cntSEL_U]))
                            .off('selrow_cb').on('selrow_cb', TB_ROW_SEL)

                            .off('req_DB').on('req_DB', function (je, cmd, a, b, c) {
                                //
                                debugger;
                                //lay db hoac some in for of db
                                if (cmd == 'sum_FP_FA_CA_PW') {
                                    a.push(

                                       chk_SEL_A.__sumINF && chk_SEL_A.__sumINF[0] || DA_1.__sum_FP_FA_CA_PW

                                    );
                                };
                                //
                            });
                            //
                            //
                            //BTN.addClass('d-none').next().removeClass('d-none');
                            //
                            //BTN.parent().prev().addClass('d-none');//hide description

                            col9.off('converIDX_2_USR').on('converIDX_2_USR', function (e, selUSR) {
                                //
                                //debugger;
                                //
                                for (var w = 0; w < DA_1.length ; w++) {
                                    const it = DA_1[w],
                                        sel = cntSEL_U.indexOf(it[it.length - 1].toString());

                                    if (sel > -1) {

                                        selUSR.push(it[1]);

                                    };

                                };
                                //
                            });


                            return [TB_ROW_SEL];

                        };

                    //
                    //
                    //debugger;
                    //
                    col.eq(2).remove();

                    col9.addClass('order-1 order-md-0')//mobile screen place on bottom
                        .insertBefore(

                        col3.off('click').on('click', 'a',

                            function (e) {
                                const mnu = e.currentTarget.getAttribute('mnu');
                                if (mnu == 'bk_2_file') {

                                    //debugger;
                                    const devid = [].slice.apply(dev.attr('for').split('_'), [1, 3]); //lay id, va finger print version

                                    /*
                                    __mnu.get_fp_tmpl.__dat =[ DA[1].reduce(function (sel, it) {
                                        //
                                        if (it.indexOf(devid[0] + '|') == 0) {
                                            sel.push(it.split('|')[1]);
                                        };
                                        //
                                        return sel;
                                        //
                                    }, []), [devid] ];//list emp bk
                                    */
                                    //
                                    //
                                    //
                                    //debugger;
                                    __mnu.get_fp_tmpl.__dat = [null, [devid]];
                                    //__mnu.get_fp_tmpl(e, "1");//backup all template
                                    __mnu.bk_2_file(e, devid[0]);
                                    //
                                };
                            }
                        )/*.off('click') - ko off again*/.on('click', 'div.btn', function (e1) {

                            const BTN = $(e1.currentTarget);

                            if (BTN.hasClass('shownhanvien')) {

                                frm_chung.fadeOut('fast', function () {
                                    //
                                    col9.removeClass('d-none');
                                    col3.removeClass().addClass('col-md-3');
                                    //
                                    //
                                    frm_chung.fadeIn();
                                    //
                                    //debugger;
                                    if (!SHOW_EMP_LST.loaded) {

                                        SHOW_EMP_LST.loaded = SHOW_EMP_LST(e1);

                                        col3.find('> div > .list-group:last-child').remove('d-none').insertBefore(downALL);


                                    } else {
                                        SHOW_EMP_LST.loaded[0]();
                                    };
                                    //
                                    //
                                    //debugger;
                                    sum_THONGKE(SHOW_EMP_LST.__daR__sum_FP_FA_CA_PW, noidung_badge);
                                    //
                                    //
                                    downALL.addClass('d-none').prev().removeClass('d-none');
                                    BTN.addClass('d-none').next().removeClass('d-none');
                                    //
                                });

                            } else if (BTN.hasClass('hidenhanvien')) {

                                frm_chung.fadeOut('fast', function (e2) {
                                    //
                                    col9.addClass('d-none');
                                    frm_chung.next().next().addClass('d-none');
                                    //
                                    frm_chung.fadeIn();
                                    //
                                    //if (col.__viewMOD) {
                                    //    col.__viewMOD.removeClass('d-none');
                                    //    col.__viewMOD = null;//reset
                                    //    BTN.parent().next().removeClass('d-none');
                                    //};
                                    //
                                    col3.removeClass().addClass('col-md-8 mx-auto');
                                    //col3.find('> div > .list-group:last-child').addClass('d-none');
                                    //
                                    BTN.addClass('d-none').prev().removeClass('d-none');
                                    //
                                    //
                                    downALL.removeClass('d-none').prev().addClass("d-none");
                                    //etotal.html(devINF.tgU);
                                    //debugger;
                                    sum_THONGKE(SHOW_EMP_LST.__ini__sum_FP_FA_CA_PW, noidung_badge);
                                    //
                                });//
                                //
                            }

                        })).find('.row_tb2').remove();

                    //
                    //debugger;
                    const is2_tg9 = opts.impSCR.hasClass('chat--show'),

                        mccID = dev.attr('for').split('_')[1],

                        devINF = DA[3][mccID];
                    //
                    //col3.find('h3 >span').last().html(devINF.tgU);
                    //


                    const h3_ori = col3.find('h3').addClass('d-none'),

                        downALL = h3_ori.next(),

                        noidung_file = opts.pas[2].find('[noidung_file] .list-group').clone()

                        .addClass('row  no-gutters flex-row mx-2 mb-3')

                        .insertAfter(h3_ori).find('.list-group-item').addClass('col-6 no-border').css('min-width', '150px'),

                       etotal = noidung_file.first().removeClass('d-none').addClass('d-flex').find('>.badge'),

                       noidung_badge = noidung_file.find('.badge');





                    //di lay so luong truoc.
                    const _GET = [];
                    opts.impSCR.trigger('PNL_THONGKE_SL', [_GET, [mccID]]);
                    SHOW_EMP_LST.__ini__sum_FP_FA_CA_PW = _GET[0];
                    //debugger;
                    sum_THONGKE(SHOW_EMP_LST.__ini__sum_FP_FA_CA_PW, noidung_badge);


                    if (SHOW_EMP_LST.__ini__sum_FP_FA_CA_PW[0] == 0) {
                        //neu ko co user
                        noidung_file.parent().append(col9.find('[lst_thongbao]').clone()).nextAll().addClass('d-none');
                        //debugger;
                    };


                    //etotal.html(devINF.tgU);

                    //

                    //console.log( devINF[1] + ' (' + devINF.tgU);
                    //
                    $('<a href="#" class="user-profile__close d-flex dume_invert" style="left: 20px;justify-content:center;align-items: center;border-radius: 50%;padding: 20px;background-color: rgba(191, 191, 191, 0.3);"><i class="ti-close"></i></a>')
                        .insertBefore(
                            //
                            BDY.find('.page-title').removeClass('d-none').addClass("p-2").find('h3').addClass('my-2 pl-2')



                        .html(

                                devINF[1] + ' - ' + dev.html()

                            )

                            //
                        ).off('click').on('click', function () {

                            //debugger;

                            SCR_effect(popc,

                                   is2_tg9 ? opts.impSCR : opts.impSCR.prev()

                                , frm_opt, ['addClass', 'chat--show'], ['removeClass', 'chat--show'],
                                function () {
                                    frm_opt.find('*').off(/*all event*/).unbind().removeData();
                                    frm_opt.empty();
                                    frm_opt.off(/*all event*/).unbind().removeData();
                                    frm_opt.remove();
                                }
                                ,

                                { 'height': 'auto', 'transform': 'rotateX(50deg) scale(0.7)', 'overflow': 'hidden' });

                        });
                    //
                    SCR_effect(popc, frm_opt,

                       is2_tg9 ? opts.impSCR : opts.impSCR.prev()

                        , ['addClass', 'chat--show'], ['removeClass', 'chat--show']);
                    //
                    //
                    frm_chung.next().next().off('click').on('click', function (e) {

                        //debugger;

                        const selUSR = [];

                        col9.trigger('converIDX_2_USR', [selUSR]);

                        //debugger;
                        //click vao nut sel emp show popup menu

                        __mnu.get_fp_tmpl.__dat = [selUSR,//cntSEL_U
                            [
                                [].slice.apply(dev.attr('for').split('_'), [1, 3]) //lay id, va finger print version
                            ]
                        ];//list emp bk

                        const th$a = this;
                        //setTimeout(function () {
                        __mnu.act_menu(th$a);
                        //});
                        //}).on('show.bs.popover', function (e) {
                        //    debugger;
                    });
                    //
                }
                ,

                thietbi_cmd: function (e) {

                    debugger;

                    const lnk = $(e.currentTarget);
                    switch (lnk.attr('mnu') || lnk.attr('mnu_bk')) {
                        //case 'bk_2_fi': {
                        //    __mnu.get_fp_tmpl(e, "1");
                        //    break;
                        //}
                        case 'del_usr': {

                            //debugger;

                            const usr = [], dev = mnu_each_mcc.__mnu.split('_')[1];
                            mnu_each_mcc.__ul.parent().trigger('xoa_nguoidung', [usr, parseInt(dev)]);
                            //
                            __mnu.thucthi_job(e, usr, dev);
                            break;
                        }
                        case 'del_usr_multi_dev': {

                            debugger;

                            const usr = [];
                            mnu_each_mcc.__ul.parent().trigger('xoa_nguoidung', [usr]);
                            //debugger;
                            __mnu.thucthi_job(e, usr, '-1');
                            break;
                        }
                        case 'bk_opt': {
                            //
                            debugger;
                            //
                            const dev = //$(e.currentTarget.innerHTML);// mnu_each_mcc.__ul.parent().find('[for="' + mnu_each_mcc.__mnu + '"]');
                            lnk.find('[data-lang]').attr('for', mnu_each_mcc.__mnu);
                            //
                            lnk.find('[data-lang]').attr('for', mnu_each_mcc.__mnu);
                            //
                            if (lnk[0].hasAttribute('thietbi_restore')) {
                                const inpFI = opts.impSCR.prev().parent().find('input#thietbi_restore_main');
                                //
                                inpFI.attr('__dumeMCC', [mnu_each_mcc.__mnu.split('_')[1]]);
                                inpFI.trigger('click');
                                //
                            } else {
                                __mnu.thietbi_cmd_bk_opt(lnk, dev);
                            };
                            //
                            break;
                        }
                        case 'thietbi_restore_S1': {
                            __mnu.thietbi_restore_S1();
                            break;
                        }
                        case 'xuat_excel': {
                            //menu dung chung, nen phai detect duoc multi or only 1
                            debugger;
                            const exp = mnu_each_mcc.__mnu.split('_'),
                                usr = [];
                            //
                            //if (exp.length > 2 && exp[0] == 'dume') {
                            //    alert('for device: ' + exp[1]);
                            //    exp[1] = parseInt(exp[1]);
                            //} else {
                            //    alert('for All device.');
                            //    exp[1] = null;
                            //};
                            //
                            mnu_each_mcc.__ul.parent().trigger('xoa_nguoidung', [usr, exp.length > 2 && exp[0] == 'dume' ? parseInt(exp[1]):null ]

                             );
                            //
                            //debugger;
                            __mnu.xuat_excel_evt(e, usr);
                            //

                            break;
                        }
                    };
                }

                ,

                xuat_excel_evt: function (e, usr) {
                    //
                    //debugger;

                    srclocked(true);
                    //
                    var msg = _La$N('js_001_27', aLAN) + '.. -> ' + $(e.currentTarget).find('[data-lang]').text() + '?' +

                         '<div class="form-group  mb-0 mt-3"><input type="text" placeholder="' + (_La$N('js_009U$R|5|2', opts.lan) ? _La$N('js_009U$R|5|2', opts.lan) : 'file name') + '"  class="form-control"></div>';

                    if (usr.length == 0) {
                        msg = $(e.currentTarget).closest('.frm_chung').find('.search_no_usr [lst_thongbao] .card-body').children().eq(0).clone();
                        msg.children().eq(0).html("Oops... " + $(e.currentTarget).find('[data-lang]').text() );
                        msg = msg.html();
                    };
                    //
                    devDlg(usr.length == 0 ? 0 :1, msg
                        , null, {
                            cb: function (a) {
                                //
                                srclocked(false);
                                //
                            }
                        , isBS: '1'//buoc dung bootstrap

                        }).show().done(function (rst, usrINPUT) {
                            if (rst == 1) {
                                //
                                helloguy.show();
                                //
                                //__mnu.get_fp_tmpl_job(usrINPUT && usrINPUT.val(), isBS, lstT, hedU, bkVER);
                                //cmd_EXL.doEXP(usrINPUT && usrINPUT.val());
                                //
                                init_excel_engi().done(function () {
                                    //code in main.js

                                    //cmd_EXL[opts.job].apply(opts.args);

                                    const fileName = (usrINPUT && usrINPUT.val() || "usr_" + new Date().getTime()) + ".xlsx";

                                    Main.exelEngine({

                                        job: 'expr_device_usr',

                                        tmpl: srcp$f + '/media/utils/tmplexcel/import_sample.xlsx',

                                        args: [usr, opts.impSCR.prev().find('[gwv] thead th')/*colTXT*/, DA[3]],

                                        fileName: fileName,

                                        cb: function (rst, mg, type) {
                                            //
                                            if (rst == 0) {

                                                //debugger;

                                                const fi = mg.split('base64,');

                                                //__mnu.nativeFILE(filename, contentType, btoa(tFP[0].join(String.fromCharCode(4))));
                                                __mnu.nativeFILE(fileName, type || fi[0]/* "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"*/, fi[1]);
                                                //
                                            } else {

                                                toastMsg((mg ? mg + '\n' : '') + _La$N(rst == 1 ? 'js_003_ok' : 'js_003_err', aLAN), rst == 1 ? 'success' : 'error');

                                                srclocked(false);
                                            };
                                            //
                                        }
                                    });
                                });
                                //
                            };
                        });

                    console.log(new Date().getTime(), ' __mnu.xuat_excel_evt');

      

                }   
                ,

                thucthi_job: function (elEVT, del_usr, ki) {

                    //debugger;
                    //return;

                    //debugger;

                    var isShowDETAIL = 2;//hide

                    const sum_ui = opts.pas[2].find('.snippets.bootdeys').clone().addClass('px-3 chat__content flex-grow'),
                              pageTIT = sum_ui.find('.page-title');



                    sum_ui.off('click').on('click', '[pmnu="device_list"]', function (e) {

                        alert('here');

                    });

                    sum_ui.find('.row_tb2').remove();

                    const prof = opts.impSCR.next().removeClass('d-none').hide().removeClass('px-4 px-sm-5 px-lg-4').addClass('px-0').css({ 'overflow': 'hidden', 'left': '0', 'bottom': '0' }),

                        profile__wrapper = prof.find('.user-profile__wrapper').empty(),

                        frm_chung = sum_ui.find('.frm_chung'),

                        col0 = frm_chung.children().first(),
                        col1 = frm_chung.children().eq(1).addClass('d-none'),
                        col2 = frm_chung.children().last().removeClass('d-none'),

                        lst_thongbao = col1.find('[lst_thongbao]').clone().hide().removeClass().insertBefore(col2.children().last()),//col-md-8

                        pagesz_here = col0.find('[pagesz_here]'),

                        sumINF = col2.find('.list-group'),

                        RELEASE_DAT_EVT = function () {

                            //debugger;

                            sum_ui.find('*').off(/*all event*/).unbind().removeData();
                            sum_ui.empty();
                            sum_ui.off(/*all event*/).unbind().removeData();
                            sum_ui.remove();
                            //
                            prof.removeClass('user-profile--show');//chuan bi cho user-profile user-profile--large
                            //
                        }

                    ,

                    selU = frm_chung.next().next()

                    ,

                    cntSEL_U = [];

                    //
                    profile__wrapper.append([sum_ui]);
                    //
                    profile__wrapper.find('*').off(/*all event*/).unbind().removeData();
                    profile__wrapper.off(/*all event*/).unbind().removeData();
                    //
                    profile__wrapper.removeClass('pt-3 pt-5').addClass('pt-1');

                    prof[0].style.setProperty('position', 'fixed', 'important');

                    var multiDEV = [], multiCNT = [], delBODY;

                    function __fn(RMV) {
                        //
                        //debugger;
                        //
                        const syncMOD = ki === '-3' ? ":not(.panel)" : null,
                            SL = SL_NGUOIDUNG(RMV, del_usr),
                            _usr = SL[3];

                        multiDEV = SL[0];//reset
                        multiCNT = SL[1];//reset

                        //dua passwod len day, vi sau 2 tg 9 se co thong ke ...
                        //
                        if (!syncMOD) delBODY(SL, col2);
                        //
                        if (isShowDETAIL == 1) {//show
                            //
                            col1.find('.filter_adv_body input[fi="adm"]').trigger('change', ['1'/*force*/, RMV]);
                            //
                        };
                        //
                        //debugger;
                        //
                        if (_usr > 0) {
                            if (isShowDETAIL == 2) lst_thongbao.prevAll(syncMOD).removeClass('d-none');
                            lst_thongbao.hide();
                            pagesz_here.fadeIn();
                        } else {
                            //col2.hide();
                            if (isShowDETAIL == 2) lst_thongbao.prevAll().addClass('d-none');
                            lst_thongbao.fadeIn();
                            pagesz_here.hide();
                        };
                        //
                    };

                    function SHOW_EMP_LST(fakE) {
                        //
                        const raw_el = [/*0: __titleEXCEL*/,/*1: cmd_del_usr*/];

                        //
                        selU.off('click').on('click', function (xs) {
                            //
                            //debugger;
                            if (!raw_el[1]) {
                                raw_el[1] = col1.find('[cmd_del_usr]').clone();
                                raw_el[0] = raw_el[1].find('div[mnu="xuat_excel_fuk_til"]').removeAttr('style').remove().clone();
                            };
                            //
                            //opts.MNU.__dumeMCC = this.getAttribute('gmnu');
                            //<i class='ti-check-box text-extra-large mr-1'></i>
                            this.setAttribute('title', "<span class='d-flex'>" + raw_el[0][0].outerHTML //+ $(elEVT.currentTarget).find('[data-lang]').text()
                                + '</span>');

                            this.setAttribute('gmnu', 'sel_usr_cus_del');//thay doi default menu 
                            //
                            //
                            __mnu.act_menu(this);
                            //
                            //
                        }).off('__DYN_MNU').on('__DYN_MNU', function (sz, az, isM, cz) {

                            //debugger;

                            var mnuBODY;
                            if (isM.length == 0) {
                                //
                                mnuBODY = raw_el[1].clone().insertAfter(az[az.length - 1]).attr('gmnu', "sel_usr_cus_del");
                                //
                            } else {
                                mnuBODY = az.eq(isM[0]);
                            };
                            //
                            //
                            //debugger;
                            //
                            const selUSR = [];
                            col1.trigger('converIDX_2_USR', [selUSR, '1']);
                            const SL = SL_NGUOIDUNG([], selUSR);
                            delBODY(SL, mnuBODY);
                            //
                            //multiDEV = SL[0];//reset
                            //multiCNT = SL[1];//reset

                            //
                            const tip = opts.MNU.data()['bs.popover'].tip;
                            if (tip) {

                                const btnEXL = $(tip).css('max-width', '300px').find('.popover-body').css({ 'color': 'inherit', 'padding': 0 })

                                 .prev().find('[mnu="xuat_excel_fuk_til"]').off('click', __mnu.xuat_excel_evt)

                                     .one('click', function (exlE) {
                                         //
                                         btnEXL.off('click');
                                         //
                                         opts.MNU.popover('hide');
                                         $(document).trigger('click');//du me clean popup
                                         setTimeout(function () {
                                             __mnu.xuat_excel_evt(exlE, selUSR);
                                         },100);
                                         //
                                     });
                            };

                        }).off('__mnu_click').on('__mnu_click', function (e, na, lnkEVT) {
                            //
                            //debugger;
                            //
                            col2.find('div[cmd_del_usr] [mnu="' + na + '"]').trigger('click', 'cusE');
                            //
                        });
                        //
                        //debugger;
                        const __TB = col1.find('.mcc_usr_lst').off('change').on('change', 'input[type=checkbox]', function (e) {
                            //
                            //debugger;
                            const chk = $(this),

                                usrid = chk.attr('idx'),//dung idx cho dong bo vo menu sel all, va se convert sau khi thuc tien hanh download fp

                            //usrid = chk.attr('usr');//ID auto cua table USER_INFO //.next().text().trim(),
                            isHas = cntSEL_U.indexOf(usrid);
                            //
                            selU.removeClass('cart_shake');
                            //
                            if (chk.is(':checked')) {
                                if (isHas == -1) cntSEL_U.push(usrid);
                            } else {
                                if (isHas > -1) cntSEL_U.splice(isHas, 1);
                            };

                            selU[(cntSEL_U.length > 0 ? 'remove' : 'add') + 'Class']('d-none');
                            if (cntSEL_U.length > 0) {
                                selU.attr('data-totalemps', cntSEL_U.length);
                                setTimeout(function () {
                                    selU.addClass('cart_shake');
                                }, 100);
                            };
                        })
                        .on('click', 'a[sua_usr_info]', function (r) {
                            //
                            const ico = $(r.currentTarget),
                                getDR = function (dix) {
                                    debugger;
                                    for (var w = 0; w < del_usr.length; w++) {
                                        const it = del_usr[w];
                                        if (Math.abs(it[it.length - 1]) == dix) {
                                            return it;
                                            break;
                                        };
                                    };
                                }
                                ,
                                idx = parseInt(ico.parent().find('input[type=checkbox]').attr('idx'))
                                ,
                                orgR = DA_1[idx - 1]//;//note -1; b/c index start at 1
                                ,
                                dR = getDR(parseInt(orgR[orgR.length - 1]));
                            //
                            srclocked(true);
                            //
                            __mnu.pb_cv(col2).done(function (slet) {

                                //debugger;

                                const dateFUK = function () {
                                    //
                                    //debugger;
                                    //
                                    const sua_empinf = col2.find('[sua_empinf]').clone().removeClass('d-none'),
                                        NGA = sua_empinf.find('input[type="date"]');
                                    //
                                    NGA.eq(0).attr('value', __mnu.pb_cv.makD(oldV.birthday || "2000-01-01"));
                                    NGA.eq(0).attr('data-default', __mnu.pb_cv.makD("2000-01-01"));
                                    //
                                    NGA.eq(1).attr('value', __mnu.pb_cv.makD(oldV.hireday || new Date()));
                                    NGA.eq(1).attr('data-default', __mnu.pb_cv.makD(oldV.hireday || new Date()));
                                    //
                                    sua_empinf.find('[rst_el="ho"]').attr("placeholder", '-dev-').attr('value', oldV.ho);
                                    sua_empinf.find('[rst_el="ten"]').attr("placeholder", oldV.ten || dR[4]).attr('value', oldV.ten || dR[4]);
                                    //
                                    //
                                    //debugger;
                                    const gender = sua_empinf.find('[rst_el="gender"]');
                                    gender[0].innerHTML = slet.eq(0)[0].innerHTML;
                                    //
                                    if (oldV.gender) gender.find('option[value="' + oldV.gender + '"]').attr('selected', 'selected');
                                    //
                                    //
                                    return sua_empinf[0].outerHTML;
                                    //
                                }
                                ,
                                oldV = (typeof dR[1] === 'string' || dR[1] instanceof String) ? {} : dR[1];
                                //
                                //
                                if (oldV.secid) slet.eq(1).find('option[value="' + oldV.secid + '"]').attr('selected', 'selected');
                                if (oldV.posid) slet.eq(2).find('option[value="' + oldV.posid + '"]').attr('selected', 'selected');
                                //
                                //
                                devDlg(1, ''//_La$N('js_001_27', aLAN) + '.. -> ' //+ $(e.currentTarget).find('[data-lang]').text() + '?'

                                    + dateFUK() + slet.eq(1).closest('.row').removeClass('mt-4')[0].outerHTML + slet.eq(2).closest('.row')[0].outerHTML
                                    //+ slet.closest('.row').parent().html()

                                    //+ sync_map.find('[usr_hsnv]').clone().removeClass('d-none').addClass('mx-0').removeAttr('style')[0].outerHTML

                                    , null, {
                                        cb: function (a) {
                                            //
                                            const bdy = a.find('.modal-dialog').removeClass('modal-sm').addClass('pu_fuk_mobi')
                                            .find('.modal-body').addClass('pt-0');


                                            bdy.find('input[type="date"]').off("change").on('change', __mnu.pb_cv.dVALID);

                                            //debugger;
                                            bdy.find('input[rst_el="ho"],input[rst_el="ten"]').one('focus', function () {
                                                $(this).select();
                                            });



                                            bdy.next()[0].style.setProperty('border-top', 'none', 'important');

                                            srclocked(false);
                                            //debugger;
                                            //
                                        }
                                    , isBS: "1"//buoc dung bootstrap

                                    }).show().done(function (rst, usrINPUT) {
                                        if (rst == 1) {
                                            //
                                            ico.removeClass(' ti-pencil-alt text-warning').addClass('ti-check text-success');
                                            //console.log(.children().last().text());
                                            //
                                            const dogI = { ho: '', ten: '', gender: '1' };
                                            //
                                            //
                                            for (var w = 0; w < usrINPUT.length; w++) {
                                                dogI[usrINPUT[w].getAttribute('rst_el')] = usrINPUT[w].value;
                                            };
                                            //
                                            dR[1] = dogI;
                                            //
                                            const dogT = ico.parent().next().contents().last(),
                                                hoten = dogI.ho + ' ' + dogI.ten;
                                            //
                                            //
                                            if (dogT.length == 0) {
                                                ico.parent().next().append(hoten);
                                            } else if (dogT[0].nodeType === Node.TEXT_NODE) {
                                                dogT.replaceWith(hoten);
                                            } else {
                                                dogT.parent().append(hoten);
                                            };
                                            //
                                            //
                                            debugger;
                                            //update search field
                                            const serI = dR.length - 2,
                                                serT = dR[serI].split(String.fromCharCode(4));
                                            //
                                            dR[4] = hoten;
                                            serT[1] = hoten;
                                            dR[serI] = serT.join(String.fromCharCode(4))
                                            //
                                            //    tno= die.filter(function () {
                                            //        return this.nodeType === Node.TEXT_NODE;
                                            //    });
                                            //debugger;
                                            //if (tno.length>0) $(tno[0]).html('dume may');
                                            //console.log(dR);
                                        };
                                    });

                            });
                        })
                        ,
                        __maxRows = __TB.prev().appendTo(col0.find('>div:first-child'))
                        .off('render_tb').on('render_tb', function (e, daR, fuck_search) {
                            //
                            //debugger;
                            if (daR.__uniqAC) etotal.html(daR.__uniqAC.length);
                            //
                            __maxRows[(daR.length > 0 ? 'slideDown' : 'slideUp')]();//[(daR.length > 0 ? 'slideDown' : 'slideUp') + 'Class']('d-none');
                            //
                            col1.removeClass('has_usr no_usr search_no_usr').addClass((daR.length > 0 ? 'has_usr' :

                                    fuck_search == '1' ? 'search_no_usr' : 'no_usr'

                                ));
                            //
                            //thong ke panel
                            //sum_THONGKE(daR.__sum_FP_FA_CA_PW, noidung_badge);
                            //SHOW_EMP_LST.__daR__sum_FP_FA_CA_PW = daR.__sum_FP_FA_CA_PW;
                            //
                            //
                        }).off('page_changed').on('page_changed', function (e, daR, maxR) {
                            //debugger;
                            pgcnt.find('>span:last-child').html(daR.pagenum);
                            pgcnt.removeClass('d-flex d-none')[daR.pagenum > 0 ? 'slideDown' : 'slideUp'](function () {
                                pgcnt.addClass(daR.pagenum > 0 ? 'd-flex' : 'd-none');
                            });
                        })
                        ,

                        etotal = __maxRows.find('[elui="etotal"] >span:last-child'),
                        pgcnt = __maxRows.find('[elui="pgcnt"]'),
                        pgsz = __maxRows.find('[elui="pgsz"]').removeClass('d-flex d-none').addClass('d-flex'),
                        ori_adv = ['0'//ko co tren may cham cong / co tren file upload
                                , '1'//co tren may cham cong / ko co tren file upload
                                , '2'//co tren may cham cong + co tren file upload
                                , 'fp'//finger
                                , 'fa'//face
                                , 'ca_pw'//card /password
                                , 'adm'// quyen admin
                        ]
                        ,
                        sua_ico = ki === '-3' ? '<a sua_usr_info  class="ml-1  ti-pencil-alt text-warning"></a>' : ''
                        ,
                        TB_ROW_SEL = function () {
                            //
                            selU[(cntSEL_U.length > 0 ? 'remove' : 'add') + 'Class']('d-none');
                            //
                            if (cntSEL_U.length > 0) {
                                //
                                selU.removeClass('cart_shake').attr('data-totalemps', cntSEL_U.length);
                                //
                                setTimeout(function () {
                                    selU.addClass('cart_shake');
                                }, 100);
                                //
                            };
                            //
                            chk_SEL_A.prop("checked", cntSEL_U.length > 0);
                            //
                            chk_SEL_A.parent()[(DA_1.length != cntSEL_U.length ? 'add' : 'remove') + 'Class']('tri-state');
                            //
                        };

                        //
                        //__maxRows.find('[elui="etotal"]').remove();
                        //
                        //debugger;
                        const DA_1 = paging(del_usr ? del_usr : multiDEV.join('|'),
                            __TB,
                            __maxRows.find('[pagesz="maxRows"]'),
                            cntSEL_U, null, sua_ico);
                        //
                        DA_1.__isADV = 2;//orgini
                        //
                        //
                        //__TB.data('DA_1', DA_1);
                        //
                        //
                        const neo_head = col1.find('.neo_head').off('STICKY_HED').on('STICKY_HED', function ($e, hed) {
                            //debugger;
                            if (!del_usr) {
                                //sync hsnv
                            } else {
                                hed.push(pageTIT.next());//parent scroll
                                hed.push(70);
                            };
                        })
                        ,
                        chk_SEL_A = new tb_head_neo(neo_head
                            .off('fuck_search').on('fuck_search', function (ev, m$e, chkFilter, force, rmvDEV) {
                                //
                                debugger;
                                //
                                if (chkFilter) {
                                    //
                                    if (rmvDEV) {
                                        for (var w = 0; w < DA_1.length; w++) {
                                            const it = DA_1[w],
                                                mcc = Math.abs(parseInt(it[0]));
                                            //
                                            it[0] = (rmvDEV.indexOf(mcc) > -1 ? -1 : 1) * mcc;
                                            //
                                        };
                                    };
                                    //
                                    apply_adv_filter(DA_1, ori_adv, chkFilter, 0/*index 9 >-0*/);
                                    //
                                };
                                //
                                //
                                const str = m$e.val().trim().toLowerCase(),
                                    DA_1_filter = (str == '' && DA_1.__isADV == 2 && !force) ? DA_1 : filter_DA1(DA_1, str);
                                //
                                chk_SEL_A.__sumINF = [DA_1_filter.__sum_FP_FA_CA_PW];
                                //
                                paging(

                                    DA_1_filter

                                    , __TB
                                    , __maxRows.find('[pagesz="maxRows"]')
                                    , cntSEL_U
                                    , '1', sua_ico);

                                //
                                //
                                srclocked(false);
                                //
                            }), 'bkfp', ori_adv)

                        .off('selrow').on('selrow', MNU_SEL_ROW.bind([DA_1, __TB, cntSEL_U]))
                        .off('selrow_cb').on('selrow_cb', TB_ROW_SEL)

                        .off('req_DB').on('req_DB', function (je, cmd, a, b, c) {
                            //
                            debugger;
                            //lay db hoac some in for of db
                            if (cmd == 'sum_FP_FA_CA_PW') {
                                a.push(

                                    chk_SEL_A.__sumINF && chk_SEL_A.__sumINF[0] || DA_1.__sum_FP_FA_CA_PW

                                );
                            };
                            //
                        });
                        //
                        //
                        //BTN.addClass('d-none').next().removeClass('d-none');
                        //
                        //BTN.parent().prev().addClass('d-none');//hide description
                        col1.off('converIDX_2_USR').on('converIDX_2_USR', function (e, selUSR, _arr) {
                            //
                            debugger;
                            //
                            //for (var w = 0; w < cntSEL_U.length; w++) {
                            for (var w = 0; w < DA_1.length ; w++) {

                                const it = DA_1[w],sel = cntSEL_U.indexOf(it[it.length - 1].toString());

                                //const it = DA_1[Math.abs(parseInt(cntSEL_U[w])) - 1];//nho la phai -1; vi ko xai index 0
                                if (sel > -1) {
                                    if (_arr == '1') {
                                        //
                                        selUSR.push(it);
                                        //
                                    } else {
                                        //
                                        const MCC = selUSR[it[0]] || (selUSR[it[0]] = []);
                                        MCC.push(it[1]);
                                        //
                                    };
                                };
                                //
                            };
                            //
                        });
                        //
                        //
                        if (elEVT.hasOwnProperty('__cmd_from_usr_lst')) {
                            debugger;
                            //show list default check all when call from User's list screen.
                            chk_SEL_A.trigger('selrow', ['sel_all']);
                        };
                        //
                        return [TB_ROW_SEL, __maxRows];
                        //
                    };
                    //


                    if (ki === '-3') {//sync_profile sync  user - emp profile.
                        //
                        debugger;
                        //
                        srclocked(true);//sau khi load empprofile xong se unlock.
                        //
                        delBODY = function (SL, mnuBDY) {
                            //
                            const _pw = SL[2],//del_usr[0][5].length > 0 ? 1 : 0,
                                    _usr = SL[3];
                            //
                            //
                            const dnone = 'display:none!important',
                                    usr = mnuBDY.find('[mnu="nhanvien"]');
                            //
                            mnuBDY.find('.list-group-item').attr('style', dnone);
                            //
                            if (_usr > 0) {
                                usr.closest('.list-group-item').removeAttr('style');
                                usr.find('.badge').html(_usr);
                            } else {
                                usr.closest('.list-group-item').attr('style', dnone);
                            };
                        };
                        //
                        //
                        const part_sync = __mnu.dongbo_hsnv(profile__wrapper, frm_chung, col0, col1, col2)
                         .on('c$b', function (e, p1, p2, p3) {
                             if (p1 == 'getU') {

                                 debugger;

                                 const fiter = delBODY.__cusE === '1' ? cntSEL_U : null,
                                     uiqE = [];
                                 //
                                 for (var w = 0; w < del_usr.length; w++) {
                                     const it = del_usr[w];
                                     if (!fiter || fiter.indexOf(it[it.length - 1].toString()) > -1) {
                                         if (uiqE.indexOf(it[2]) == -1) {//chi push 1 lan.
                                             p2.push(it);
                                             uiqE.push(it[2]);
                                         };
                                     };
                                 };
                                 //
                             };
                         })
                        ,
                        usr_hsnv = part_sync.find('[usr_hsnv]');
                        //
                        //
                        part_sync.find('[sync_cmd]').on('click', '.btn', function (e) {
                            if (e.currentTarget.hasAttribute('thoat_usr_hsnv')) {
                                delete delBODY.__cusE;
                                //debugger;
                                $(e.currentTarget).addClass('d-none');
                                col2.find('.btn.shownhanvien').trigger('click', ['-3']);
                            } else if ($(e.currentTarget).hasClass('sync_thucthi')) {
                                //
                                part_sync.trigger('onSync_map', []);
                            };
                        });
                        //
                        __fn([]);
                        //
                        const fuk=col2.find('div[cmd_del_usr]').off('click').on('click', '[mnu]', function (e, a, b) {
                            debugger;
                            delBODY.__cusE = '1';
                            col2.find('.btn.hidenhanvien').trigger('click', ['-3']);
                        });

                    } else {
                        //
                        delBODY = function (SL, mnuBDY) {
                            //
                            const _pw = SL[2],//del_usr[0][5].length > 0 ? 1 : 0,
                                    _usr = SL[3],
                                    _fp = SL[4],// parseInt(del_usr[0][9]),
                                    _fa = SL[5],// parseInt(del_usr[0][10]),
                                    _ca = SL[6],//del_usr[0][7].length > 0 ? 1 : 0,
                                    _adm = SL[7];// del_usr[0][3] == '14' ? 1 : 0;
                            //
                            //
                            const dnone = 'display:none!important',
                                    usr = mnuBDY.find('[mnu="usr"]'),
                                    fa = mnuBDY.find('[mnu="fa"]'),//face
                                    fp = mnuBDY.find('[mnu="fp"]'),//finger print
                                    ca = mnuBDY.find('[mnu="ca"]'),//card
                                    pw = mnuBDY.find('[mnu="pw"]'),//password
                                    adm = mnuBDY.find('[mnu="adm"]');//admin
                            //
                            mnuBDY.find('.list-group-item').attr('style', dnone);
                            //
                            if (_usr > 0) {
                                usr.closest('.list-group-item').removeAttr('style');
                                usr.find('.badge').html(_usr);
                            } else {
                                usr.closest('.list-group-item').attr('style', dnone);
                            };


                            if (_fa > 0) {
                                fa.closest('.list-group-item').removeAttr('style');
                                fa.find('.badge').html(_fp);
                            } else {
                                fa.closest('.list-group-item').attr('style', dnone);
                            };

                            if (_fp > 0) {
                                fp.closest('.list-group-item').removeAttr('style');
                                fp.find('.badge').html(_fp);
                            } else {
                                fp.closest('.list-group-item').attr('style', dnone);
                            };

                            if (_ca > 0) {
                                ca.closest('.list-group-item').removeAttr('style');
                                ca.find('.badge').html(_ca);
                            } else {
                                ca.closest('.list-group-item').attr('style', dnone);
                            };

                            if (_pw > 0) {
                                pw.closest('.list-group-item').removeAttr('style');
                                pw.find('.badge').html(_pw);
                            } else {
                                pw.closest('.list-group-item').attr('style', dnone);
                            };

                            if (_adm > 0) {
                                adm.closest('.list-group-item').removeAttr('style');
                                adm.find('.badge').html(_adm);
                            } else {
                                adm.closest('.list-group-item').attr('style', dnone);
                            };
                        };
                        //
                        __fn([]);
                        //
                        const xoa_usr = function (mnu, cusE) {
                            //
                            debugger;
                            //
                            const selUSR = {}, usrD = !cusE ? del_usr : [];
                            //
                            if (cusE || ki === 'del_usr') {//ki==='del_usr' meaning: list user -> select emp menu -> xoa
                                //
                                col1.trigger('converIDX_2_USR', [usrD, '1']);
                                //
                            } else if (mnu == 'usr') { ////all tat ca.
                                //
                                if (ki === '-1') {//all
                                    for (var w = 0; w < multiDEV.length; w++) {
                                        selUSR[multiDEV[w]] = ['all'];
                                    };
                                } else {//specify device ...
                                    const _K = ki.split(',');
                                    for (var w = 0; w < _K.length; w++) {
                                        if (multiDEV.indexOf(parseInt(_K[w])) > -1) {
                                            selUSR[multiDEV[w]] = ['all'];
                                        };
                                    };
                                };
                                //
                                return selUSR;
                                //
                            };
                            //
                            //
                            for (var w = 0; w < usrD.length; w++) {
                                //
                                const it = usrD[w],//nho la phai -1; vi ko xai index 0
                                        MCC = selUSR[it[0]] || (selUSR[it[0]] = []);
                                //
                                if (mnu == 'usr') {

                                    MCC.push(it[1]);

                                } else {
                                    //_fp = rst[1];//parseInt(del_usr[w][9]);
                                    //_fa = rst[2];// parseInt(del_usr[w][10])
                                    //_ca = rst[3];//del_usr[w][7].length > 0 ? 1 : 0;
                                    //_pw = rst[4];//del_usr[w][5].length > 0 ? 1 : 0;
                                    //_adm = rst[5];//del_usr[w][3] == '14' ? 1 : 0;
                                    const rst = sum_FP_FA_CA_PW(usrD[w]);
                                    var idx = -1;
                                    switch (mnu) {
                                        case 'fp': {
                                            idx = 1;
                                            break;
                                        } case 'fa': {
                                            idx = 2;
                                            break;
                                        } case 'ca': {
                                            idx = 3;
                                            break;
                                        } case 'pw': {
                                            idx = 4;
                                            break;
                                        } case 'adm': {
                                            idx = 5;
                                            break;
                                        };
                                    };
                                    //
                                    if (rst[idx] > 0) {
                                        if (MCC.indexOf(it[1]) == -1) MCC.push(it[1]);
                                    };
                                    //
                                };
                            };
                            //
                            return selUSR;
                            //
                        }

                        ,

                        del_s2 = function (mnu, cusE) {
                            //usr: user
                            //fa: face
                            //fp: finger print
                            //ca: card
                            //pw: password
                            //adm: admin
                            //
                            debugger;
                            //
                            const selUSR = xoa_usr(mnu, cusE),

                                MCC = [],
                                //
                                lenh = opts.pas[2].find('section[fuck_dat] >span').eq(0),
                                //
                                refM = {
                                    'usr': function (devI, validU) {
                                        var WHE = devI[6], $ID = '', WHU = "";
                                        if (validU != 'all') {
                                            WHU = ' Where ID in($ID)';
                                            WHE += ' Where pin in($ID)';
                                            $ID = "ID='" + validU + "';";
                                            //devI[6] + ';' + refM[mnu] + (!cusE ? '' : ';Where pin in(' + selUSR[devI[0]].join(',') + ')')
                                        };
                                        return [lenh.attr('usr')//'%s.$DG ZKDB.db "Delete from fptemplate%s; Delete From USER_INFO%s" &>/dev/null; killall biometric &>/dev/null;'
                                            , $ID, WHE, WHU].join(String.fromCharCode(4));
                                    }
                                    ,
                                    'fp': function (devI, validU) {
                                        //
                                        var WHE = devI[6], $ID = '';
                                        if (validU != 'all') {
                                            WHE += ' Where pin in($ID)';
                                            $ID = "ID='" + validU + "';";
                                            //devI[6] + ';' + refM[mnu] + (!cusE ? '' : ';Where pin in(' + selUSR[devI[0]].join(',') + ')')
                                        };
                                        return [lenh.attr('fp')//'%s.$DG ZKDB.db "Delete from fptemplate%s" &>/dev/null; killall biometric &>/dev/null;'
                                            , $ID, WHE].join(String.fromCharCode(4));
                                    }
                                    , 'fa': function () { }
                                    , 'ca': function (devI, validU) {
                                        //debugger;
                                        var WHE = "Password=''", $ID = '', WHU = "";
                                        //
                                        if (mnu == 'ca') WHE = "Main_Card=''";
                                        if (mnu == 'adm') WHE = "Privilege=0";
                                        //
                                        if (validU != 'all') {
                                            WHU = ' Where ID in($ID)';
                                            $ID = "ID='" + validU + "';";
                                            //devI[6] + ';' + refM[mnu] + (!cusE ? '' : ';Where pin in(' + selUSR[devI[0]].join(',') + ')')
                                        };
                                        //
                                        //WHE = '';
                                        //return ['%s.$DG ZKDB.db "Select * From USER_INFO%s%s" &>/dev/null;', $ID, WHE, WHU].join(String.fromCharCode(4));
                                        //
                                        return [lenh.attr('ca')//'%s.$DG ZKDB.db "Update USER_INFO Set %s%s" &>/dev/null;'
                                            , $ID, devI[6] + String.fromCharCode(31) + WHE, WHU].join(String.fromCharCode(4));
                                    }
                                };
                            //
                            //
                            refM.pw = refM['ca'];
                            refM.adm = refM['ca'];
                            //

                            //
                            const _DEV = DA[2].filter(function (dev) {
                                //
                                //debugger;
                                //
                                const isM = !!selUSR[dev.id] && selUSR[dev.id].length > 0; //multiDEV.indexOf(dev.id) > -1;
                                if (isM) {

                                    const devI = DA[3][Math.abs(parseInt(dev.id))];

                                    MCC.push([

                                        devI[0],

                                       refM[mnu](devI, selUSR[devI[0]].join(','))

                                    ])
                                };
                                //
                                return isM;
                            });
                            //return;
                            //
                            if (_DEV.length == 0) return;
                            //
                            //
                            sum_ui.css('overflow', 'hidden');
                            prof.css('padding-bottom', '1rem');/*mb-3*/
                            //
                            //
                            const internetConection = opts.pas[1].find("internetConection"),
                                    popc = opts.pas[1].find('.modal-content').removeClass('container_x_y'),//shadow border
                                    is2_tg9 = opts.impSCR.hasClass('chat--show');

                            prof.addClass('khoacur');
                            //

                            //
                            //
                            //
                            SCR_effect(popc, prof,

                                is2_tg9 ? opts.impSCR : opts.impSCR.prev()

                                , ['addClass', 'chat--show'], ['removeClass', 'chat--show'], null, { 'height': 'auto', 'transform': 'rotateX(40deg) scale(0.7) translateY(-50px)', 'overflow': 'hidden' });

                            //
                            opts.pas[1].off('DOWN_ATTLOG_END').one('DOWN_ATTLOG_END', function (evt, usr) {
                                //
                                //return;
                                //debugger;

                                scr_OPT['el'].removeData();
                                //
                                //return;
                                //
                                prof.hide().removeClass('khoacur user-profile--show');//chuan bi cho user-profile user-profile--large
                                //
                                opts.pas[1].off('DOWN_ATTLOG_END').trigger('DOWN_ATTLOG_END_USR', [usr]);
                                //
                                //debugger;
                                //
                                opts.impSCR.trigger('PNL_THONGKE_SL', ['1', _DEV]);
                                //
                                setTimeout(function () {
                                    //
                                    //prof.slideUp('slow').removeClass('khoacur');
                                    internetConection.slideUp();
                                    gloEVTs.giaidoan2.fnXX.getOPT('online_signal').stop();
                                    //
                                }, 300);
                                //
                                //
                                SCR_effect(popc,

                                    opts.impSCR.prev()

                                    , prof, ['addClass', 'chat--show'], ['removeClass', 'chat--show'], function () {
                                        //
                                        //
                                        RELEASE_DAT_EVT();
                                    }
                                    ,

                                    { 'height': 'auto', 'transform': 'rotateX(41deg) scale(0.7) translateY(-50px)', 'overflow': 'hidden' });
                                //
                                //
                                prof[0].style.removeProperty('padding-bottom');/*mb-3*/
                                //
                            });
                            //
                            //
                            gloEVTs.giaidoan2.fnXX = opts.fnXX;//restore 
                            //
                            const testD = [null,//cntSEL_U

                                            MCC]

                                        , scr_OPT = gloEVTs.giaidoan2.fnXX.getOPT();

                            //
                            scr_OPT.ignoreCLEAN = "1";//keep annimation loading ...
                            internetConection.find('.loader_conn').empty()
                                .append('<i class="fa fa-times text-danger" style="position:absolute;font-size:48px;margin-top:-20px;right:-10px;"></i>')
                            [0].style.setProperty('background', '#ffc107', 'important');

                            //
                            scr_OPT['el'].data('__bk_res', {
                                'sem': testD
                                //, "tok": "9HmxhBSVIZDBpQbPFaQYShmLi1IxIn1N+SO+ZfhQKC9GdYzU6NT8hmhsk7gZetCuj3hlFMlVStu+AVCxmaGXDG5mEi2boG988pXVn9CRiuJI3qr1Ehcuw1eBdqRmKGQB8nxqnPAYEq5TJWeY6zeHVPc0p+caC2IbOrtN425FLsP+AgmCYzdvbpD/bIZjbMFmP67ClMbDdR4ADbECvLpqxw=="
                            });
                            //
                            //
                            //
                            //debugger;
                            //popHWND.trigger('shown.bs.modal');
                            gloEVTs.giaidoan2.fnXX.initWOK_JOB(_DEV/*ko truyen vao lst ...*/);
                            //
                            //
                            //
                            setTimeout(function () {
                                //
                                internetConection.css({ 'z-index': '111111' }).slideDown(function () {
                                    if (is2_tg9) {
                                        opts.impSCR.removeClass('chat--show').prev().removeClass('d-none');
                                    };
                                    gloEVTs.giaidoan2.fnXX.getOPT('online_signal').start();
                                });
                                //
                            }, 100);
                            //
                            //
                            //helloguy.css('display', '');
                        }
                        ,
                        del_s1 = function (e1, cusE) {
                            //
                            //debugger;

                            if (!cusE && ['span', 'i'].indexOf(e1.target.tagName.toLowerCase()) == -1) return;

                            srclocked(true);

                            const mnu = e1.currentTarget.getAttribute('mnu');
            
                            //
                            devDlg(1, _La$N('js_001_27', aLAN) + '.. -> ' + (e1 ? $(e1.currentTarget).find('[data-lang]').text() : 'DAME YOU') + '?'
                                , null, {
                                    cb: function (a) {
                                        //
                                        srclocked(false);
                                        //
                                    }
                                }).show().done(function (rst, usrINPUT) {
                                    if (rst == 1) {
                                        //
                                        //srclocked(true);
                                        debugger;
                                        //
                                        setTimeout(function () {
                                            del_s2(mnu, cusE);
                                        }, (window['DevExpress'] ? 100 : 0));
                                        //
                                    };
                                });
                        };
                        //
                        col2.find('div[cmd_del_usr]').off('click').on('click', '[mnu]', del_s1);
                        //
                    };
                    //
                    //
                    if (multiDEV.length > 0) {
                        //
                        const _inf2 = lst_thongbao.clone();

                        pagesz_here.append([$('<span class="text-warning" style="position:absolute;margin-top:-20px;font-size:30px;left:18px;"><i class="ti-angle-double-up"></i><i class="ti-alert"></i><span>'), _inf2]);

                        _inf2.css('display', '').removeClass().addClass('m-0').find('.card-body').addClass("p-0").find('[inf="2"]').removeClass('d-none').prev().addClass('d-none');
                        //
                        const chkFUK = 'sel_all_device',

                        sel_all_device = col0.find('#' + chkFUK),

                        chkDOG = 'del_all_device',

                        lst_grp0 = sel_all_device.closest('.list-group'),

                        lst_grp0_it = lst_grp0.children().last().remove()[0].outerHTML;

                        sel_all_device.attr('id', chkDOG);
                        sel_all_device.next().attr('for', chkDOG)
                            .next().next()/* tag b */.html(multiDEV.length);
                        //
                        //
                        for (var w = 0; w < multiDEV.length; w++) {

                            if (multiCNT[w][0] == 0) continue;//neu so luong user  = 0 

                            const devI = DA[3][Math.abs(parseInt(multiDEV[w]))],

                                z = multiCNT[w][0],//so luong user

                                newIT = $(lst_grp0_it),
                                na = 'dume_' + devI[0] /*id mcc*/ + "_" + devI[6] /*finger version*/ + "_" + new Date().getTime(),
                                lbl = newIT.find('label').html('<span>' + devI[1] + ' (</span><b>' + z + '</b>)').attr('for', na);
                            //
                            lbl.prev().attr('id', na);
                            lbl.prev().attr('na', devI[1]);//ten may cham cong
                            lbl.next().attr('mnu', na);//dung de check html khi click.bs.dropdown.
                            //

                            lst_grp0.append(newIT);
                            //
                        };
                        //
                        //
                        lst_grp0.find('.list-group-item .btn').remove();//bo nut dropdown phia sau.
                        //
                        //
                        col0.off('change').on('change', 'input[type="checkbox"]', function () {

                            if (this.id == chkDOG) {
                                //
                                debugger;

                                const sCK = $(this).is(":checked");
                                //
                                sel_all_device.closest('.clip-check').removeClass('tri-state');
                                //
                                const chk = lst_grp0.find('input[type="checkbox"]:not(#del_all_device)');

                                chk.prop("checked", sCK);

                                if (sCK) {
                                    __fn([]);
                                } else {
                                    __fn(chk.map(function (x, it) {
                                        return parseInt(it.id.split('_')[1]);
                                    }).toArray());
                                }
                                //
                                //Upload_FUK[(sCK ? 'remove' : 'add') + 'Class']('invisible');
                                ////
                                ////debugger;
                                ////
                                //cntSEL_D = sCK ? DA[0].map(function (it, idx) {
                                //    return it[0].toString();
                                //}, []) : [];
                                //
                            } else {
                                debugger;

                                const chk = lst_grp0.find('input[type="checkbox"]:not(#del_all_device):checked');
                                sel_all_device.prop("checked", chk.length > 0);
                                //
                                const uchk = lst_grp0.find('input[type="checkbox"]:not(#del_all_device):not(:checked)');
                                //
                                sel_all_device.closest('.clip-check')[(uchk.length > 0 ? 'add' : 'remove') + 'Class']('tri-state');
                                //
                                __fn(uchk.map(function (x, it) {
                                    return parseInt(it.id.split('_')[1]);
                                }).toArray());
                                //
                            };

                        }).removeClass().addClass('col-md-4');
                        //
                        //
                    } else {
                        col0.addClass('d-none').find('.panel').addClass('d-none');//.remove();//col-md-3
                    };

                    //

                    frm_chung.__viewMOD = null;

                    //
                    //
                    //
                    //
                    //frm_chung.prev().html('<h3 class="title"><i class="ti-user"></i><span>Tong: 5</span></h3>');


                    col2.off('click').on('click', '.btn', function (e1, p1) {

                        const BTN = $(e1.currentTarget);

                        //debugger;

                        if (BTN.hasClass('shownhanvien')) {

                            isShowDETAIL = 1;

                            frm_chung.prev().html('<h3 class="title"><i class="ti-user"></i><span>Tong: 5</span></h3>');

                            sum_ui.fadeOut('fast', function (e2) {

                                col1.removeClass('d-none');

                                col0.removeClass().addClass('col-md-3');

                                BTN.addClass('d-none').next().removeClass('d-none');

                                col2.appendTo(col1).removeClass().addClass("col-12 col-md-10 px-0 mb-4 mx-auto");
                                //
                                //
                                const panel = col2.find('.panel').addClass('d-none');
                                if (ki === '-3') {
                                    panel.prev().addClass('d-none');
                                    if (p1 === '-3') {//sel emp sync
                                        panel.next().removeClass('d-none');//show nut show user
                                    };
                                };
                                //
                                sum_ui.fadeIn();
                                //
                                //
                                debugger;
                                //
                                if (!SHOW_EMP_LST.loaded) {

                                    SHOW_EMP_LST.loaded = SHOW_EMP_LST(e1);

                                    

                                    //col3.find('> div > .list-group:last-child').remove('d-none').insertBefore(downALL);

                                } else {
                                    //
                                    SHOW_EMP_LST.loaded[0]();
                                    //
                                    //hide page control insert to col-3 
                                    SHOW_EMP_LST.loaded[1].removeClass('d-none');
                                    //
                                };
                                //
                            });
                            //
                        } else if (BTN.hasClass('hidenhanvien')) {

                            isShowDETAIL = 2;

                            sum_ui.fadeOut('fast', function (e2) {
                                //
                                selU.addClass('d-none');
                                //
                                //hide page control insert to col-3 
                                if (SHOW_EMP_LST.loaded) SHOW_EMP_LST.loaded[1].addClass('d-none');
                                //
                                col2.insertAfter(col1).removeClass().addClass("col-md-8 mx-auto");

                                const panel = col2.find('.panel');
                                if (ki === '-3') {
                                    //debugger;
                                    if (p1 === '-3') {//sel emp sync
                                        panel.next().addClass('d-none');//bo nut show user
                                        panel.prev().find('[thoat_usr_hsnv]').removeClass('d-none');
                                    };
                                    __mnu.pb_cv.sumUSR_EMP();
                                    panel.prev().removeClass('d-none');
                                } else {
                                    panel.removeClass('d-none');
                                };
                                //
                                //frm_chung.prev().html('<h3 class="title"><i class="ti-user"></i><span>Tong: 5</span></h3>');
                                //
                                col1.addClass('d-none');
                                //
                                if (frm_chung.__viewMOD) {
                                    frm_chung.__viewMOD.removeClass('d-none');
                                    frm_chung.__viewMOD = null;//reset
                                    BTN.parent().next().removeClass('d-none');
                                };
                                //
                                col2.removeClass().addClass('col-md-8 mx-auto');
                                BTN.addClass('d-none').prev().removeClass('d-none');
                                sum_ui.fadeIn();
                                //
                            });//

                        } else if (BTN.hasClass('chitiet_1')) {
                            //
                            const H3 = BTN.closest('h3').addClass('d-none');
                            frm_chung.__viewMOD = H3;
                            //
                            sum_ui.fadeOut('fast', function (e2) {
                                //
                                H3.prev().addClass('d-none')//menu for all
                                    .prev().find('.shownhanvien').addClass('d-none').next().removeClass('d-none');
                                //
                                frm_chung.prev().find('h3.title').html(H3.html()).find('.chitiet_1').remove();
                                //
                                col1.removeClass('d-none');
                                col2[0].classList = 'col-md-3';
                                //
                                //$(e1.currentTarget).addClass('d-none').next().removeClass('d-none');
                                sum_ui.fadeIn();
                                //
                            });
                            //
                        }
                    });



                    //
                    //debugger;
                    //
                    profile__wrapper.prev().remove(); //nut close default cua chat demo

                    $('<a href="#" class="user-profile__close d-flex dume_invert" style="left: 20px;justify-content:center;align-items: center;border-radius: 50%;padding: 20px;background-color: rgba(191, 191, 191, 0.3);"><i class="ti-close"></i></a>')
                   .insertBefore(
                       //
                       pageTIT.removeClass('d-none').addClass("p-2").find('h3').addClass('my-2 pl-2').html(

                            elEVT ? $(elEVT.currentTarget).find('[data-lang]').text() : 'DAME YOU'

                        )
                       //
                    );
                    //
                    //
                    //
                    pageTIT.prependTo(profile__wrapper);
                    //
                    //
                    prof.show();
                    //
                    setTimeout(function () {

                        prof.addClass('user-profile--show').one('RELEASE_DAT_EVT', RELEASE_DAT_EVT);//chuan bi cho user-profile user-profile--large

                        srclocked(false);

                    }, 100);
                }

                ,

                pb_cv: function (sync_map) {
                    //      
                    debugger;

                    const def = $.Deferred();
                    //
                    if (!__mnu.pb_cv.__slet) {

                        opts.$mainO.svrDAT({

                            uri: '/api/headermaster', "act": 'GET', 'qry': 'jdat'//dung chung voi employees

                        }).done(function (v1) {
                            //clone
                            //tabs[0]._dat = JSON.stringify(v1.secs || []);
                            //tabs[1]._dat = JSON.stringify(v1.poss || []);
                            //
                            //debugger;
                            //
                            const slet = sync_map.find('[def_sec_pos] select');

                            if (v1.gender) {
                                //</i> fa fa-venus
                                for (var w = v1.gender.length - 1 ; w > -1; w--) {
                                    slet.eq(0)[0].innerHTML += '<option value="' + v1.gender[w].id + '">' + v1.gender[w].dis + '</option>';
                                };
                            };

                            //debugger;
                            if (v1.secs) {
                                for (var w = 0; w < v1.secs.length; w++) {
                                    slet.eq(1)[0].innerHTML += '<option value="' + v1.secs[w].id + '">' + v1.secs[w].dis + '</option>';
                                };
                            };

                            if (v1.poss) {
                                for (var w = 0; w < v1.poss.length; w++) {
                                    slet.eq(2)[0].innerHTML += '<option value="' + v1.poss[w].id + '">' + v1.poss[w].dis + '</option>';
                                };
                            };
                            //

                            __mnu.pb_cv.__slet = slet
                            def.resolve(__mnu.pb_cv.__slet);
                            //
                        });
                        //
                        //
                        return def.promise();
                        //
                    } else {
                        return def.resolve(__mnu.pb_cv.__slet);
                    };
                }

                ,

                dongbo_hsnv: function (profile__wrapper, frm_chung, col0, col1, col2) {

                    //frm_chung.addClass('d-none');
                    //div.dongbo_hsnv
                    const sync_map = frm_chung.next().removeClass('d-none').prependTo(col2),
                        fukU_E = [];
                    //
                    __mnu.pb_cv.makD = function (d) {
                        //debugger;
                        if (typeof d === 'string' || d instanceof String) {
                            d = new Date(d);
                        };
                        return d.toISOString().slice(0, 10);
                    };

                    __mnu.pb_cv.dVALID = function (ev) {
                        const d1 = (new Date(ev.target.value)).getTime(),
                                  d2 = new Date('1970-1-1').getTime(),
                                    d3 = new Date('2099-1-1').getTime();
                        //
                        if (isNaN(d1) || (d1 < d2 || d1 > d3)) {
                            //debugger;
                            ev.target.value = ev.target.dataset.default;
                        };
                    };

                    __mnu.pb_cv.sumUSR_EMP = function (ae) {
                        //
                        debugger;
                        //
                        if (!ae) {
                            ae = __mnu.pb_cv.ae;
                        } else {
                            __mnu.pb_cv.ae = ae;
                        };
                        //
                        const U = [];
                        sync_map.trigger('c$b', ['getU', U]);
                        //
                        fukU_E.length = 0;//reset
                        //
                        const c = U.reduce(function (rst, it) {
                            if (rst.indexOf(it[2]) == -1) {
                                rst.push(it[2]);
                            };
                            //debugger;
                            return rst;
                        }, []),
                            usrEL = sync_map.find('[usr_cnt]').text(c.length),
                            empEL = sync_map.find('[emp_cnt]').text(ae.length),
                            usr_emp_EL = sync_map.find('[usr_emp_cnt]'),
                            usr_emp_cnt = [];
                        //
                        //
                        for (var w = 0; w < ae.length; w++) {
                            if (c.indexOf(ae[w].acno.toString()) > -1) {
                                usr_emp_cnt.push(ae[w].acno.toString());
                            };
                        };
                        //
                        //
                        fukU_E[0] = usr_emp_cnt.length;
                        fukU_E[1] = c.length - usr_emp_cnt.length;
                        fukU_E[2] = ae.length - usr_emp_cnt.length;
                        //
                        //
                        usr_emp_EL.text(usr_emp_cnt.length);
                        //
                        srclocked(false);
                        //
                    };


                    sync_map.next().addClass("d-none");

                    col2.off('click').on('click', '.btn', function (e1) {
                        sync_map.trigger('c$b', [e1]);
                    });

                    sync_map.on('onSync_map', function (e, p1, p2, p3) {
                        //
                        srclocked(true);
                        //
                        __mnu.pb_cv(sync_map).done(function (slet) {
                            //
                            const NGA = sync_map.find('input[type="date"]'),
                                imp_O = { 'ins': '1', 'upt': '1', 'del': '0', 'use': '1' };
                            //
                            //
                            NGA.eq(0).attr('value', __mnu.pb_cv.makD("2000-01-01"));
                            NGA.eq(0).attr('data-default', __mnu.pb_cv.makD("2000-01-01"));
                            //
                            NGA.eq(1).attr('value', __mnu.pb_cv.makD(new Date()));
                            NGA.eq(1).attr('data-default', __mnu.pb_cv.makD(new Date()));
                            //
                            //
                            devDlg(1, ''//_La$N('js_001_27', aLAN) + '.. -> ' //+ $(e.currentTarget).find('[data-lang]').text() + '?'

                                + slet.eq(1).closest('.row').parent().html()

                                //+ sync_map.find('[usr_hsnv]').clone().removeClass('d-none').addClass('mx-0').removeAttr('style')[0].outerHTML

                                , null, {
                                    cb: function (a) {
                                        //
                                        const bdy = a.find('.modal-dialog').removeClass('modal-sm').addClass('pu_fuk_mobi')
                                            .find('.modal-body').addClass('pt-0'),
                                            usr_hsnv = bdy.find("[usr_hsnv]")
                                            ,
                                            ck = usr_hsnv.find('select[imp_opt]').off('change').on('change', function (c) {
                                                const op = c.currentTarget.getAttribute('imp_opt'),
                                                    va = c.currentTarget.value,
                                                    pa = $(c.currentTarget).parent().css('text-decoration', 'none');
                                                //
                                                imp_O[op] = va;
                                                if (op == 'ins') {
                                                    if (va == '1') {
                                                        pa.removeClass('text-secondary').addClass('text-success');
                                                    } else {
                                                        pa.removeClass('text-success').addClass('text-secondary').css('text-decoration', 'line-through');
                                                    };
                                                } else if (op == 'upt') {
                                                    pa.removeClass('text-secondary text-danger text-info');
                                                    if (va == '1') {
                                                        pa.addClass('text-info');
                                                    } else if (va == '2') {
                                                        pa.addClass('text-danger');
                                                    } else {
                                                        pa.addClass('text-secondary').css('text-decoration', 'line-through');
                                                    };
                                                } else if (op == 'del') {
                                                    if (va == '1') {
                                                        pa.removeClass('text-secondary').addClass('text-danger');
                                                    } else {
                                                        pa.removeClass('text-danger').addClass('text-secondary').css('text-decoration', 'line-through');
                                                    };
                                                }
                                            });
                                        //
                                        usr_hsnv.prev().find("[show_adv]").off('click').on('click', function (e) {
                                            //
                                            const me = $(e.currentTarget).addClass('invisible');
                                            //
                                            ck.each(function (idx, sl) {
                                                //debugger;
                                                $(sl).prev().text(fukU_E[idx]);

                                            });
                                            //
                                            usr_hsnv.slideDown(function () {
                                                imp_O['use'] = '2';
                                                me.prev().toggleClass('d-flex  d-none').off('click').on('click', function (e1) {
                                                    usr_hsnv.slideUp();
                                                    imp_O['use'] = '1';
                                                    $(e1.currentTarget).toggleClass('d-flex  d-none').next().removeClass('invisible');
                                                });
                                            });
                                            //
                                        });

                                        bdy.find('input[type="date"]').off("change").on('change', __mnu.pb_cv.dVALID);

                                        srclocked(false);
                                        //debugger;
                                        //
                                    }
                                , isBS: "1"//buoc dung bootstrap

                                }).show().done(function (rst, usrINPUT) {
                                    //
                                    debugger;
                                    //
                                    if (rst == 1) {
                                        //alert(cusE);
                                        srclocked(true);
                                        //
                                        const U = [], sec = [1], pos = [2]//lot san kind cua master
                                            , dburl = '/api/empprofile';
                                        //
                                        //
                                        sync_map.trigger('c$b', ['getU', U]);
                                        //
                                        const nDB = U.map(function (d, i) {
                                            //
                                            //
                                            const defE = {
                                                'acno': d[2],
                                                'birthday': "2000-02-14T00:00:00.000Z",
                                                'empcode': d[2],
                                                'gender': 1,//nam
                                                'hireday': "2021-02-23T00:00:00.000Z",
                                                'ho': "att",
                                                'id': i + 1,
                                                'pid': 0,
                                                //'secid': usrINPUT.eq(0).val(),
                                                //'posid': usrINPUT.eq(1).val(),
                                                'ten': d[4] ? d[4] : d[2],
                                                'marital': 10//single
                                            };
                                            //
                                            //
                                            if (typeof d[1] === 'string' || d[1] instanceof String) {
                                                for (var w = 0; w < usrINPUT.length; w++) {
                                                    defE[usrINPUT[w].getAttribute('rst_el')] = usrINPUT[w].value;
                                                };
                                            } else {
                                                for (var va in d[1]) {
                                                    if (d[1].hasOwnProperty(va)) {
                                                        defE[va] = d[1][va];
                                                    };
                                                };
                                            };

                                            if (defE.gender) defE.gender = parseInt(defE.gender);
                                            if (defE.secid) defE.secid = parseInt(defE.secid);
                                            if (defE.posid) defE.posid = parseInt(defE.posid);

                                            return defE;

                                        })
                                        ,

                                        reLOA = function (pa) {
                                            setTimeout(function () {

                                                //debugger;

                                                //schedule load lai tabpage
                                                admin$.semiLOD.push(opts._tabId);
                                                //
                                                //
                                                elTAB.find('.chrome-tab-close').each(function (x, dume) {
                                                    dume.click();
                                                });
                                                //
                                                dbXLSX.reset_db();
                                                //
                                                //dong luon form.
                                                opts.MNU.closest('.popuphwnd').modal('hide');
                                                //
                                                //
                                                toastMsg(_La$N('js_007_34', aLAN), 'success');
                                                //
                                            }, 100)

                                        }
                                        ,

                                        save_db = function (dE) {
                                            //debugger;
                                            //return;
                                            if (!dE) {
                                                //
                                                devDlg(0, sync_map.find('[ngonngu]:eq(0)').text()).show();
                                                //
                                                srclocked(false);
                                                return;
                                            };

                                            //
                                            opts.$mainO.svrDAT({

                                                "act": 'IMPORT', "tabId": opts._tabId, 'tokin': tabglobalJS['tokin'], uri: dburl, dat: JSON.stringify(dE),
                                                typHIS: 4/*4, mas: JSON.stringify([sec, pos])*/

                                            }).done(reLOA).fail(reLOA);
                                            //
                                        };

                                        //debugger;

                                        if (imp_O['use'] == '2') {//update option
                                            //
                                            __mnu.lod_nv({}).done(function (ae) {

                                                save_db(__mnu.imp_cus_fuk(ae, nDB, imp_O));

                                            });
                                        } else {

                                            save_db(nDB);

                                        };

                                    };
                                });

                        });

                    });
                    //
                    //sum circle user - emp
                    __mnu.lod_nv({ "qry": ["id", "acno", "offdate"] }).done(__mnu.pb_cv.sumUSR_EMP);
                    //
                    return sync_map;

                }
                ,

                imp_cus_fuk: function (oldE, nDB, imp_O) {
                    //
                    //debugger;
                    //
                    var isCHG = 1;
                    //
                    const ins = [], upt = [], del = [];
                    //
                    for (var w = 0 ; w < nDB.length ; w++) {
                        //
                        for (var z = 0; z < oldE.length; z++) {
                            //
                            if (nDB[w].acno == oldE[z].acno) {
                                //
                                upt.push(nDB[w].acno);
                                //
                                break;
                            };
                        };
                        //
                    };
                    //
                    //lay nhung old NV ko co trong tap insert, update
                    if (imp_O['del'] == '1') {//Delete
                        for (var w = 0; w < oldE.length; w++) {
                            if (upt.indexOf(oldE[w].acno) == -1) {
                                del.push(oldE[w].acno);
                                //oldE.splice(w, 1);
                            };
                        };
                    };
                    //
                    //lay nhung nv trung usr-emp, can delete
                    if (upt.length > 0) {
                        //
                        //debugger;
                        //
                        if (imp_O['upt'] == '2') {//delete
                            //
                            if (imp_O['del'] == '1') {//Delete
                                del.push.apply(del, upt);
                            };
                            upt.length = 0;//reset.
                            //
                        } else if (imp_O['upt'] == '1') {//update thi merge nDB vao oldE
                            //
                            for (var w = oldE.length - 1; w > -1 ; w--) {
                                if (upt.indexOf(oldE[w].acno) > -1) {
                                    for (var z = nDB.length - 1; z > -1; z--) {
                                        if (oldE[w].acno == nDB[z].acno) {
                                            oldE[w] = $.extend({}, oldE[w], nDB[z]); // update new E vao old E, va gan vao old E
                                            isCHG = 2;//co thay doi
                                            nDB.splice(z, 1);//remove new ra
                                            break;
                                        };
                                    };
                                };
                            };
                        };
                    };
                    //
                    //delete oldE
                    var maxID = 0;
                    for (var w = oldE.length - 1; w > -1 ; w--) {
                        if (del.indexOf(oldE[w].acno) > -1) {
                            oldE.splice(w, 1);
                            isCHG = 2;//co thay doi
                        } else {
                            if (oldE[w].id > maxID) maxID = oldE[w].id;
                        };
                    };
                    //
                    //
                    if (imp_O['ins'] == '1') {
                        //get max id from oldE
                        for (var w = nDB.length - 1; w > -1 ; w--) {
                            if (upt.indexOf(nDB[w].acno) == -1) {
                                maxID += 1;
                                nDB[w].id = maxID;
                                oldE.push(nDB[w]);
                                isCHG = 2;//co thay doi
                            };
                        };
                    };
                    //
                    //
                    return isCHG === 2 ? oldE : null;
                    //
                }
                ,

                lod_nv: function (qry) {
                    //
                    const def = $.Deferred();
                    //
                    opts.$mainO.svrDAT($.extend({ uri: '/api/empprofile', "act": 'SEL' }, qry)).then(function (v1) {
                        //
                        def.resolve(v1[0]);
                        //
                    }, function (error) {
                        //
                        def.resolve([]);
                        //
                    });
                    //
                    return def.promise();
                    //
                }
                ,
                act_menu: function (me) {
                    //
                    const gmnuFUK = me.getAttribute('gmnu');
                    //
                    if (opts.MNU.__gmnu && opts.MNU.__gmnu[0] == gmnuFUK) {
                        const hideTIM = opts.MNU.__gmnu = opts.MNU.__gmnu[1];
                        delete opts.MNU.__gmnu;
                        if (new Date().getTime() - hideTIM < 500) {
                            //lan hide truoc nho hon 1 second
                            return;
                        };
                    };
                    //
                    delete opts.MNU.__gmnu;
                    //
                    //debugger;

                    const dox = opts.MNU.data()['bs.popover'];
                    var fukPO = 1;
                    //
                    if (dox._popper) {
                        //debugger;
                        //khi select item, fixed width lai, gio release no ra
                        dox._popper.popper.style.minWidth = "";
                        //
                        //custom style khi delete custom user ser add vao color-inherit
                        $(dox.tip).find('.popover-body').removeAttr('style');
                        dox.tip.style.removeProperty('max-width');
                        //
                        //if (dox._popper.popper.classList.contains('show')) {//&& cont === this.getAttribute('pmnu')
                        //    opts.MNU.popover('hide');
                        //    //
                        //    //if (opts.MNU.__gmnu != me.getAttribute('gmnu')) {
                        //    //    setTimeout(function () {
                        //    //        act_menu(me);
                        //    //    }, 100);
                        //    //};
                        //    return;
                        //}
                    } else {
                        fukPO = 2;
                    };
                    //
                    //debugger;
                    //
                    me.setAttribute('data-original-title',

                        me.hasAttribute('no-title') ? '' :

                        "<div class='d-flex align-items-center'><div style='flex:1;text-align: center;'>" + me.getAttribute('title') +"</div>" +
                         '<a type="button" class="ti-close dume_invert  ml-auto"  href="javascript:(function(){$(document.body).focus();})()" style="padding: 10px;border-radius: 50%;background-color: rgba(191, 191, 191, 0.3);"></a>' + "</div>"



                    );


                    dox.element = me;
                    //
                    //
                    //li.attr('tabindex', "0");
                    //li.attr('data-toggle', "popover");
                    //li.attr('data-trigger', "focus");
                    ////
                    //
                    //
                    opts.MNU.popover('toggle');
                    //
                    if (fukPO == 2) {
                        //sau khi show moi co tip
                        $(dox.tip).addClass('popover_theme').css({ 'z-index': '9999' }).attr('tabindex', '0')
                            .off('blur').on("blur", function (e) {
                                //
                                const __gmnu = dox.element.getAttribute('gmnu');
                                //
                                opts.MNU.__gmnu = [__gmnu, new Date().getTime()];
                                console.log(new Date().getTime(), 'blur: ', opts.MNU.__gmnu);
                                //
                                opts.MNU.popover('hide');
                                //
                            }).focus();

                    } else {

                        dox.tip.focus();

                    };
                    //
                    //
                }
                ,

                get_fp_tmpl: function (e, isBS, lstT, hedU, bkVER) {
                    //debugger;
                    srclocked(true);
                    //
                    devDlg(1, _La$N('js_001_27', aLAN) + '.. -> ' + $(e.currentTarget).find('[data-lang]').text() + '?' +

                        (isBS === "1" ? '<div class="form-group  mb-0 mt-3"><input type="text" placeholder="' + (_La$N('js_009U$R|5|2', opts.lan) ? _La$N('js_009U$R|5|2', opts.lan) : 'file name') + '"  class="form-control"></div>' : "")

                        , null, {
                            cb: function (a) {
                                //
                                srclocked(false);
                                //
                            }
                        , isBS: isBS//buoc dung bootstrap

                        }).show().done(function (rst, usrINPUT) {
                            if (rst == 1) {
                                srclocked(true);
                                //
                                __mnu.get_fp_tmpl_job(usrINPUT && usrINPUT.val(), isBS, lstT, hedU, bkVER);
                                //
                            };
                        });
                }

                ,

                get_fp_tmpl_job: function (fiNA, isBS, lstT, hedU, bkVER) {
                    //
                    //debugger;
                    //
                    const oldFRM = opts.pas[1].find('.modal-content'),
                        popHWND = opts.pas[1].closest('.popuphwnd');
                    //
                    const devlst = $('<dulieu sem="' + btoa(JSON.stringify(__mnu.get_fp_tmpl.__dat)) + '" tok=' +

                        (["1"].indexOf(isBS) > -1 ?

                        '"9HmxhBSVIZDBpQbPFaQYShmLi1IxIn1N+SO+ZfhQKC9GdYzU6NT8hmhsk7gZetCuj3hlFMlVStu+AVCxmaGXDG5mEi2boG988pXVn9CRiuJI3qr1Ehcuw1eBdqRmKGQB8nxqnPAYEq5TJWeY6zeHVPc0p+caC2IbOrtN425FLsP+AgmCYzdvbpD/bIZjbMFmP67ClMbDdR4ADbECvLpqxw=="'

                        : '"QXgKqLGXoHPwJnHiwpxvdw=="'

                        ) +
                        '></dulieu>')
                        ,

                        devID = __mnu.get_fp_tmpl.__dat[1].reduce(function (re, it) {
                            re.push(it[0]);
                            return re;
                        }, []);

                    //
                    //debugger;
                    //
                    const loMCC = [];
                    //chi download thiet bi can thiet...
                    devlst.__dbDAT = DA[2].filter(function (it, x) {
                        //debugger;
                        if (it.kind == 101) {
                            const __uuidphone = JSON.parse(it.__uuidphone);
                            loMCC.push([it.wdms/*IP "192.168.1.210"*/, __uuidphone[0], it.serno, it.id]);
                        };
                        return devID.indexOf(it.id.toString()) > -1;
                    });
                    //
                    //
                    //debugger;
                    //
                    if (["1"].indexOf(isBS) == -1) {
                        //
                        //co local connection && global . order by no truoc
                        devlst.__dbDAT.sort(function (a, b) {
                            return a.kind - b.kind;
                        });

                        //return;

                        //debugger;

                        devlst.data('__fn', __mnu.UP_TMPL.bind([

                           (lstT && (typeof lstT === 'string' || lstT instanceof String)) ? lstT : [lstT[0], lstT[1].filter(function (it, y) {

                               //debugger;

                               return lstT[0].indexOf((y + 1).toString()) > -1;

                               //
                           })]

                            , hedU

                            , opts.tmplVER // phai goi cai hien tai vi nodejs chi dap ung 1 phien ban hien tai.

                            , loMCC // co thiet bi local hay k?

                        ]));
                        //
                    };
                    //
                    //
                    const popupATT = gloEVTs.giaidoan2(null, 'hide-tit-hed', devlst)

                            .addClass('invisible')

                            .one('shown.bs.modal', function () {

                                popc.css({ 'transform': 'rotateX(50deg) scale(0.7)' }).addClass('container_x');

                                popf.parent().removeClass('invisible');
                                //
                                oldFRM.addClass('container_x').css({ 'height': 'auto', 'transform': 'rotateX(50deg) scale(0.7)' })
                                //
                            })
                            .one('hidden.bs.modal', function () {
                                //
                                //se lat from lai ... du me cup dien ...
                                //
                                removeStyleProp(oldFRM[0], ["transform", "height"]);
                                //
                            })
                            , popf = popupATT.find('.modal-dialog').addClass(' js_js_att mngusrs down_fp').css({ 'perspective': '600px' })
                            .one('DOWN_ATTLOG_END', function (evt, tFP) {
                                //
                                //return;
                                //debugger;
                                //
                                setTimeout(function () {
                                    //
                                    //
                                    devlst.off(/*all event*/).unbind().removeData();
                                    //
                                    //maychamcong_layout(popupATT.find('.modal-body').children(':first'), devlst);
                                    //

                                    //const dat = '5	2008-09-20 20:04:23	1	0	'|1	0\n5	2008-09-20 20:04:23	1	0	1	0',
                                    //    cof = '{"f":["i","t","b","b","b","b"],"l":592,"e":13,"s":"tab","tf":"YYYY-MM-DD HH:mm:ss","p":"1_attlog.dat","p0":"","p1":"","p2":"","p3":"","p4":"","p5":"","p6":"","p7":"","p8":"","p9":"","minL":"2020-12-31T23:12:20.000Z","maxL":"2021-01-31T07:33:20.000Z"}';

                                    //laZY.frmEL.find('.long-title [type="button"], .trial_opts .upattdat').trigger('click', [[null, { conf: JSON.parse(cof) }, dat]]);

                                }, 100);
                                //
                                //
                                //const end_task = function (e, p1, p2, p3) {

                                popHWND.show();
                                //    popHWND.off('SAVE_FI_END');

                                popupATT.modal('hide');

                                //};
                                //
                                //
                                //debugger;
                                if (["1"].indexOf(isBS) > -1) {
                                    //
                                    //debugger;
                                    //
                                    //popHWND.one('SAVE_FI_END', end_task);
                                    //
                                    //bk device save to file
                                    __mnu.save_tmpl_fi(fiNA, tFP);
                                    //
                                    //
                                } else {

                                    //debugger;
                                    //
                                    //end_task();
                                    //
                                    //*** local connection se ko co clean!!!
                                    if (__mnu.wo_1st_task) __mnu.wo_1st_task.postMessage({ cmd: 'end_up_heavy_tmpl_clean' });

                                    delete __mnu.wo_1st_task;
                                    //
                                    for (var w = 0; w < devID.length; w++) {
                                        if (opts.__UPHIS.indexOf(devID[w]) == -1) {
                                            opts.__UPHIS.push(devID[w]);
                                        };
                                    };
                                    //
                                    //
                                    //debugger;
                                    //
                                    if (w0w['_cordovaNative'] && w0w._cordovaNative.thongtin_app) {

                                        //cap nhat lai so luong user trong wdmo -- > localcon, vi dung lam base tinh byte send to device
                                        //debugger;
                                        const synJ = gloEVTs.giaidoan2.fnXX.___devs;//call back cap nhat datasource.
                                        //
                                        for (var b = 0; b < tFP.length; b++) {
                                            if (tFP[b][1][5] == 'OK') {
                                                for (var w = 0; w < synJ.length; w++) {
                                                    if (tFP[b][1][0] == synJ[w].id) {
                                                        //
                                                        const wdmo = JSON.parse(synJ[w].wdmo), devcap = wdmo[2].split('-');
                                                        //
                                                        devcap[0] = tFP[b][0][4];//update usr userd.
                                                        //
                                                        wdmo[2] = devcap.join('-');
                                                        synJ[w].wdmo = JSON.stringify(wdmo);
                                                        //
                                                        //
                                                    }
                                                };
                                            };
                                        };
                                        //
                                        //
                                        DA[2] = JSON.parse(JSON.stringify(gloEVTs.giaidoan2.fnXX.___devs));//device list
                                        //
                                    };
                                    //
                                };
                                //
                            })
                            , popc = popf.find('.modal-content').css({ 'height': 'auto' });
                    //
                    //
                    popc.find('.modal-header').addClass('d-none').next().addClass('p-0');
                    //
                    popHWND.hide();

                }

                ,

                nativeFILE: function (filename, contentType, base64, pbar) {

                    //debugger;

                    if (!pbar) {
                        pbar = helloguy.show().find('.dx-loadindicator-wrapper').addClass('taii').next()
                        .addClass('progress_exp_excel').html(opts.pas[2].find('section[fuck_tmpl]').html()).find('.progress-bar');
                    };

                    const btxt = pbar.closest('.progress_exp_excel').prev().attr('taiing', 'compressing ... 0%'),
                        xong = function () {

                            btxt.removeClass('taii').removeAttr('taiing')

                            .next().removeClass().empty();

                            helloguy.hide();

                        };

                    //
                    const nativ = __mnu.save_tmpl_fi.__nativ;
                    //
                    //alert(256000 * (nativ[2].toLowerCase() == 'ios' ? 10 : 1));
                    //
                    //debugger;
                    const chunkSize = 256000 * (nativ[2].toLowerCase() == 'ios' ? 10 : 1),//250kb

                        regexChunk = new RegExp('.{1,' + chunkSize + '}', 'g'),

                        mulBLO = base64.match(regexChunk),

                        TOK = gloEVTs.giaidoan2.fnXX.___devs[0].tok,

                        svrI = atob(TOK).split(String.fromCharCode(4)),

                        doBLO = function () {
                            //
                            //debugger;

                            const w = doBLO.atBLO,

                                lenh = ['fuk_tep', 'fuk_sav', filename/*2*/, contentType],

                                perc = 100 * ((w + 1) / mulBLO.length);
                            //
                            //
                            pbar.css("width", perc + '%');
                            btxt.attr('taiing', 'compressing ... ' + parseInt(perc) + '%');
                            //
                            if (w > mulBLO.length - 1) {
                                //
                                toastMsg(_La$N('js_003_ok', aLAN) || "Operation is complete.", 'success', 3000);
                                //
                                //opts.pas[1].closest('.popuphwnd').trigger('SAVE_FI_END', ['OK']);
                                //
                                setTimeout(xong, 300);
                                //
                                return;// xong();
                                //
                            };
                            //
                            //
                            //
                            if (mulBLO.length > 1) {
                                if (w < mulBLO.length - 1) {
                                    lenh[1] += '_s$nd__bl0ck';
                                    lenh[3] = w.toString();
                                } else {
                                    lenh[1] += '_s$nd__fini$h';
                                };
                            };
                            //
                            console.log(new Date().getTime(), 'at block: ', w);
                            //
                            lenh.push(mulBLO[w]);
                            //
                            const p = [[svrI[svrI.length - 2]],

                                TOK,

                                lenh,

                                function (a, m) {

                                    //debugger;

                                    const sRE = a.split(String.fromCharCode(30));

                                    if (sRE[0] == 'OK') {
                                        //
                                        doBLO.atBLO += 1;
                                        //
                                        //setTimeout(doBLO, 300);
                                        window.requestAnimationFrame(doBLO);
                                        //
                                    } else {
                                        //
                                        toastMsg(sRE[1], 'error', 3000);//server nodejs tra ve loi timeout
                                        //opts.pas[1].closest('.popuphwnd').trigger('SAVE_FI_END',['ERR']);
                                        window.requestAnimationFrame(xong);
                                        //
                                    };
                                }];
                            //
                            //debugger;
                            //*** bi loi kickoff neu devcmd -->se debug quyet liet ngay mai ...
                            gloEVTs['elUI_localDEV']('reqoverlay', p);
                        };

                    doBLO.atBLO = 0;


                    console.log(mulBLO.length);

                    doBLO();
                    //
                }

                ,

                save_tmpl_fi: function (fiNA, tFP) {
                    //
                    //debugger;
                    //
                    const U = __mnu.get_fp_tmpl.__dat[0],
                        _id = __mnu.get_fp_tmpl.__dat[1][0];//*** tui nay la ARRAY!
                    //
                    const devI = tFP[0].splice(-1);
                    //
                    _id[2] = devI[0][2];//serial number
                    _id[3] = opts.tmplVER;;//serial number
                    _id[4] = devI[0][4];//more device information .. macaddr, capictiy
                    //

                    //
                    if (U) {
                        //trim result usr in  tFP[0][0];
                        tFP[0][0] = tFP[0][0].filter(function (it, dx) {
                            //debugger;
                            const eU = it.split('|');
                            return it == "" || U.indexOf(eU[0]) > -1;
                        });
                    };
                    //
                    //index cuoi cung se chua id may bk && FP finger version
                    tFP[0][0][tFP[0][0].length - 1] = JSON.stringify(_id);
                    ///
                    tFP[0].push(
                        //user header.
                        btoa(
                            JSON.stringify(DA[1].reduce(function (sel, it) {
                                //
                                //debugger;
                                //
                                //if (it.indexOf(_id[0] + opts.tmplVER.hSEP) == 0) {//device id '|'
                                if (it[0] == _id[0]) {//device id '|'
                                    //
                                    const eU = it[1].slice(0);//clone//it.split(opts.tmplVER.hSEP);//'|'
                                    //
                                    //0: id device 1:ID auto number key 2:User_Pin
                                    if (!U || U.indexOf(eU[0]) > -1) {//compare voi ID auto table USER_INFO
                                        //eU.splice(0, 1);//remove id may cham cong
                                        sel.push(eU);
                                    };
                                };
                                //
                                return sel;
                                //
                            }, [])
                            )
                        )
                    );
                    //
                    //
                    //debugger;
                    tFP[0][0] = btoa(JSON.stringify(tFP[0][0]));
                    //
                    //
                    const filename = (fiNA || "bk_" + new Date().getTime()) + ".dat",
                        contentType = 'text/plain';//'application/octet-stream',

  
                    //
                    if (w0w['_cordovaNative'] ) {

                        //if (__mnu.save_tmpl_fi.__nativ[2].toLowerCase() == 'ios') {

                        //    debugger;

                        //    window.webkit.messageHandlers.readBlob.postMessage(


                        //        new Blob([tFP[0].join(String.fromCharCode(4))/*.utoa()*/], { 'type': contentType })


                        //        );

                        //    return;

      
                        //    //https://stackoverflow.com/questions/64231211/download-and-store-file-using-cordova-ios

                        //    var storageLocation = cordova.file.documentsDirectory;
                        //    ////switch (device.platform) {
                        //    ////    case "Android":
                        //    ////        storageLocation = 'file:///storage/emulated/0/';
                        //    ////        break;
                        //    ////    case "iOS":
                        //    ////        storageLocation = cordova.file.documentsDirectory;
                        //    ////        break;
                        //    ////}
                        //    var folderpath = storageLocation + "Download";
                        //    var DataBlob = new Blob([tFP[0].join(String.fromCharCode(4))/*.utoa()*/], { 'type': contentType });
                        //    //
                        //    debugger;
                        //    //https://stackoverflow.com/questions/9014406/cant-find-var-mobile-applications-directory-for-ios-documents

                        //    //https://stackoverflow.com/questions/69928519/download-a-server-file-generated-via-php-for-wkwebview-ios
                        //    //

                        //    //https://tigi44.github.io/ios/iOS,-Objective-c-FileDownload/#file-download

                        //    window.resolveLocalFileSystemURL(folderpath, function (dir) {

                        //        debugger;

                        //        dir.getFile(filename, {
                        //            create: true
                        //        }, function (file) {
                        //            file.createWriter(function (fileWriter) {

           
                        //                fileWriter.fileName = filename;

                        //                fileWriter.onwriteend = function () {
                        //                    console.log('$  Successful file write... fileEntry.fullPath', folderpath);
                        //                    //alert(fileEntry.fullPath);
                        //                };

                        //                fileWriter.onerror = function (e) {
                        //                    console.error('$ Failed file write: ' + e.toString());
                        //                };

                        //                //fileWriter.write(new Blob(['{}'], { type: 'text/plain' }));


                        //                fileWriter.write(DataBlob);

                        //            }, function (err) {
                        //                console.log(err);
                        //            });
                        //        });
                        //    });


                        //    //var assetURL = "https://raw.githubusercontent.com/hollyschinsky/ios-webview-www/master/README.md";

                        //    //var fileName = "app-data.txt";
                        //    //var fileTransfer = new FileTransfer();
                        //    //console.log("Start file transfer");

                        //    ////The directory to store data
                        //    //var store = cordova.file.dataDirectory;

                        //    //fileTransfer.download(assetURL, storageLocation + "Download/"  + fileName,
                        //    //    function (entry) {
                        //    //        log.value += "File Transfer Success!\n";
                        //    //    },
                        //    //    function (err) {
                        //    //        log.value += "File Transfer Error " + err + "\n";
                        //    //        console.dir(err)
                        //    //    }); https://raw.githubusercontent.com/hollyschinsky/ios-webview-www/master/README.mdraw.githubusercontent.com

                        //    return;

                        //}



                        //debugger;

                        __mnu.nativeFILE(filename, contentType, btoa(tFP[0].join(String.fromCharCode(4))));

                        //
                    } else {

                        const blob = new Blob([tFP[0].join(String.fromCharCode(4))/*.utoa()*/], { 'type': contentType });
                        //debugger;

      

                        if (window.navigator && window.navigator.msSaveOrOpenBlob) {
                            window.navigator.msSaveOrOpenBlob(blob, filename);
                        } else {
                            //
                            var a = document.createElement('a');
                            a.href = window.URL.createObjectURL(blob);
                            a.download = filename;
                            a.click();


                            //var link = document.createElement('a');
                            //link.href = window.URL.createObjectURL(blob);
                            //link.download = "test.pdf";
                            //link.click();

                            //var file = new File([tFP[0].join(String.fromCharCode(4))/*.utoa()*/], filename, { type: 'application/force-download' });

                            //window.open(URL.createObjectURL(file));


                            //opts.pas[1].closest('.popuphwnd').trigger('SAVE_FI_END',['']);


                        };
                    }
                }

                ,

                //UP_TMPL_JOB: function (url, dat, _success) {
                //    //
                //    const content = 'document.querySelector("textarea").value';
                //    const file = new Blob([content], { type: 'text/plain' });

                //    const formData = new FormData();
                //    formData.append("file", file);
                //    formData.append("dume", "this is du me");

                //    $.ajax({
                //        // Your server script to process the upload
                //        url: url,
                //        type: 'POST',
                //        //
                //        // Form data
                //        data: formData,
                //        //
                //        // Tell jQuery not to process data or worry about content-type
                //        // You *must* include these options!
                //        cache: false,
                //        contentType: false,
                //        processData: false,
                //        //
                //        // Custom XMLHttpRequest
                //        xhr: function () {
                //            var myXhr = $.ajaxSettings.xhr();
                //            if (myXhr.upload) {
                //                // For handling the progress of the upload
                //                myXhr.upload.addEventListener('progress', function (e) {
                //                    //debugger;
                //                    if (e.lengthComputable) {
                //                        $('progress').attr({
                //                            value: e.loaded,
                //                            max: e.total,
                //                        });
                //                    }
                //                }, false);
                //            }
                //            return myXhr;
                //        },
                //        success: _success
                //        ,
                //        error: function (xhr, status, error) {
                //            //debugger;
                //            throw new Error("Something went wrong");
                //        }
                //    });
                //}

                //,

                UP_TMPL: function (wo_1st_task, m, c$b) {
                    //
                    //debugger;
                    //
                    const th$a = this;
                    //
                    //debugger;
                    if (m && (typeof m === 'string' || m instanceof String)) {
                        //
                        if (m == 'upload_tmpl_dynjs') {
                            //
                            return (opts.dynjs || ";");// + 'const shared_lstT=' + shared_lstT.toString() + ';';
                            //
                        } if (m == '1st_up_heavy_tmpl_init') {
                            //
                            //truoc khi get cloud template info thi tranh thu post data qua worker...
                            //UP_TMPL.__defferd = m;
                            //
                            //debugger;
                            //
                            console.log('1. 1st_up_heavy_tmpl_init', 'device_user.html');
                            //
                            wo_1st_task.postMessage({

                                cmd: m,

                                dat: th$a

                            });
                            //
                        };
                        //
                        return;
                        //
                    };
                    //
                    //
                    //
                    if (!m || !m[1]) {
                        //throw new Error("Something went wrong");
                        return;
                    };
                    //



                    //return;


                    //
                    const m4 = m[1];
                    //debugger;
                    const adr = [];
                    //
                    //
                    if (m4[3][0] != 'localconn') {
                        adr.push(m4[3][2]);//global service
                    };
                    //
                    //debugger;
                    //
                    //vet local
                    for (var w = 0; w < th$a[3].length; w++) {
                        //adr.push('http://192.168.1.210:11222' + String.fromCharCode(29) + 'localconn');
                        adr.push("http://" + th$a[3][w][0]/*IP addr*/ + ":11222/zk/fin.php" + String.fromCharCode(29) + 'localconn' + String.fromCharCode(29) + th$a[3][w][1]/*__uuidphone*/);
                    };
                    //
                    //m4[3][0] == 'localconn' ? 'localconn' : m4[3][2];//.split(String.fromCharCode(29));
                    //
                    //adr[1] = adr[1].split('_');
                    //adr[1] = "fin";
                    //
                    //
                    //********* update command access device ******************************
                    wo_1st_task.onmessage = function (e) {
                        //
                        //debugger;
                        //
                        const cmd = e.data.cmd.toString().toLowerCase();
                        //
                        switch (cmd) {

                            case 'end_up_heavy_tmpl_init': {

                                //neu package dau tien tu nodejs goi ve thi cho con worker nay phan giai ra template upload.
                                break;
                            }

                            //case '_cordovanative_host_ios': {
                            //    //
                            //    debugger;
                            //    //const NA__VE = w0w['_cordovaNative'];
                            //    //NA__VE.hieu_comjs(['CLIENT_DAT', cmd.dat, "ten_cache"]);//3 cai du phong


                            //    //this.postMessage({ cmd: 'rst_cordovanative_host' });

                            //    __mnu.LOC_IOS(e.data.dat);

                            //    break;
                            //}

                            case 'up_templ_rst': {
                                //
                                //debugger;
                                //
                                if (e.data.hedBlock[0].toString().indexOf('clean') == 0) {
                                    //debugger;
                                    this.postMessage({ cmd: 'fuk_up_heavy_tmpl_close' });
                                    break;
                                };
                                //
                                //
                                //
                                const packINF = this,
                                    dat = e.data.dat,
                                    req = m[4].split('|');

                                //postMessage({ cmd: 'nxt', msg: [req.join('|'), [], []] });//, inf: dMap
                                //debugger;

                                if (c$b) c$b(
                                    m,
                                    e.data.hedBlock,
                                    dat
                                     //"9HmxhBSVIZDBpQbPFaQYShmLi1IxIn1N+SO+ZfhQKC9GdYzU6NT8hmhsk7gZetCuj3hlFMlVStu+AVCxmaGXDG5mEi2boG988pXVn9CRiuJI3qr1Ehcuw1eBdqRmKGQB8nxqnPAYEq5TJWeY6zeHVPc0p+caC2IbOrtN425FLsP+AgmCYzdvbpD/bIZjbMFmP67ClMbDdR4ADbECvLpqxw=="
                                );

                                //truoc khi call nodeJS lan dau tien at device_step2.html , thi trigger ve day =>send template to worker !!!
                                //wo.postMessage({ cmd: 'fuk_heavy_tmpl', dat: m });
                                //
                                //
                                //callback ve loader, run pedding device !


                                break;
                            }
                        };
                        //
                    };//XXX
                    //
                    console.log('2. 1st_up_heavy_tmpl_task', 'device_user.html');


                    //send cloud host infor to worker !!!
                    wo_1st_task.postMessage({ cmd: '1st_up_heavy_tmpl_task', dat: [adr] });

                    //
                    //end se clear file tmp host
                    __mnu.wo_1st_task = wo_1st_task;
                }
                ,

                bk_2_file: function (e, devid) {
                    //debugger;
                    //backup sel usrs
                    //debugger;
                    //
                    if (w0w['_cordovaNative']) {
                        //
                        const thongtin_app=w0w._cordovaNative.thongtin_app,
                             nativ = thongtin_app.__v$r.split('|');
                        //

                        if (!devid) {
                            devid = opts.MNU.__dumeMCC.split('_')[1]; //lay id, va finger print version
                        };
                        //
                        __mnu.save_tmpl_fi.__nativ = nativ;
                        //
                        if (nativ[2].toLowerCase() == 'ios') {
                            //
                            __mnu.get_fp_tmpl(e, "1");
                            //
                            return;
                        };
                        //
                        //
                        //
                        var isLO = null;//default ...
                        for (var w = 0; w < DA[2].length; w++) {
                            if (DA[2][w].id == devid) {
                                isLO = DA[2][w];//
                                break;
                            };
                        };
                        //
                        if (isLO) {

                            const TOK = isLO.tok,

                                svrI = atob(TOK).split(String.fromCharCode(4)),

                                lenh = ['fuk_tep', 'perm', ''],

                                p = [[svrI[svrI.length - 2]],
                                    TOK,
                                    lenh,
                                    function (a, m) {
                                        //
                                        if (!a || a == "1") {//ok
                                            __mnu.get_fp_tmpl(e, "1");
                                        } else {
                                            //hoi xem co xem xet quyen hay k?
                                            debugger;
                                            devDlg(0, _La$N('js_009U$R|10|8', opts.lan) || "Please grant AppHRM permission to access photos, media, and files on your device.").show();
                                        };
                                        //
                                    }
                                ];

                            //
                            //*** bi loi kickoff neu devcmd -->se debug quyet liet ngay mai ...
                            gloEVTs['elUI_localDEV']('reqoverlay', p);
                        };
                        //
                    } else {
                        __mnu.get_fp_tmpl(e, "1");
                    };
                }

            }
            ,

            mobi_UI_END = function () {
                //
                //debugger;
                //
                //hide border arround form
                const PAA = opts.pas[1],
                     //popc = $(this),//ko remove o day, vi form se mat effect ... .removeClass('container_x container_x_y'),
                    __ui = opts.pas[2];
                //
                //
                //search box

                //
                opts.impSCR.find('.chat__infos').addClass('text-right').empty()//.append(dume)
                //
                //alway display nut detail
                .next().find('.chat__details').removeClass("d-xl-none");
                //
                //
                const fukMNU = __ui.find('[tmpl="device_list"]').clone(),
                    fukNAV = __ui.find('div.navx').detach();

                //
                const popHWND = PAA.closest('.popuphwnd').append(__ui);
                //du phong cho dowload template popup over top
                popHWND[0].style.setProperty('z-index', '1500', 'important');
                popHWND.prev()[0].style.setProperty('z-index', '1500', 'important');
                //
                //
                fukMNU.off('click').on('click', 'a', function (e) {
                    //
                    e.preventDefault();
                    e.stopPropagation();
                    //
                    //debugger;
                    const mnu = $(e.currentTarget);
                    switch (mnu.attr('mnu')) {
                        case 'show_dev_lst': {
                            if (mnu.attr('sta') == '0') {
                                mnu.attr('sta', "1");
                                fukNAV.css('display', 'none').prependTo(opts.impSCR.find('.chat__content')).slideDown();
                            } else {
                                mnu.attr('sta', "0");
                                fukNAV.slideUp();
                            };
                            break;
                        }
                        default: {

                            //debugger;

                            if (__mnu.hasOwnProperty(mnu.attr('mnu'))) {
                                __mnu[mnu.attr('mnu')](mnu);
                            } else {
                                //debugger;
                                //trigger event click ve nut sel user .
                                $(opts.MNU.data('bs.popover').element).trigger('__mnu_click', [mnu.attr('mnu'), e]);
                            };
                            break;
                        }
                    };
                    //
                    opts.MNU.popover('hide');
                    $(document).trigger('click');//du me clean popup
                    //
                });
                //
                //debugger;
                //
                opts.MNU = __ui.popover({
                    container: PAA[0],

                    boundary: opts.impSCR.closest('.modal-body')[0], //khi popove button in table horizon scroll, wrong postiion, => set boundary only in 

                    placement: 'bottom',
                    trigger: 'manual',
                    html: true,
                    //title: function (a, b, c) {
                    //    debugger;
                    //    return "<div class='d-flex align-items-center'><i class='ti-light-bulb'></i>" + ' Tuy chon hien thi' + genericCloseBtnHtml + "</div>"
                    //}
                    content: function (a, b, c) {
                        //
                        //debugger;
                        const _mn = fukMNU.find("div[gmnu]").addClass('d-none'),
                            activeMNU = [];
                        //
                        for (var w = 0; w < _mn.length; w++) {
                            if (this.getAttribute('gmnu').toString().indexOf(_mn[w].getAttribute('gmnu').toString()) > -1) {
                                $(_mn[w]).removeClass('d-none');
                                activeMNU.push(w);
                            };
                        };
                        //
                        //select delect user, need dynamic menu sumary fp,fa ... for deleted
                        $(this).trigger('__DYN_MNU', [_mn, activeMNU]);

                        //fukMNU.find('div[gmnu^="' + this.getAttribute('gmnu') + '"]').removeClass('d-none');

                        return fukMNU;
                        //return realchart_opt_tmpl[cont];
                    }
                    //content: '<div class="media"><img src="' + srcpf$ + '/media/images/avatar-8.jpg" class="mr-3" alt="Sample Image"' + fuckIE11 + '><div class="media-body"><h5 class="media-heading">Jhon Carter</h5><p>Excellent Bootstrap popover! I really love it.</p></div></div>'
                });
                //
                //
                //
                //setTimeout(function () {
                //    popc.removeClass('container_x container_x_y');
                //}, 1000);
                //
                //
                //debugger;

                __mnu.FRM_OPT = opts.impSCR.next().addClass('position-absolute')//chuan bi cho user-profile user-profile--large user-profile--show

                    .removeClass('d-none col-md-5 col-lg-4 col-xl-3')

                    .off('click').on('click', '.page-title .user-profile__close', function () {
                        //debugger;
                        srclocked(true);
                        //
                        setTimeout(function () {
                            //
                            opts.impSCR.next().one(tra$Na.g(), function () {//end 'chat--show' annimation.
                                //
                                opts.impSCR.next().trigger('RELEASE_DAT_EVT');
                                opts.impSCR.next().hide();
                                //
                                srclocked(false);
                                //
                            }).removeClass('user-profile--show');
                        }, 100);

                    });
                //
            }

            ,

            after_2_tg9 = function (internetConection) {

                const _global = internetConection.next(),

                     _after_2_tg9 = opts.pas[2].find('.after_2_tg9').css('display', 'block').insertBefore(opts.impSCR),

                     chat__content = _after_2_tg9.find('.chat__content'),

                     _solg = chat__content.find('.card-group span[soluong]'),//soluong nguoi dung

                _fnSHOW = function () {
                    //
                    _after_2_tg9.addClass('chat--show').one(tra$Na.g(), function () {//end 'chat--show' annimation.
                        //
                        //alert('here');
                        mobi_UI_END();
                        //
                        //khi end thi se bind cac menu ...
                        //
                    });
                    //
                    //
                    setTimeout(function () {
                        //remove transform style , bring form normal view
                        if (GetIEVersion() == '11') {
                            _gsC('https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.10.4/polyfill.min.js', 'js', function () {
                                removeStyleProp(popc[0], ["transform", "height", "overflow"]);
                            }, 'polyfill.min.js');
                        } else {
                            removeStyleProp(popc[0], ["transform", "height"]);
                        };
                        //
                    }, 300);
                    //
                    //
                    //debugger;
                    const popc = opts.pas[1].find('.modal-content').addClass('container_x_y');
                    //removeStyleProp(popc[0], ["transform", "height"]);
                    //
                };
                //
                //
                //debugger;
                //
                _after_2_tg9/*.hide()*/.removeClass('d-none')
                    .find('a.user-profile__close').off('click').on('click', function (e) {

                        opts.MNU.closest('.popuphwnd').modal('hide');

                    });

                //_after_2_tg9.find('div[chitiet_usr] .btn[pu_mnu]').off('click').on('click', function () {



                //})

                //.off('show.bs.popover').on('show.bs.popover', function (a, b) {
                //     //debugger;

                //     opts.MNU.data()['bs.popover'].config.boundary = _after_2_tg9[0];

                //     //alert('Popover is completely visible!');
                // });
                //


                const usr = [];//di lay user de chuan bi hien thi.
                opts.impSCR.trigger('xoa_nguoidung', [usr]);

                //debugger;

                var SL = SL_NGUOIDUNG([], usr);
                //
                const hedSUM = function () {
                    //
                    //debugger;
                    const dINF = {};
                    //
                    //gio no con giu theo thu tu.
                    for (var w = 0; w < SL[0].length; w++) {
                        //
                        dINF[SL[0][w]] = SL[1][w];
                        //
                    };
                    //
                    //ep lai soluong tung may vo SL[1]
                    SL[1] = dINF;


                    //
                    SL[6] += SL[2];//card + pasword
                    SL[2] = SL[0].length;// multiDEV
                    //
                    SL[0].sort(function (a, b) { return a - b; });
                    //
                    for (var w = 2; w < SL.length; w++) {

                        _solg.eq(w - 2).html(SL[w]);

                    };
                };

                hedSUM();

                internetConection.slideUp(_fnSHOW);
                gloEVTs.giaidoan2.fnXX.getOPT('online_signal').stop();
                //
                const _mn = _after_2_tg9/*.slideDown()*/

                .find('a[mnu]').off('click').on('click', function (e) {

                    const mnu = this.getAttribute('mnu'),
                        clickSPAN = ['span', 'i'].indexOf(e.target.tagName.toLowerCase());

                    debugger;

                    switch (mnu) {

                        case 'sel_e_ascess': {
                            //
                            if (clickSPAN>-1) U_LST_sel_e_ascess(e, '-1');
                            //
                            break;
                        }

                        case 'xem_detail': {
                            //
                            if ($(this).find('>i:last-child').hasClass('ti-check')) {
                                debugger;
                                return;
                            };
                            //
                            xem_chitiet(this);

                            break;
                        }

                        case 'sync_profile': {
                            //
                            const usr = [];
                            mnu_each_mcc.__ul.parent().trigger('build_ds', [usr]);
                            //debugger;
                            if (clickSPAN>-1) __mnu.thucthi_job(e, usr, '-3');
                            //
                            break;
                        }

                        default: {
                            //
                            if (clickSPAN == -1) break;
                            srclocked(true);
                            //
                            //debugger;
                            if (__mnu[mnu]) {
                                //opts._after_2_tg9 = _after_2_tg9;
                                __mnu[mnu]();
                            } else {
                                //_after_2_tg9.removeClass('chat--show');
                                __mnu.thietbi_cmd(e);
                                //
                            };
                            break;
                        }
                    }
                })
                ,

                mod_devcap = function (dev, nSL) {
                    //
                    const dev_4 = JSON.parse(dev[4]),
                        devcap = dev_4[2].split('-');
                    //
                    devcap[0] = nSL[0];//user
                    devcap[1] = nSL[1];//finger
                    devcap[12] = nSL[2];//face
                    devcap[4] = nSL[5];//admin
                    devcap[5] = nSL[4];//pass
                    //
                    if (dev_4[2] != devcap.join('-')) {
                        //debugger;
                        const synJ = opts.c_$_b('dev_chg');//call back cap nhat datasource.
                        for (var w = 0; w < synJ[0].length; w++) {
                            //
                            if (synJ[0][w].id != dev[0]) continue;
                            //
                            //debugger;
                            synJ[1].refresh_devstas(w);
                            //
                            break;
                        };
                    };
                    //update lai.
                    return devcap;
                }

                ,

                xem_chitiet = function (me) {
                    //
                    const ul = me.closest('ul'),
                        tit = ul.closest('h3.title'),

                        chitiet_usr = tit.parent(),

                        _gwv = chitiet_usr.find('div[gwv]'),

                        _cwv = chitiet_usr.find('div[cwv]'),

                        toSep = function (n) {

                            return parseInt(n).toLocaleString(apisvr.a$.selected_language, { maximumFractionDigits: 0 });
                        }
                        ,
                        toFix = function (n) {
                            return n.toLocaleString(apisvr.a$.selected_language, {
                                minimumFractionDigits: 2,
                                maximumFractionDigits: 2
                            })
                        }
                        ,

                        cntchrt = function (t, u, mx, rMX, devcap, el, cls, ki) {
                            //
                            //debugger;
                            //
                            //tam doan luan => mx rMX
                            var _usr;
                            //
                            if (rMX > 0) {
                                var b_g = mx * parseInt(devcap[t]) / rMX,
                                    c_u = mx * parseInt(devcap[u]) / rMX;


                                t = devcap[t];
                                u = devcap[u];
                                _usr = [[b_g, mx], [c_u, mx], [toSep(t), toSep(u), parseInt(t) == 0 ? 0 :

                                    toFix(100 * parseInt(u) / parseInt(t)), 100 * parseInt(u) / parseInt(t)

                                ]];
                            } else {
                                t = 0; u = 0;
                                _usr = [[0, mx], [0, mx], [t, u, 0, 0]];
                            };
                            //
                            //
                            if (ki == 'cwv') {
                                //
                                el = el.find('.progress-bar');
                                el.addClass('progress-bar-' + cls).css('width', _usr[2][3] + '%');
                                //
                                el.prev().html(_usr[2][2] + ' % - ' + _usr[2][1]);
                                el.find('>span').eq(0).html(_usr[2][0]);
                                //
                            } else {
                                //
                                el = el.find('.progress');
                                el.prev().html('USE: ' + _usr[2][1] + ' - MAX: ' + _usr[2][0]);
                                el.next().html('FREE: ' + toFix(t - u));
                                //
                                el = el.find('.progress-bar').addClass('progress-bar-' + cls)
                                    .css('width', _usr[2][3] + '%')
                                    .html(_usr[2][2] + ' %');
                                //
                                //debugger;
                                //
                            };
                        }

                        ,

                        iniWV = {

                            gwv: function () {
                                //debugger;
                                //delete iniWV.gwv;
                                SL.__gwv = '1';//loaded
                                //debugger;

                                _gwv.find('*').off(/*all event*/).unbind().removeData();
                                _gwv.off(/*all event*/).unbind().removeData();

                                const bd = _gwv.find('tbody'),

                                    r1 = bd.find('tr').eq(0).remove().clone();

                                bd.empty();

                                for (var w = 0; w < SL[0].length; w++) {

                                    const dev = DA[3][SL[0][w]],
                                        cR = r1.clone(),
                                        td = cR.find('td');

                                    td.eq(0).html(dev[0]);
                                    td.eq(1).html(dev[1]);
                                    //
                                    //
                                    const ca_pw_adm = SL[1][SL[0][w]],

                                        devcap = mod_devcap(dev, ca_pw_adm);

                                    //   
                                    //
                                    cntchrt(7, 0, 50, devcap[7], devcap, td.eq(2), 'info', 'gwv'),//user
                                    cntchrt(6, 1, 80, devcap[6], devcap, td.eq(3), 'primary', 'gwv'),//finger
                                    cntchrt(13, 12, 20, devcap[13], devcap, td.eq(4), 'success', 'gwv');//face

                                    //multiCNT.push([_usr, _fa, _fp, _ca, _pw, _adm]);
                                    //
                                    //card
                                    td.eq(5).html(ca_pw_adm[3]);
                                    //
                                    //pw
                                    td.eq(6).html(ca_pw_adm[4]);
                                    //
                                    //adm
                                    td.eq(7).html(ca_pw_adm[5]);
                                    //
                                    //button.
                                    td.last().find('[pu_mnu]').attr('gmnu', 'chitietFUK_' + dev[0] + '_' + dev[6]).attr('title', dev[1]).parent();
                                    //
                                    bd.append(cR);
                                    //
                                };
                            }

                            ,

                            cwv: function () {
                                //
                                //debugger;
                                SL.__cwv = '1';//loaded
                                //delete iniWV.cwv;
                                //
                                _cwv.find('*').off(/*all event*/).unbind().removeData();
                                _cwv.off(/*all event*/).unbind().removeData();
                                //
                                const d1 = _cwv.children().eq(0).remove().clone();
                                _cwv.empty();
                                //
                                //debugger;
                                //
                                for (var w = 0; w < SL[0].length; w++) {
                                    //
                                    const dev = DA[3][SL[0][w]], cD = d1.clone(),
                                        //
                                        //1. origin from nut, tu do suy ra ca action khac
                                        btn = cD.find('[pu_mnu]').attr('gmnu', 'chitietFUK_' + dev[0] + '_' + dev[6]).attr('title', dev[1]).parent()
                                        ,
                                        //
                                        percentR = btn.prev().html(dev[1])//ten
                                            .prev().html(dev[0])//id
                                            .parent().next()//col-7
                                            .find('.row');
                                    //
                                    //neu co 1 device thi canh giua card view
                                    if (SL[0].length == 1) cD.addClass('mx-auto');
                                    //
                                    //
                                    //debugger;
                                    const ca_pw_adm = SL[1][SL[0][w]],

                                        devcap = mod_devcap(dev, ca_pw_adm);


                                    //
                                    //
                                    cntchrt(7, 0, 50, devcap[7], devcap, percentR.eq(0), 'info', 'cwv'),//user
                                    cntchrt(6, 1, 80, devcap[6], devcap, percentR.eq(1), 'primary', 'cwv'),//finger
                                    cntchrt(13, 12, 20, devcap[13], devcap, percentR.eq(2), 'success', 'cwv');//face
                                    //
                                    //debugger;
                                    //
                                    //multiCNT.push([_usr, _fa, _fp, _ca, _pw, _adm]);
                                    //
                                    //card
                                    percentR.eq(3).find('> div:last-child > span').html(ca_pw_adm[3]);
                                    //
                                    //pw
                                    percentR.eq(4).find('> div:last-child > span').html(ca_pw_adm[4]);
                                    //
                                    //adm
                                    percentR.eq(5).find('> div:last-child > span').html(ca_pw_adm[5]);
                                    //
                                    _cwv.append(cD);
                                    //
                                };
                            }

                        }

                        ,

                        show_view = function (_lnk) {
                            //
                            _lnk = $(_lnk);
                            //
                            ul.find('li a>i:last-child').removeClass('ti-check');
                            //
                            var fukICO = 'ti-widgetized';
                            //
                            _lnk.find('>i:last-child').addClass('ti-check');
                            //
                            //
                            if (_lnk[0].hasAttribute('xem1')) {
                                //
                                _cwv.insertAfter(_gwv);
                                if (!SL.__cwv) iniWV.cwv();
                                //
                                setTimeout(function () { _cwv.fadeIn('slow'); }, 100);
                                _gwv.slideUp();

                            } else {

                                _gwv.insertAfter(_cwv);
                                if (!SL.__gwv) iniWV.gwv();
                                //
                                setTimeout(function () { _gwv.fadeIn('slow'); }, 100);
                                _cwv.slideUp();
                                fukICO = 'ti-view-grid';

                            };
                            //
                            ul.prev().html('<i class="' + fukICO + ' text-large"></i>');
                            //
                        };
                    //




                    chitiet_usr.off('click').on('click', '.btn[pu_mnu]', function (ex) {

                        //debugger;

                        //opts.MNU.off("show.bs.dropdown").on("show.bs.dropdown", function (e) {
                        //    debugger
                        //});

                        //$(this).parent().on('shown.bs.popover', function () {
                        //    alert('Popover is completely visible!');
                        //});

                        //debugger;

                        //set de khi click vao se biet mcc nao.
                        opts.MNU.__dumeMCC = this.getAttribute('gmnu');
                        //
                        __mnu.act_menu(this);


                        //alert('here');
                        //const dev = $(this).attr('for', 'dume_2_10_1725508642967');// mnu_each_mcc.__ul.parent().find('[for="' + mnu_each_mcc.__mnu + '"]');
                        //__mnu.thietbi_cmd_bk_opt(dev, dev);

                    }).off('__mnu_click').on('__mnu_click', function (e, na, lnkEVT) {

                        //debugger;
                        const mnu = lnkEVT.currentTarget.getAttribute('mnu');

                        switch (mnu) {
                            case 'del_usr': {
                                //debugger;
                                const usr = [], dev = opts.MNU.__dumeMCC.split('_')[1];
                                opts.impSCR.trigger('xoa_nguoidung', [usr, parseInt(dev)]);
                                //
                                __mnu.thucthi_job(lnkEVT, usr, dev);
                                break;
                            }
                            case 'bk_opt': {

                                //debugger;

                                const dev = $(lnkEVT.currentTarget).find('[data-lang]').attr('for', opts.MNU.__dumeMCC);// mnu_each_mcc.__ul.parent().find('[for="' + mnu_each_mcc.__mnu + '"]');
                                __mnu.thietbi_cmd_bk_opt(dev, dev);

                                break;

                            }
                            case 'thietbi_restore_main_mnu': {
                                //alert('here');
                                //debugger;
                                inpFI.attr('__dumeMCC', [opts.MNU.__dumeMCC.split('_')[1]]);
                                inpFI.trigger('click');
                                break;
                            }
                            case 'sync_profile_mnu': {
                                //
                                //debugger;
                                const usr = [];
                                opts.impSCR.trigger('build_ds', [usr, [opts.MNU.__dumeMCC.split('_')[1]]]);
                                //debugger;
                                __mnu.thucthi_job(lnkEVT, usr, '-3');
                                //
                                break;
                            }
                            case 'sel_e_ascess': {
                                //
                                U_LST_sel_e_ascess(lnkEVT, opts.MNU.__dumeMCC.split('_')[1]);
                                //
                                break;
                            }
                        };
                        //__mnu.thietbi_cmd(lnkEVT);

                    });
                    //
                    show_view(me[0]);
                    //
                    return show_view;
                    //
                }(_mn.parent().find('[mnu="xem_detail"] .ti-check').closest('a'));


                //debugger;
                const inpFI = _mn.parent().find('input#thietbi_restore_main').off('resetVAL').on('resetVAL', function (e) {
                    //
                    inpFI.removeAttr('__dumeMCC');
                    //
                    inpFI.off('change').val(null).on('change', input_file_CHANGE);
                    //
                });
                //
                //
                if (__isSafari()) inpFI.removeAttr('accept');
                //
                inpFI.trigger('resetVAL');//cua input type="file"??
                //
                //
                //
                //panel thong ke USR,FP,FA ... quay ve day lay SL
                opts.impSCR.off('PNL_THONGKE_SL').on('PNL_THONGKE_SL', function (e, _GET, aMCC) {
                    //debugger;
                    if (typeof _GET === 'string' || _GET instanceof String) {
                        if (_GET == '1') {//refresh after del usr cmd
                            //
                            usr.length = 0;//reset
                            opts.impSCR.trigger('xoa_nguoidung', [usr]);
                            //
                            SL = SL_NGUOIDUNG([], usr);
                            hedSUM();
                            //
                            //
                            //debugger;
                            //
                            const synJ = opts.c_$_b('dev_chg');//call back cap nhat datasource.
                            //
                            for (var b = 0; b < aMCC.length; b++) {
                                //
                                for (var w = 0; w < synJ[0].length; w++) {
                                    //
                                    if (synJ[0][w].id != aMCC[b].id) continue;
                                    //
                                    const wdmo = JSON.parse(synJ[0][w].wdmo),
                                        devcap = wdmo[2].split('-'),
                                        _id = synJ[0][w].id,
                                        nSL = SL[1][_id];

                                    devcap[0] = nSL[0];//user
                                    devcap[1] = nSL[1];//finger
                                    devcap[12] = nSL[2];//face
                                    devcap[4] = nSL[5];//admin
                                    devcap[5] = nSL[4];//pass
                                    //
                                    //update lai.
                                    wdmo[2] = devcap.join('-');
                                    synJ[0][w].wdmo = JSON.stringify(wdmo);
                                    //
                                    //save update database
                                    //synJ[1].sua(synJ[0][w],w);
                                    //debugger;
                                    synJ[1].refresh_devstas(w);
                                    //
                                    //2. update   DA[2] = JSON.parse(JSON.stringify(gloEVTs.giaidoan2.fnXX.___devs));//device list
                                    for (var y = 0; y < DA[2].length; y++) {
                                        if (DA[2][y].id == _id) {
                                            DA[2][y].wdmo = synJ[0][w].wdmo;
                                            break;
                                        };
                                    };
                                    //
                                    for (var y = 0; y < DA[0].length; y++) {
                                        if (DA[0][y][0] == _id) {
                                            DA[0][y][4] = synJ[0][w].wdmo;
                                            DA[3][_id] = DA[0][y];
                                            break;
                                        };
                                    };
                                    break;
                                };
                            };

                            //
                            //refresh lai detail display
                            xem_chitiet(_mn.parent().find('[mnu="xem_detail"] .ti-check').closest('a'));
                            //
                        };
                    } else {
                        for (var w = 0; w < aMCC.length; w++) {
                            const fI = SL[1][parseInt(aMCC[w])];
                            if (fI) {
                                _GET.push(fI);
                            };
                            //
                        };
                        //
                    };
                });
                //
            }

            ,

            U_LST_sel_e_ascess = function (e, mod) {
                //
                srclocked(true);
                //
                //
                //render UI before 2 tg 9
                if (__mnu.render_list_on_loaded) {
                    __mnu.render_list_on_loaded(e, mod);//1: ALL
                } else {
                    opts.impSCR.find('#sel_all_device')//event listen at list-group lst_grp0, but raise in check is one of child, will hit to parent ...
                        .trigger('onLST_USRS', [mod]);
                };
                //
                const _after_2_tg9 = opts.impSCR.prev();//opts.pas[2].find('.after_2_tg9').css('display', 'block').insertBefore(opts.impSCR),
                //
                opts.impSCR.one(tra$Na.g(), function () {//end 'chat--show' annimation.

                    //alert('here');
                    _after_2_tg9.removeClass('chat--show').addClass('d-none');

                    srclocked(false);

                }).addClass('chat--show')

                .off('exit_view').on('exit_view', function () {

                    _after_2_tg9.removeClass('d-none').addClass('chat--show');

                });
            };


            return {

                init: function (frmEL, PAA, el, usr, mobiui) {

                    //alert(opts.mobiui);

                    //1. chuan bi cac thu tuc can thiet.
                    const __ui = $(el),

                        internetConection = PAA.find("internetConection"),

                        popc = PAA.find('.modal-content').addClass('container_x_y');

                    opts.pas = [frmEL, PAA, __ui, usr];
                    //
                    opts.impSCR = internetConection.closest('.row').next();
                    //
                    opts.impSCR.find('.chat__wrapper').attr('class', 'chat__wrapper').find('.chat__send-container').addClass('d-none');
                    //

                    opts.fnXX = gloEVTs.giaidoan2.fnXX;//backup lai.
                    //
                    //
                    //
                    var chatui_changed = "";
                    PAA.off('chatui_changed').on('chatui_changed', function (e, k) {
                        //
                        if (chatui_changed != k) {
                            chatui_changed = k;
                            //
                            if (__mnu.render_list_on_loaded) __mnu.render_list_on_loaded();
                            //ben device_step2.html se trigger event neu thay doi ui , ko co tac dung IE11
                            //debugger;
                            //
                            //debugger;
                            const mod = k == 'chatMobile' ? 1 : 0;
                            opts.mobiui = mod;
                            //
                            //
                            desk_mobi.neo_head(null,mod);
                            desk_mobi.btnlst(null,mod);
                            //
                            PAA.find('.neo_head').trigger('update_sticky',[mod]);
                            //
                        };
                    });
                    //
                    //
                    __ui.find('[data-lang]').each(function (idx, el) {
                        var key = el.getAttribute('data-lang');
                        $(el).html(_La$N(key, opts.lan));
                    });


                    //
                    const tbPaging = __ui.find('.snippets.bootdeys').clone()//clone la keep lai trong __ui -> sau nay hien thi len detail
                        .prependTo(
                                    //clear template html
                                    opts.impSCR.find('.chat__content').empty()

                    )
                    ,

                    cntSEL_U = tbPaging.find('[pmnu="device_list"]').appendTo(opts.impSCR)
                        //phai append ra ngoai chat__container neu ko khi show popup se co 1 khoang cach ..
                        .off('click').on('click', function (e) {
                            const th$a = this;
                            //setTimeout(function () {
                            __mnu.act_menu(th$a);
                            //});
                        });


                    tbPaging.find('.row_tb2').remove();

                    paging(usr,
                          tbPaging.find('.mcc_usr_lst').off('change').on('change', 'input[type=checkbox]', function (e) {
                              //
                              const val = parseInt(cntSEL_U.removeClass('cart_shake').attr('data-totalemps'));
                              cntSEL_U.attr('data-totalemps', val + 1);
                              //
                              setTimeout(function () {
                                  cntSEL_U.addClass('cart_shake');
                              }, 100);

                          })

                      );


                    //
                    //
                    frmEL.off('sub_theme').on('sub_theme', function () {
                        //ben JS_JS_device.js nhan duoc event theme se trigger sang day. 
                        PAA[(cS$.c0lor == 'dark' ? 'add' : 'remove') + 'Class']('dark-mode');//
                    }).trigger('sub_theme');

                    /*
                    //******************* truoc le 2.9

                    //debugger;
                    //show general user managment screen
                    opts.impSCR.removeClass("d-none").css('display', 'block')//du me class chat--mobile no co display:none, nen ko co hieu ung transform
                        .off('click').on('click', '.chat__previous, .chat__actions li', chat__actions)
                        //
                        .parent().one(tra$Na.g(), function () {//end 'chat--show' annimation.
                            //
                            //khi end thi se bind cac menu ...
                            popc.one(tra$Na.g(), mobi_UI_END);
                            //
                            setTimeout(function () {
                                //remove transform style , bring form normal view
                                if (GetIEVersion() == '11') {
                                    _gsC('https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.10.4/polyfill.min.js', 'js', function () {
                                        removeStyleProp(popc[0], ["transform", "height", "overflow"]);
                                    }, 'polyfill.min.js');
                                } else {
                                    removeStyleProp(popc[0], ["transform", "height"]);
                                };
                            }, 100);
                            //
                        });
                    //
                    //
          
 
                    //2. keo man hinh progress bar len.
                    //import screen
                    internetConection.slideUp('slow', function () {
                        //
                        $(this).remove();
                        //
                    });
                    //3. show ket qua dong thoi voi buoc 2.
                    opts.impSCR.addClass('chat--show');
                    //*********************************************
                    */
                    //
                    after_2_tg9(internetConection);
                    //
                    opts.impSCR.removeClass("d-none").css('display', 'block')//du me class chat--mobile no co display:none, nen ko co hieu ung transform
                        .off('click').on('click', '.chat__previous, .chat__actions li', chat__actions);


                    opts.pas[1].closest('.popuphwnd').one('hidden.bs.modal', function () {
                        //release resource.
                        //if (Main.spread) Main.spread.destroy();
                    });

                }

            }

        };


        return {
            createUPL: function (op) {
                return new O(op);
            }
        };


    });
</script>