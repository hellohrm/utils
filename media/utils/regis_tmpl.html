<style type="text/css">

.xemdangky .chon_valid_e{
    visibility:hidden;
}

.dx-device-mobile .duma_registration .dx-toolbar-before{
    max-width: calc(100% - 50px);
    overflow: hidden;
    display: flex;
}

.thumbnail-container .dz-progress {
    pointer-events: none;
    position: absolute;
    top: 12px;
    left: 20px;
    right: 15px;
    height: 8px;

    -webkit-transform: scale(1);
    border-radius: 5px;
    overflow: hidden;
    background: rgba(43, 43, 43, .25);
}
.thumbnail-container .dz-progress .dz-upload {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 0;
    -webkit-transition: width 300ms ease-in-out;
    -moz-transition: width 300ms ease-in-out;
    -ms-transition: width 300ms ease-in-out;
    -o-transition: width 300ms ease-in-out;
    transition: width 300ms ease-in-out;
    background: rgba(48,216,246,1);
    background: -moz-linear-gradient(left, rgba(5,112,213,1) 0%, rgba(48,216,246,1) 100%);
    background: -webkit-gradient(left top, right top, color-stop(0%, rgba(5,112,213,1)), color-stop(100%, rgba(48,216,246,1)));
    background: -webkit-linear-gradient(left, rgba(5,112,213,1) 0%, rgba(48,216,246,1) 100%);
    background: -o-linear-gradient(left, rgba(5,112,213,1) 0%, rgba(48,216,246,1) 100%);
    background: -ms-linear-gradient(left, rgba(5,112,213,1) 0%, rgba(48,216,246,1) 100%);
    background: linear-gradient(to right, rgba(5,112,213,1) 0%, rgba(48,216,246,1) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffea80', endColorstr='#ff7bae', GradientType=1 );
}

.upload-thumbnail.upding .remove-thumbnail{
    visibility:hidden;
}

    .thumbnail-container {
        padding: 0 10px;
    }

    .upload-thumbnail {
        background: #E7F3FF;
        color: #1977F2;
        padding: 1px 3px;
        border-radius: 50px;

        min-width: 70px;
        position: relative !important;
        /*margin-right: 8px;*/
        position: relative;
        margin:5px;
    }

        /*.upload-thumbnail {
        font-size: 10px;
    }*/
        .upload-thumbnail .fa {
            font-size: larger;
        }

        .upload-thumbnail a {
            font-size: 11px;
            text-decoration: none;
        }

        .upload-thumbnail span {
            font-size: 11px;
        }

        .upload-label {
            background: rgba(231, 97, 92, 0);
            color: #fff;
            padding: 2px;
            border: 1px dashed;
            /*font-size: 20px;*/
            cursor:pointer;
        }
            .upload-label .click-txt {
                display:none;
            }

        .upload-label:hover, .btn_attach:hover {
            color: #444;
            /*font-size: 9.4rem;*/
            -webkit-transition: width 2s;
        }
        .upload-thumbnail .image-name{
            max-width: 200px;
            text-overflow: ellipsis;
            overflow: hidden;
        }



    .lstregemp_dume.dx-scrollable-native-android .dx-scrollable-scrollbar{
        margin-top:45px;
    }

    .lstregemp:not(.dx-empty-collection),.lstregemp_dume{/*https://codepen.io/milojennings/pen/nyEZww*/
        overflow: hidden; 
        box-shadow: rgba(191, 191, 191, 0.15) 8px 0px 10px -6px inset;
    }
    .lstregemp .dx-empty-message,  .lstregemp_dume .dx-empty-message{
        border-top:none;
    }

.dumeSELSEAR{
    display: flex;
    align-items: center;
    background-color: rgba(191, 191, 191, 0.15);
    border-radius: 5px;
    padding: 5px;
}
.dumeSELSEAR .dx-list-search{
    margin-bottom:0!important;
}
    .dx-empty-collection .dumeSELSEAR {
        padding-left: 5px;
    }
    .lstregemp.shoter600px{
        height:auto!important;
    }
    .lstregemp .dx-icon-toggle-delete {
        margin-left: 4px;
    }
    .lstregemp .dx-scrollview-scrollbottom {
        display: none !important;
    }

.reg_emps {
  height: 65px;
  display:flex;
  align-items:center;
}
    .reg_emps .myself {
        position: relative;
        padding-top: 10px;
    }
    .myself svg {
        width: 88px;
        height: 90px;
        fill: lightgray;
    }
    .myself img {
        position: absolute;
        left: 18px;
        top: 16px;
        border: none!important;
    }

.reg_emps.latoi svg{
    width: 75px;
    height: 80px;
    position: absolute;
    /* stroke: darkcyan; */
    /* fill: none; */
    /* stroke-width: 20; */
    left: 14px;
    top: 5px;
    fill: lightgreen;
}
.reg_emps.latoi img{
    margin-top: -20px;
    border: none;
}

.reg_emps  img {
    height: 50px;
    width: 50px;
    min-width: 50px;
    margin-right: 10px;
    background-position: center;
    background-repeat: no-repeat;
    background-size: contain;
    border-radius: 25px;
    border: 1px solid lightgray;
    background-color: #fff;
}

.reg_emps > div.info {
  padding-right: 10px;
  overflow:hidden;
  font-size: 15px;

}
.reg_emps > div.info > div{
    white-space:nowrap;
    overflow: hidden;
    text-overflow:ellipsis;
    display:flex;
    align-items: center;
}

.reg_emps > div.accode {
    margin-left:auto;
    font-size: 18px;
    text-align: right;
}
    .reg_emps > div.accode i{
        display:block; /*cho no xuong dong*/
    }
    .reg_emps i{
        color: #6c757d!important;
        font-size:smaller;

        overflow: hidden;
        text-overflow: ellipsis;
        margin-right: 5px;
    }

.lstregemp.only_me .dx-list-select-all,
.lstregemp.only_me div[mnu='reglk_emps'],

.lstregemp.only_read .dx-list-select-all,
.lstregemp.only_read div[mnu='reglk_emps'],

.lstregemp.duyet_rmv .dx-list-select-all,
.lstregemp.duyet_rmv div[mnu='reglk_emps']
{
    display:none;
}



.lstregemp:not(.duyet_rmv) .dx-list-item-before-bag.dx-list-select-checkbox-container{
    display:none!important;
}
.lstregemp:not(.duyet_rmv) .dx-list-item-before-bag.dx-list-toggle-delete-switch-container{
    visibility:hidden;
    width: 20px;
}

.lstregemp.duyet_rmv .dx-list-item-before-bag.dx-list-toggle-delete-switch-container{
    display:none!important;
}

.prevent_point{
    pointer-events: none!important;
}

.lstregemp.duyet_rmv .dx-list-item-selected:not(.prevent_point) .dx-list-item-content,
.lstregemp.only_read .dx-list-item-selected:not(.prevent_point) .dx-list-item-content,

.only_read tr.dx-selection:not(.prevent_point) td {
    color:#dc3545!important;
    text-decoration:line-through!important;
}

.prevent_point td, 
.prevent_point.dx-list-item-selected .dx-list-item-content{
    text-decoration:line-through!important;
    color:#6c757d !important;
}
.hideselectchk .dx-command-select{
   pointer-events: none!important;
}

.dx-device-mobile .lstregemp .dx-icon-toggle-delete{
    margin-left:10px!important;
}

/*.lstregemp .dx-list-select-all{
    display:none;
}*/
.dumeSELSEAR .dx-list-select-all-checkbox{
    margin: -2px 0 -3px 5px!important;
}
.dx-device-mobile .dumeSELSEAR .dx-list-select-all-label{
    display:none!important;
}

.lstregemp .dx-list-item-selected .dx-list-item-before-bag.dx-list-toggle-delete-switch-container{
    visibility:visible;
}

    .reg_action {
        margin:auto
    }

    .reg_action li{
        background-color: transparent;
        display:flex;
        align-items:center;
        flex-wrap: wrap;
        border: none;
        padding: 0;
    }

    .reg_action .viewmode > button{
        margin-right: 5px;
        margin-top:5px;
    }

    .reg_action .viewmode > button:last-child{
        margin-right: 0;
    }


    .dume_overflow > div {
        overflow:visible;
    }

    .dx-state-invisible .dogclose {
        display:none;
    }
    .dogclose{
        position:absolute;
        margin-top:-50px;
        left:50%;
        transform:translateX(-50%);
    }

    



    .fileuploader {
        position: relative;
        width: 60%;
        margin: auto;
        height: 200px;
        border: 2px dashed #ddd;
        background: rgba(0, 0, 0, 0.2);
    }

        .fileuploader.dogswiper {
            border:none!important;
        }



        .fileuploader.active {
            background: #fff;
        }

            .fileuploader.active #upload-label {
                background: #fff;
                color: #e7615c;
            }


        .fileuploader #upload-label span.title {
            font-size: 1em;
            font-weight: bold;
            display: block;
        }

    span.tittle {
        position: relative;
        top: 222px;
        color: #bdbdbd;
    }

    .fileuploader #upload-label i {
        text-align: center;
        display: block;
        color: #e7615c;
        font-size: 9.5rem;
        position: absolute;
        top: -12px;
        left: 0;
        right: 0;
        margin-right: auto;
        margin-left: auto;
    }
    /** Preview of collections of uploaded documents **/
    .preview-container {
        position: relative;
        bottom: 0px;
        width: 35%;
        margin: auto;
        top: 25px;
        visibility: hidden;
    }

        .preview-container #previews {
            max-height: 400px;
            overflow: auto;
        }

            .preview-container #previews .zdrop-info {
                width: 88%;
                margin-right: 2%;
            }

            .preview-container #previews.collection {
                margin: 0;
                box-shadow: none;
            }

                .preview-container #previews.collection .collection-item {
                    background-color: #e0e0e0;
                }

                .preview-container #previews.collection .actions a {
                    width: 1.5em;
                    height: 1.5em;
                    line-height: 1;
                }

                    .preview-container #previews.collection .actions a i {
                        font-size: 1em;
                        line-height: 1.6;
                    }

                .preview-container #previews.collection .dz-error-message {
                    font-size: 0.8em;
                    margin-top: -12px;
                    color: #F44336;
                }



    /*media queries*/

    @media only screen and (max-width: 601px) {
        .fileuploader {
            width: 100%;
        }

        .preview-container {
            width: 100%;
        }
    }


    .swiper-container {
        width: 100%;
        height: 100%;
    }

    .swiper-slide {
        text-align: center;
        font-size: 18px;
        /* Center slide text vertically */
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
    }

        .swiper-slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }



    /*.swiper-slide {
                width: 80%;
            }

                .swiper-slide:nth-child(2n) {
                    width: 60%;
                }

                .swiper-slide:nth-child(3n) {
                    width: 40%;
                }*/

    .swiper-container {
        width: 100%;
        height: 100px;
        margin: 20px auto;
        /*overflow: visible;*/
    }

    .append-buttons {
        text-align: center;
        margin-top: 20px;
    }

        .append-buttons button {
            display: inline-block;
            cursor: pointer;
            border: 1px solid #007aff;
            color: #007aff;
            text-decoration: none;
            padding: 4px 10px;
            border-radius: 4px;
            margin: 0 10px;
            font-size: 13px;
        }

    .reg-step-no {
        display:flex;
        align-items:center;
    }
 .reg-step-no .bl-no {
    width: 32px;
    min-width: 32px;
    height: 32px;
    background-color: transparent;
    border-radius: 50%;
    border: 2px solid #007EA7;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 22px;
    font-weight: 700;
}
  .reg-step-no .bl-txt {
    border-radius: 0px 30px 0 0px;
    padding: 0 15px 1px 5px;
    padding-bottom: 1px;
}
 .dog_rdio .dx-widget.dx-collection{
    justify-content: stretch;
}
    .dx-validationsummary-item .bl-no {
         border-color:#d9534f;
    }
    .dog_tong .dx-texteditor {
        margin-top: 0!important;
    }
    .dog_tab .dx-multiview-item:last-of-type .dx-item-content {
        align-items: center!important;
    }
    
    .dog_tab .dx-multiview-wrapper,.dog_tab .dx-multiview-item{
        overflow:initial!important;
    }

</style>
<div>

    <div class="tmpl_attach">

        <div class="append-buttons d-none">
            <button class="prepend-2-slides">Prepend 2 Slides</button>
            <button class="prepend-slide">Prepend Slide</button>
            <button class="append-slide">Append Slide</button>
            <button class="append-2-slides">Append 2 Slides</button>
            <button class="movetoend">move-to-end</button>
        </div>


        <form  action="./"  method="post" class="swiper-container mySwiper2 fileuploader d-flex justify-content-center align-items-center">
            <div class="swiper-wrapper">
                <div class="dropzone-init text-center">
                    <div class="d-inline-block bg-info btn_attach">
                        <i class="ti-clip" style="font-size:30px"></i>
                    </div>
                    <div class="text-secondary font-italic click-txt">
                        Click the Button or Drop Files Here
                    </div>
                </div>
            </div>

        </form>

        <div class="thumbnail-container d-flex justify-content-center align-items-center" style="flex-wrap: wrap">
            <div class="upload-thumbnail">
                <div class="d-flex align-items-center">
                    <i class="fa fa-paperclip" aria-hidden="true"></i>&nbsp;&nbsp;
                    <a href="javascript:" class="image-name"><span data-dz-name></span></a>
                    <a href="javascript:" class="remove-thumbnail text-danger ml-1 fa fa-times-circle" data-dz-remove=""></a>
                </div>
            </div>
            <div class="upload-label d-none"></div>
        </div>


    </div>

    <div class="rpt_invoice">

        <!--Author      : @arboshiki-->


        <div class="toolbar hidden-print">
            <div class="text-right">
                <button id="printInvoice" class="btn btn-info">
                    <i class="fa fa-print"></i> Print
                </button>
                <button class="btn btn-info export_pdf">
                    <i class="fa fa-file-pdf-o"></i> Export as PDF
                </button>
            </div>
        </div>

        <hr />


    </div>
</div>

<script type="text/javascript">

function _dog(e){var t=function(e){const t=$.Deferred();return setTimeout(function(){t.resolve({isValid:!0,message:"du me"})},1),t.promise()},n={lookup:{dataSource:[.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15]},editorOptions:{searchEnabled:!1,noDataText:"0",placeholder:"",dropDownOptions:{onContentReady:function(e){e.component._$popupContent.addClass("text-right")}},onContentReady:function(e){}}};var a=function(e,a){a=a||[];var i=JSON.parse(e.rawD.ma$ter).filter(function(e){return-1==a.indexOf(e.id)&&4==e.typ}),o=1;return{editing:{confirmDelete:!1,allowUpdating:!0,mode:"form",container:".luoi_head",getEditFormTemplate:function(e){},form:{elementAttr:{class:"text-right"},colCount:1,screenByWidth:function(e){return e<500?"xs":e<650?"sm":"md"},items:[{itemType:"group",colCount:4,colCountByScreen:{xs:1,sm:2,md:3},items:[{colSpan:2,dataField:"id"},{colSpan:2,dataField:"EachDate"},{colSpan:1,dataField:"tugio"},{colSpan:1,dataField:"tong"},{colSpan:1,dataField:"dengio",readOnly:!0}]},{itemType:"group",items:[{dataField:"notes",editorType:"dxTextArea",editorOptions:{maxLength:200}}]}],onContentReady:function(e){e.component._fuckCLK||(e.component._fuckCLK=1,setTimeout(function(){var t=e.element,n=t.parent().find(".dx-button").data().dxButton._clickAction;t.parent().find(".dx-button").data().dxButton._clickAction=function(){srclocked(!0),e.component.validate().brokenRules.forEach(function(e){"custom"==e.type&&(e.isValid=!0)}),setTimeout(n,10)}},0)),srclocked(!1)},onInitialized:function(n){var a=n.element.closest("tr"),i=JSON.stringify(a.data().options.data),s=a.closest(".luoi_head"),l=function(e,t,a){window._fuckingEditing=null,s.css("display","").prev().empty(),0==this&&e.changes.length>0&&"update"==e.changes[0].type&&(i=JSON.parse(i),d.getDataSource()._items.some(function(t){if(t.aid==i.aid){for(var n in e.changes[0].data)e.changes[0].data.hasOwnProperty(n)&&(t[n]=i[n]);return!0}}),d.refresh()),d._controllers.editing.off("editCanceled"),d._controllers.editing.off("saved"),d._controllers.editing.off("rowValidating"),n.component.dispose(),srclocked(!1)},d=a.data().options.component,r=(n.component,{});o=-2==o?2:1,d._controllers.editing.off("editCanceled").on("editCanceled",l.bind(0)).off("saved").on("saved",l.bind(1)).off("rowValidating").on("rowValidating",function(a){if(0==a.brokenRules.length){const i=$.Deferred(),o=function(e,t){var n=t.newData,a=t.oldData;if(a&&(n.tugio||(n.tugio=a.tugio),n.dengio||(n.dengio=a.dengio)),!n.tugio||!n.tugio)return!0;for(var i=e.length-1;i>-1;i--)if(!1===e[i].isEditing){var o=e[i].data,s=new Date(o.tugio).setMilliseconds(0),l=new Date(o.dengio).setMilliseconds(0),d=new Date(n.tugio).setMilliseconds(0);if(!(new Date(n.dengio).setMilliseconds(0)<=s||l<=d))return!1}return!0}(d._controllers.data._items,a);if(!1===o)a.errorText="result.errorText",n.component.validate().validators.forEach(function(t){if("custom"!=t._validationRules[0].type)return!1;var n=t._validationRules[0];n.isValid=!1,n.message=e.js_011_35||"Overtime overlapping",n.validator.validate(),n.validator._getEditor().focus()}),a.isValid=!1,i.resolve(!1);else t().done(function(e){a.isValid=o,i.resolve(!0)});a.promise=i.promise()}else srclocked(!1)}).off("editorPrepared").on("editorPrepared",function(e){if(e.dataField){var t=e.editorElement.data();t[t.dxComponents[0]].off("valueChanged").on("valueChanged",function(e){var t=this.__x.fi;["EachDate","tugio","tong"].indexOf(t)>-1&&(d._fieldChg(r,t,e.value,a.data().options.data),o=2)}).__x={fi:e.dataField},["tugio","dengio"].indexOf(e.dataField)>-1&&(r[e.dataField]=t[t.dxComponents[0]])}}),s.css("display","none").prev().prepend(n.element.parent().css({display:"block",margin:"0 -15px","box-shadow":"rgba(0, 0, 0, 0.16) 0px 1px 4px",padding:"10px 20px","background-color":"rgba(191, 191, 191, 0.10)"}))}}},onInitNewRow:function(e){e.data={id:i.length>0?i[0].id:null,EachDate:(new Date).setHours(0,0,0,0),tugio:(new Date).setHours(17,0,0,0),tong:1,dengio:(new Date).setHours(18,0,0,0),notes:""},o=-2},columns:[{type:"selection",width:40},{caption:e.js_011_16||"Overtime type",cssClass:"wrapfuck dog-placeholder",dataField:"id",minWidth:150,lookup:{dataSource:i,displayExpr:"ten",valueExpr:"id"},editorOptions:{searchEnabled:!1,acceptCustomValue:!1},validationRules:[{type:"required"}]},{widget:"dxDateBox",caption:e.js_011_17||"Date",dataField:"EachDate",dataType:"date",format:function(e){return new Intl.DateTimeFormat(apisvr.a$.selected_language,{year:"numeric",month:"2-digit",day:"2-digit"}).format(e)},minWidth:100,editorOptions:{acceptCustomValue:!1,openOnFieldClick:!0,pickerType:"phone"==DevExpress.devices._realDevice.deviceType?"rollers":void 0},validationRules:[{type:"required",message:"My custom message"}]},$.extend({widget:"dxNumberBox",caption:e.js_011_18||"Hour(s)",dataField:"tong",dataType:"number",minWidth:75,format:"#.#",validationRules:[{type:"custom",validationCallback:function(e){return!0},message:"An even number is expected"}]},n),{widget:"dxDateBox",caption:e.js_011_19||"From time",dataField:"tugio",dataType:"datetime",format:"HH:mm",minWidth:75,editorOptions:{displayFormat:"HH:mm",useMaskBehavior:!0,type:"time",pickerType:"list",dropDownOptions:{showTitle:!1},acceptCustomValue:!1,openOnFieldClick:!0,onOpened:function(e){var t=e.component.content().find(".dx-list").dxList("instance"),n=e.component._regExpInfo.patterns[1];t._timeout=-1,t._sync=function(a,i){clearTimeout(t._timeout),t._timeout=setTimeout(function(){var a=e.component._popup;if(a&&!0===a.option("visible")){var o=i||(e.element.find("input")[1].value||"00"+n+"00").split(n),s=2*parseInt(o[0])+(0===parseInt(o[1])?0:1),l=t._$element.find(".dx-list-item:eq("+s+")");l.length>0&&(t.selectItem(l),t.scrollToItem(l))}},a)},t._sync(0),e.component._lst=t},onInput:function(e){var t=e.component;2==t._activePartIndex&&setTimeout(function(){var n=e.element.find(".dx-texteditor-input").val().split(t._regExpInfo.patterns[1]);if(2==n.length){var a=parseInt(n[1].slice(-1));a>0&&a<4?(n[1]="30",a=30):(n[1]="00",a=0),t._setActivePartValue(a),t._selectNextPart(1),t._lst&&t._lst._sync(100,n)}},10)},onContentReady:function(e){e.component._onMouseWheel=function(t){if(this._useMaskBehavior()){var n=1;2==e.component._activePartIndex&&(n=30),this._partIncrease(t.delta>0?n:-1*n,t),this._lst&&this._lst._sync(300)}}}},validationRules:[{type:"required",message:"My custom message"}]},{widget:"dxDateBox",caption:"("+(e.js_011_20||"To time")+")",dataField:"dengio",dataType:"datetime",format:"HH:mm",minWidth:75,cssClass:"text-secondary",editorOptions:{elementAttr:{class:"text-secondary"},displayFormat:"HH:mm",useMaskBehavior:!0,type:"time",pickerType:"list",readOnly:!0,acceptCustomValue:!1,openOnFieldClick:!0,placeholder:"--:--"}},{caption:e.js_011_21||"Notes",minWidth:150,dataField:"notes"},{type:"buttons",visible:!1}]}},i=['<div class="col-12 col-sm-6 d-flex flex-column dx-validationsummary-item mb-3"><div class="dx-fieldset-header reg-step-no mb-0" style="font-weight: 100;"><span class="bl-no">1</span><span class="bl-txt"></span></div></div>',,'<div class="viewmode mx-auto"></div>'],o=function(e,t){return i[1]='<span class="font-italic text-right mr-2" style="flex:1">'+(e.lan.js_011_7||"Draft current registration by clicking Save button")+'</span><button mnu="sav_tmp" type="button" class="btn btn-secondary btn-sm ml-auto"><i class="ti-save mr-1"></i>'+aLAN.js_007_29+"</button>",$('<div class="d-none valid_msg  reg_action row"><div class="col-12 mx-auto mt-3 text-center" '+(t.length>0?"style="+t:"")+'><span class="font-italic">'+(e.lan.js_011_15||"Please complete the above errors and try again...")+'</span></div></div><ul class="send_frm list-group reg_action"><li class="list-group-item"  style="max-width:300px;'+t+'margin:auto">'+(2!=e.downline?i[1]:(i[1]="",""))+'</li><li class="list-group-item'+(2!=e.downline?" mt-3":"")+'"><div class="sendnotes w-100 m-auto" style="box-shadow:rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px;"></div></li><li class="list-group-item mx-auto mt-3 flex-nowrap" '+(t.length>0?"style="+t:"")+'><span class="font-italic text-right">'+(e.lan.js_011_10||"Input content then press button")+'</span><button mnu="send_reg" type="button" class="ml-2 btn btn-sm btn-"></button></li></ul>')},s="lstmnu_"+glbK.regVEL(),l=function(){return r.mnuINIT_CLICK.closest(".lstregemp").dxList("instance")},d=function(e){try{const t=XLSX.read(e,{type:"binary",cellText:!1,cellDates:!0}),n=t.Sheets[t.SheetNames[0]],a=XLSX.utils.decode_range(n["!ref"]||"A1:B1"),i=l(),o=n.G7&&n.G7.v,s=[],d=[];a.s.r=12,XLSX.utils.sheet_to_json(n,{header:"A",range:a,raw:!1,dateNF:"yyyy-mm-dd"}).map(function(e,t){if($.isNumeric(e.B)){const t=parseInt(e.B);-1==d.indexOf(t)&&(d.push(t),s.push({acno:e.B,empname:e.C,empcode:e.D,secid:-1,ff_pb:o,rmv:-1}))}}),i.option("dataSource",s),i._emps_fromEXCEL&&i._emps_fromEXCEL(s)}catch(e){}srclocked(!1)},r={_k:s,op:{hideOnOutsideClick:!0,position:{my:"left top",at:"left bottom"},onShowing:function(e){var t=r.el,n=t.find(".selectAll"),a=r.mnuINIT_CLICK.parent().find(".dx-list-select-all"),i=function(e){e||(e=a.find(".dx-checkbox").data().dxCheckBox),t.find(".delALL").css("display",!1===e.option("value")?"none":"")};0==a.length?(a=l().element().find(".dx-list-select-all"),n.append(a),(a=a.find(".dx-checkbox").css("margin-left","0px").data().dxCheckBox).on("valueChanged",function(e){i(e.component)}),i(a)):i()}},el:$('<div class="_k-'+s+' hedROW_CLK ctx_onlybtn"><div class="selectAll"></div><div class="delALL my-1"><div mnu="delALL" class="btn btn-sm" style="padding: 2px 3px 2px 1px;" type="button"><i class="fa fa-trash-o text-danger"></i><span class="pl-1 font-italic text-danger">'+(aLAN.js_001_29||"Delete all selection")+"</span></div></div></div>")};return a.otTOOLB=function(e){return[{location:"after",widget:"dxButton",options:{text:aLAN.js_007_25,icon:"plus",onClick:function(){srclocked(!0),setTimeout(function(){e.addRow()},10)}}},{location:"after",widget:"dxButton",options:{text:aLAN.js_007_26,icon:"edit",disabled:!0,onClick:function(t){srclocked(!0),setTimeout(function(){var n=e.getRowIndexByKey(t.component.option("r"));e.editRow(n)},10)}}},{location:"after",widget:"dxButton",options:{text:aLAN.js_007_27,stylingMode:"outlined",icon:"trash",type:"danger",disabled:!0,onClick:function(t){var n,a=e.getSelectedRowKeys();a.length>0&&(n=e.option("dataSource")._array,devDlg(1,aLAN.js_001_25).show().done(function(t){if(1==t){for(var i=n.length-1;i>-1;i--)a.indexOf(n[i].aid)>-1&&n.splice(i,1);e.refresh()}}))}}}]},o.err_panel=function(e,t,n,a,o,s){var l,d=!1,r=0;if(e.find(">div:not(:last-child)").remove(),2==a[0]){if(l=$(i[0]),!0===(d=!a[2]._$element.parent().is(":visible")))l.find(".bl-txt").text(t(11)||"Regis Information").prev().text(++r),l.append('<div class="mr-auto ml-5 dx-validationsummary-item-content">'+(t(33,6)||"Registration not completed")+"</div>");else if(2==aLAN.js_usr_info[0])if(0==(d=a[2].option("dataSource")._array).length||2==n.lst_&&d.length==a[2].option("selectedRowKeys").length)l.find(".bl-txt").text(t(11)||"Regis Information").prev().text(++r),l.append('<div class="mr-auto ml-5 dx-validationsummary-item-content">'+(t(33,8)||"Empty overtime info")+"</div>"),d=!0;else{l.find(".bl-txt").text(t(11)||"Regis Information").prev().text(++r);for(var c=0,p=0,m=0;c<d.length;c++){if(difDa(new Date(d[c].EachDate).setHours(0,0,0,0),(new Date).setHours(0,0,0,0))>3&&2767!=d[c].id&&(m++,l.append('<div class="mr-auto ml-5 dx-validationsummary-item-content">'+((t(33,11)||"Regis date late over 03 days (")+fmtSD.format(new Date(d[c].EachDate)))+")</div>"),m>4))break}if(l.insertBefore(e.find(">div:last-child")),c<d.length)for(;c<d.length;c++){if(difDa(new Date(d[c].EachDate).setHours(0,0,0,0),(new Date).setHours(0,0,0,0))>3&&(0==p&&((l=$(i[0])).find(".bl-txt").text("...").prev().remove(),l.insertBefore(e.find(">div:last-child")),p=1),m++,l.append('<div class="mr-auto ml-5 dx-validationsummary-item-content">'+((t(33,11)||"Regis date late over 03 days (")+fmtSD.format(new Date(d[c].EachDate)))+")</div>"),m>9))break}d=m>0}d&&l.insertBefore(e.find(">div:last-child"))}else if(2==aLAN.js_usr_info[0]&&0==o){const n=a[2]._$element.find(".dx-tabpanel").data().dxTabPanel.option("selectedIndex");l=$(i[0]),a[2]=a[2].option("formData"),a[0]=difDa(new Date(0==n?a[2].todate:a[2].EachDate).setHours(0,0,0,0),(new Date).setHours(0,0,0,0)),a[0]>-1&&1051==a[2].id?(l.find(".bl-txt").text(s(a[2].id)).prev().text("#"),l.append('<div class="mr-auto ml-5 dx-validationsummary-item-content">'+(t(33,12)||"Must register before at least 01 day")+"</div>"),l.insertBefore(e.find(">div:last-child")),d=!0):a[0]>3?(l.find(".bl-txt").text(t(11)||"Regis Information").prev().text(++r),l.append('<div class="mr-auto ml-5 dx-validationsummary-item-content">'+(t(33,11)||"Regis date late over 03 days")+"</div>"),l.insertBefore(e.find(">div:last-child")),d=!0):a[0]>0&&0==a[3]&&(l.find(".bl-txt").text(t(11)||"Regis Information").prev().text(++r),l.append('<div class="mr-auto ml-5 dx-validationsummary-item-content">'+(t(33,9)||"Regis date in past")+"</div>"),l.insertBefore(e.find(">div:last-child")),(l=$(i[0])).find(".bl-txt").text(t(12)||"Attach Files").prev().text(++r),l.append('<div class="mr-auto ml-5 dx-validationsummary-item-content">'+(t(33,10)||"Attachment require")+"</div>"),l.insertBefore(e.find(">div:last-child")),d=!0)}return(0==a[1].option("dataSource").length||2==n.lst_&&a[1]._$element&&a[1].option("dataSource").length==a[1].option("selectedItemKeys").length)&&((l=$(i[0])).insertBefore(e.find(">div:last-child")),l.find(".bl-txt").text(t(13)||"Apply To Employees").prev().text(++r),l.append('<div class="mr-auto ml-5 dx-validationsummary-item-content">'+(t(33,7)||"Empty valid employee")+"</div>"),d=!0),!0===d&&e.removeClass("d-none"),d},o.dupERR=function(e,t,n,a,o,s,l){const d=$(i[0]).removeClass("col-sm-6");e=e.find(".dx-actionsheet-item-content").children(),n=JSON.parse(n),t=JSON.parse(t),d.find(".bl-txt").text(_La$N("js_011_36",l)||"Registration time overlapping").prev().text("#");var r,c,p=$(a).appendTo(d).css({"overflow-y":"auto","max-height":"200px"}).addClass("py-0 mt-3").removeClass("pb-3"),m=p.find("li.ticket-item").addClass("d-block")[0].outerHTML,u=s.option("dataSource");p.dxScrollView({}),p=p.find(".row >div:first");for(var f=0;f<t.length;f++){f>0&&(p=$(m).appendTo(d.find("ul")).find(".row >div:first")),r=new Date(t[f].EachDate),c=new Date(t[f].todate);var x="fa fa-pencil",g="text-secondary";100==t[f].regsta||(105==t[f].regsta?(x="fa fa-reply",g=""):101==t[f].regsta?(x="fa fa-paper-plane",g="text-primary"):t[f].regsta<103?(x="fa fa-hourglass-o",g="text-warning"):103==t[f].regsta?(x="fa fa-check-circle",g="text-success"):104==t[f].regsta&&(x="fa fa-times-circle")),p.closest(".row").addClass(g),p.empty().html('<div class="m-1 text-large"><i class="'+x+' mr-1"></i>'+o(t[f].id)+"</div>"),-1==t[f].tresom?((p=p.next().toggleClass("col-md-2 col-md-3")).append($('<span class="elipx">'+fmtSD.format(r)+"</span><b>  -"+t[f].tong+"h</b>")),(p=p.next()).find("i").next().text(nga_sDt24(r,1)+" - "+nga_sDt24(c,1)),p=p.next().toggleClass("col-md-4 col-md-3")):((p=p.next().addClass("my-2")).append($('<span class="elipx">'+fmtSD.format(r)+"</span>")),p=p.next().addClass("my-2 justify-content-start"),0==t[f].selo?p.find("i").toggleClass("fa-clock-o fa-calendar").next().text(fmtSD.format(c)):p.find("i").next().text(1==t[f].tresom?_La$N("js_011_26",l)||"Late":_La$N("js_011_27",l)||"Early"),p=p.next());for(var v=0;v<u.length;v++)if(u[v].acno==t[f].eid){p.html('<span  class="d-inline-block text-truncate">'+u[v].acno+"&emsp;"+u[v].empcode+"&emsp;"+u[v].empname+"</span>");break}}e.eq(0).find(">div:not(:last-child)").remove(),d.insertBefore(e.eq(0).removeClass("d-none").find(">div:last-child")),e.eq(1).addClass("d-none")},{col:{widget:"dxDateBox",caption:"Ngay",dataField:"EachDate",dataType:"date",format:function(e){return new Intl.DateTimeFormat(apisvr.a$.selected_language,{year:"numeric",month:"2-digit",day:"2-digit"}).format(e)},width:75,minWidth:75,editorOptions:{}},columns:a,regisFRM:function(e,t,n,i,o,s,l){var d={cssClass:"dog_tong",dataField:"tong",editorType:"dxNumberBox",label:{text:a(e.lan,e.quy_imp_excel?[]:[2767]).columns[3].caption+" (0"+dau_phay()+"5 "+(o(31,3)||"to")+" 11"+dau_phay()+"5 "+(o(34,5)||"hour")+")"},editorOptions:{min:e.minTong,max:11.5}},r=$('<div class="text-info d-none"><i class="ti-light-bulb"></i><span></span></div>'),c=function(e,t){(t=difDa(e,t))>0&&(t++,r.find("span").text((o(18)||"Total")+" "+t+" "+(o(34,4)||"day"+(t>1?"(s)":"")))),r[(t>0?"remove":"add")+"Class"]("d-none")};return[{dataField:"id",editorType:"dxSelectBox",editorOptions:{items:t,valueExpr:"id",displayExpr:"ten",searchEnabled:!0},label:{text:e.lan.js_011_22||"Leaving kind choosing"},validationRules:[{type:"required",message:"Position is required"}]},{dataField:"EachDate",editorType:"dxDateBox",editorOptions:{width:"100%",acceptCustomValue:!s,openOnFieldClick:s,pickerType:s?"rollers":void 0,onContentReady:function(e){n[0]=e.component,n[1]&&c(new Date(n[0].option("value")),new Date(n[1].option("value")))},onValueChanged:function(e){var t=new Date(n[1].option("value"));new Date(e.value).getTime()>t.getTime()?n[1].option("value",e.value):c(e.value,t)}},label:{text:e.lan.js_011_17||"Date"}},{itemType:"group",colSpan:2,items:[{itemType:"tabbed",cssClass:"dog_tab",tabPanelOptions:{height:120,deferRendering:!1,disabled:!l,onContentReady:function(e){const t=e.element.closest(".lv_regis_frm.dx-form").data("dxForm").option("formData");t&&t.hasOwnProperty("selo")&&e.component.option("selectedIndex",t.selo)},onSelectionChanged:function(e,t){const n=e.element.closest(".lv_regis_frm.dx-form").data("dxForm").option("formData");n&&(n.selo=e.component.option("selectedIndex"))}},tabs:[{title:e.lan.js_011_23||"Full-date off",colCount:2,tabTemplate:function(e,t,n){n.addClass("d-flex").append("<span class='fa fa-check-circle tab_sel'></span>"+e.title)},items:[{dataField:"todate",editorType:"dxDateBox",editorOptions:{width:"100%",acceptCustomValue:!s,openOnFieldClick:s,pickerType:"phone"==DevExpress.devices._realDevice.deviceType?"rollers":void 0,onContentReady:function(e){n[1]=e.component,n[0]&&c(new Date(n[0].option("value")),new Date(n[1].option("value")))},onValueChanged:function(e){var t=new Date(n[0].option("value"));new Date(e.value).getTime()<t.getTime()?n[0].option("value",e.value):c(t,e.value)}},label:{text:e.lan.js_011_25||"To date"}},{template:function(e,t){const n=t.closest(".dx-item-content"),a="dx-single-column-item-content";return n.hasClass(a)&&(n.removeClass(a),n.closest(".dx-multiview-item-content").css("padding-right","0")),n.parent().css({"align-items":"center"}).closest(".dx-box-flex").css("flex-direction","row"),r}}]},{title:e.lan.js_011_24||"Or apply Late / Early",colCount:2,colCountByScreen:{xs:2},tabTemplate:function(e,t,n){n.addClass("d-flex").append("<span class='fa fa-check-circle tab_sel'></span>"+e.title)},items:[{cssClass:"dog_rdio",dataField:"tresom",editorType:"dxRadioGroup",editorOptions:{layout:"horizontal",valueExpr:"id",displayExpr:"text",items:[{id:1,text:o(26)||"Late"},{id:2,text:o(27)||"Early"}]},label:{text:"",visible:!1}},d]}]}]},{colSpan:2,dataField:"notes",label:{text:o(21)||"Notes"},editorType:"dxTextArea",editorOptions:{height:50,maxLength:200}}]},err_block:i,cty:o,lstE_mnu:function(e,t,n){if(e.quy_imp_excel){const t=(new Date).getTime(),a='<div class="impEXEL my-1"><input id="import_ot_emps_excel_"'+t+' type="file" class="d-none" accept=".xls,.xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" /><label mnu="impEXEL"  for="import_ot_emps_excel_"'+t+' class="btn btn-sm mb-0" style="padding: 2px 3px 2px 1px;" type="button"><i class="fa fa-file-excel-o"></i><span class="pl-1 font-italic">'+(e.lan.js_011_37||"Import Excel file")+"</span></label></div>",i=r.el.find(".delALL");i.next().hasClass("impEXEL")?1==n&&i.next().remove():2==n&&$(a).insertAfter(i).find("input").off("change").on("change",function(e){var t,n;e.currentTarget.files.length>0&&(t=e.currentTarget.files[0],(n=new FileReader).readAsArrayBuffer(t),n.onload=function(e){srclocked(!0),devDlg(1,_La$N("js_001_27",aLAN),null,{cb:function(e){srclocked(!1)}}).show().done(function(t){1==t&&(srclocked(!0),11==GetIEVersion()?_gsC("https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.10.1/polyfill.min.js","js",function(){_gsC("https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js","js",function(){d(e.target.result)},"xlsx.mini.min.js")},"polyfill.min.js"):_gsC("https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js","js",function(){d(e.target.result)},"xlsx.mini.min.js"))})},n.onerror=function(){console.log(n.error)},e.currentTarget.value="")})}devCTXmnu(t.currentTarget,r,function(){e.ctxMNU_K[s]||e.ctxMNU_K.push(s),r.mnuINIT_CLICK=$(t.currentTarget),r.el.on("click",".btn",function(e){srclocked(!0),setTimeout(function(){!function(e){switch(devDlg.ctx[0].hide(),$(e.currentTarget).attr("mnu")){case"delALL":var t=l(),n=t.option("selectedItems").map(function(e){return e.___}),a=t.option("dataSource").filter(function(e){return-1==n.indexOf(e.___)});t._hoantat=function(e){t._hoantat=null,srclocked(!1)},setTimeout(function(){t.option({searchValue:"",dataSource:a})},100);break;default:srclocked(!1)}}(e)},10)})})},myselfSVG:'<svg  version="1.0" xmlns="http://www.w3.org/2000/svg" width="512.000000pt" height="512.000000pt" viewBox="0 0 512.000000 512.000000"><g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"><path  d="M2290 5099 c-247 -37 -394 -81 -596 -179 -500 -243 -845 -671 -954 -1185 -29 -140 -37 -369 -16 -495 31 -191 95 -367 206 -565 113 -201 136 -232 855 -1160 191 -247 399 -516 483 -625 115 -151 246 -320 260 -338 12 -16 15 -15 33 8 11 14 31 38 45 54 13 15 24 32 24 37 0 4 6 12 13 16 7 4 20 20 29 34 9 14 23 32 30 40 8 8 63 79 123 158 61 79 144 187 185 241 41 53 97 126 124 161 27 35 218 282 425 548 427 552 457 593 545 740 253 421 323 765 236 1164 -152 696 -753 1227 -1517 1342 -111 16 -435 19 -533 4z m570 -164 c126 -23 338 -93 456 -151 458 -224 777 -628 870 -1104 23 -117 23 -377 0 -479 -55 -246 -202 -534 -412 -807 -37 -49 -190 -246 -339 -439 -149 -192 -325 -420 -391 -505 -66 -85 -140 -182 -166 -215 -26 -33 -112 -144 -191 -248 l-145 -187 -29 37 c-17 21 -52 67 -79 103 -28 36 -144 187 -259 335 -114 149 -269 349 -343 445 -75 96 -165 213 -202 260 -415 532 -486 633 -589 837 -72 141 -103 224 -137 363 -29 114 -26 420 4 548 33 137 57 204 123 337 139 284 372 520 675 685 185 101 371 163 584 196 119 18 446 12 570 -11z"/><path d="M3218 1053 c-10 -11 -18 -34 -18 -51 0 -45 35 -68 117 -76 187 -19 497 -98 614 -157 117 -59 144 -102 92 -151 -102 -96 -423 -182 -868 -235 -218 -26 -972 -26 -1190 0 -443 52 -766 140 -867 235 -52 49 -26 93 87 150 111 55 365 124 544 147 91 12 125 66 77 121 l-23 28 -114 -17 c-146 -22 -361 -76 -464 -117 -191 -76 -275 -157 -275 -266 0 -201 353 -343 1040 -420 197 -21 764 -30 986 -15 781 55 1234 215 1234 436 0 167 -227 289 -696 375 -58 11 -141 23 -183 26 -67 6 -78 4 -93 -13z"/></g></svg>'}}

</script>
