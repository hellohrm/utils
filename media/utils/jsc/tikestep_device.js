_o$h.hasOwnProperty("tikestep_device")||(_o$h.tikestep_device=function(){"use strict";function e(e,t,n){var o,i=0,s=null,a=!1,c=$.Deferred(),r=$.Deferred(),l=new Date;const d=e.ua>1?"UA":"noU",u=this,f=function(){function e(e){if(!e)return;const t=e.getContext("2d"),n=20,o=Math.floor(e.width/n),i=Math.floor(e.height/n),s=["0","1"],a=[],c=n,r=n;t.font="20px Arial",t.fillStyle="#444444";for(var l=0;l<i;l++)for(var d=0;d<o;d++)a.push({x:d*r,y:l*c,value:s[Math.floor(Math.random()*s.length)],hasDrawn:!1});const u=100;var f,p,m=Date.now();function v(){window.requestAnimationFrame(v),f=Date.now(),(p=f-m)>u&&(a.forEach((function(e){if(!0===e.hasDrawn&&100*Math.random()>95){var n=e.value===s[1]?s[0]:s[1];t.clearRect(e.x,e.y,r,c),t.fillText(n,e.x,e.y+c),e.value=n}})),m=f-p%u)}a.forEach((function(e){t.clearRect(e.x,e.y,r,c),t.fillText(e.value,e.x,e.y+c),e.hasDrawn=!0})),v()}return{draw:e}}(),p=function(){a=!1,y();var e=N.find(".dog_canvas");e.html("<canvas></canvas>"),f.draw(e.find("canvas")[0]),N.find(".mt-3").html(H[6][0]),z.btnOK.option({visible:!0,disabled:!1}),z.btnCANCEL[0].option("disabled",!1),W(2,0),W(3,0),U.next().removeClass().addClass("text-success"),m._lastMSG=-1},m=function(e){a=!0,m._lastMSG!=e&&(y(),U.next().removeClass().addClass("text-warning"),W(2,1),z.btnOK.option("visible",!1),z.btnCANCEL[0].option("disabled",!1),N.find(".mt-3").html(H[6][e][0]),U.addClass("timeout"),o=1,l=new Date,C(0,H[6][e]),m._lastMSG=e)},v={},_=function(){clearTimeout(_.hwndTimeout);const e=this[0],t=this[1];for(var n in v)v.hasOwnProperty(n)&&v[n](e,n,t)},h=function(e){return btoa(window[st0("1")](e.replace(/\"/g,"").replace(/,/g,"").slice(1,-1)))},g=function(e,t,n){return e&&t.forEach((function(o,i){-1==n.indexOf(i)&&o==e[1][i]&&(t[i]=-111111111)})),t},b=function(e){const t=e.auth;if(t.statux=1,e.DEVs.length>1&&e.mcc_statux.hasOwnProperty(e.DEVs[0])){const n=e.mcc_statux[e.DEVs[0]];t.sn=n[3],t.id=n[2],t.statux=n[1],t.token=e.DEVs[0],e.setAUTH(t)}},D=function(e){z.btnCANCEL[0].option("disabled",!0),z.btnOK.option("disabled",!0),clearTimeout(_.hwndTimeout),c.reject(),r.reject(),c=$.Deferred(),r=$.Deferred();const t=z.btnOK.__k,o=Math.random().toString(36).slice(2,10)+(new Date).getTime(),i=function(i,s,a){if(i[0][1]==s[1]&&-9999==s[1]){var c=[-1];switch(s[2]){case 1:N.find(".mt-3").html(a[6]);break;case 10001:c[0]=1,c[1]=JSON.parse(a[6]);break;case 50:c[0]=2,c[1]=a[6]}if(c[0]>-1&&(n.WDM[t[0]].wdms[J("serno","value")][c[0]]=c[1]),0==s[0])return clearTimeout(_.hwndTimeout),delete v[o],e?3:2}return 0},s=t&&t.length>2&&t[2].split("\n"),l=[1,-9999,JSON.stringify([(new Date).getTime()]),t[3],g(n.WDM[t[0]].wdms[J("serno","value")],[J("rtevt","value")?1:0,J("timezone","selectedItem").tim,J("timezone","value"),J("isatt","value")?1:0,0],[1,2])],d=["DeviceName"],u=function(){if(!a)if(s.length>0){var e=apisvr.a$.trim(s.shift());"~"==e.substring(0,1)?(k.WriteLn({type:"input",prompt:" ▲ ",value:e,typeDelay:10},(function(e){u()})),d.forEach((function(n){var o=e.split(n+"=");2==o.length&&"~"==o[0]&&(t[4][n]=o[1])}))):u()}else c.resolve("info")};v[o]=function(o,s,l){var d=0;if(0==l){var u=this;(t[1]==o[2]||e)&&(d=i(u,o[3],o[4]))}else d=1,a=!0,c.reject("info"),L(H[7][l],"text-danger",2,!0),z.btnOK.option("visible",!1);if(d>0){if(delete v[s],2==d)return r.resolve(o[5]),void b(n.WDM[t[0]]);3==d&&(c.resolve(""),r.resolve(o[5])),z.btnCANCEL[0].option("disabled",!1),z.btnOK.option("disabled",!1)}}.bind([l]),$.when(c,r).done((function(e,o){V.isSAVE=1,V.saveDB(n.WDM[t[0]].wdms,o),V.hide()})),c.promise(),r.promise(),_.hwndTimeout=setTimeout((function(){_.bind([null,3])()}),25e3),t[4]={},e?e(o):(n.WDM[t[0]].emit(n.___[1],[[t[1]],l]),u())},w=function(e,t,o,i){if(!e)return;const s=atob(e).split(String.fromCharCode(4)),a="localconn"!=s[s.length-1]?h(s[1]):(gloEVTs.giaidoan2_localDEV(1==t?"destroy":"disconn",[s[s.length-2],s[0],[,,["del",o,i[0]]]]),"return");if("return"==a)return"localconn";if(n.WDM[a]){var c=n.WDM[a].DEVs.indexOf(s[0]),r=["0","1"];if(1===t&&(n.WDM[a].wdms.hasOwnProperty(o)&&(r=[o,n.WDM[a].wdms[o][0]]),n.WDM[a].emit(n.___[2],[s[0],0,r]),console.log([s[0],0,r])),c>-1){var l=n.WDM[a].DEVs.splice(c,1);l.length>0&&(n.WDM[a].auth.sn!=o||n.WDM[a].auth.sn==o&&0!=n.WDM[a].auth.statux||s[0]!=n.WDM[a].auth.token)&&gloEVTs.dumeTHIETBI.f1.bind(["offline",l[0],,,["del"].concat(r)])()}0==n.WDM[a].DEVs.length?setTimeout((function(){n.WDM[a].off("disconnect").close([1]),delete n.WDM[a]}),1===t?1e3:1):1===t&&(n.WDM[a].auth={token:n.WDM[a].DEVs[0],statux:1})}},E=function(e){var o,i=e.length>4,s=i&&"wdmso"==e[4][0]?(o=e[4][4],e[4][3]):[];return"kickoff"==e[0]?n.fnHANDSHAKE([e[0],[e[1]],e[0],"0",s,o]):"usr"==e[0]?n.fnHANDSHAKE([e[0],[e[1]],e[0],e[3],s,o]):["online","offline"].indexOf(e[0])>-1?(n.fnHANDSHAKE(["sigLIVE",[e[1]],e[0],e[3],s,o],e),"cntU"!==e[3]&&gloEVTs.dumeTHIETBI.f1.bind(e)()):e[3]&&e[3]===n.___[0]&&t.trigger(e[3]+"S",[e[4].split("\t")]),i||s.length>0},O=function(){if(!this||!this[0])return;const e=this,t=atob(e[0]).split(String.fromCharCode(4)),o="localconn"!=t[t.length-1]?h(t[1]):("-9999"==e[5]?s(["kickoff"]):gloEVTs.giaidoan2_localDEV("connect",[[t[t.length-2],"0",e[2]],e[0],e[4],function(e){s&&"function"==typeof s&&s(["connect"])}]),"return"),a={token:t[0],statux:e[1],id:e[2],sn:e[3]},c=function(){n.WDM[o].on("connect",(function(e){if(s&&"function"==typeof s)s(["connect"]);else{n.WDM[o].auth;var t=n.WDM[o].sockAUT(),a=n.WDM[o].mcc_statux;n.WDM[o].DEVs.forEach((function(e){if(e!=t.token)for(var i in a)if(a.hasOwnProperty(i)){const t=a[i];e==t[0]&&n.WDM[o].emit(n.___[2],[e,1,1,t[2],t[3]])}}))}i>0&&p()})).on("connect_error",(function(e){console.log("connect_to_wdms_server connect_error");var t=!1,a=0,c="eeeeeeee",r=e.message&&e.message.split(c)||[];2==r.length&&""==r[0]&&"disconnect"==(c=JSON.parse(r[1]))[0]&&(a=c[1],r=c[2],t=!0),s&&"function"==typeof s&&s(["connect_error",t]),i>0&&(t?L(H[2][a],"text-danger",r):m(1)),n.WDM[o].DEVs&&"offline"!=n.fnHANDSHAKE.currMSG&&n.WDM[o].DEVs.forEach((function(e){n.fnHANDSHAKE(["sigLIVE",[e],"offline",0,[]])}))})).on("reconnect",(function(e){console.log("connect_to_wdms_server reconnect")})).on("disconnect",(function(e,t){console.log("connect_to_wdms_server disconnect"),n.WDM[o].DEVs&&n.WDM[o].DEVs.forEach((function(e){n.fnHANDSHAKE(["sigLIVE",[e],"offline",0,[]])}))})).on("DEV_MSG",(function(e){"RST_CMD"==e[0]?_.bind([e,e[1]])():(i>0&&("online"==e[0]?p():m(2)),"cntU"!==e[3]&&"DEV_JOIN_RMV"==e[0]&&(b(this),e[0]="online"),E(e)&&"wdmso"==e[4][0]&&(console.log("new wdmso"+(new Date).getTime()+JSON.stringify(e[4][3])),this.wdms[e[4][1]]=[e[4][2],e[4][3],e[4][4],e[4][5]]))}),"RTEVT").STARTd()};if("return"==o)return console.log(t[t.length-2]),[o,e[0]];const r=sockjo.getSOCK(o),l=r&&r.instance.DEVs.indexOf(t[0])>-1;if(!0===l&&n.hasOwnProperty("onlyDEV_ATT_EVT")||(n.WDM[o]=r),n.WDM[o]){if(!0===l&&n.hasOwnProperty("onlyDEV_ATT_EVT"));else{var d=!1;n.WDM[o].hasOwnProperty("instance")&&(n.WDM[o]=n.WDM[o].instance,c(),d=n.WDM[o].DEVs.indexOf(t[0])>-1),n.WDM[o].auth=a,n.WDM[o].emit(n.___[2],[t[0],1,e[1],e[2],e[3]]),d&&-1!=n.WDM[o].DEVs.indexOf(t[0])||n.WDM[o].DEVs.push(t[0])}s&&"function"==typeof s&&s([n.___[2]])}else{const e=JSON.parse(t[1]).reduce((function(e,t){return e+String.fromCharCode(parseInt(t,16))}),"");var u=window.location.protocol;u=u.indexOf("file:")>-1?1===window.debuglocal?"http:":"https:":u,n.WDM[o]=new JO(u+"//"+(u.indexOf("https")>-1?e.split(":")[0]:e),{auth:a,transports:["websocket","polling"]},[o]),c(),n.WDM[o].auth=a,n.WDM[o].DEVs=[t[0]]}return[o,t[0]]},C=function(e,t,n){if(o>0){clearTimeout(o);var i=e-parseInt(((new Date).getTime()-l.getTime())/1e3);e>0&&i<=0?X():(e>0?i+=t[0]:(i=Math.abs(i)+" seconds passed",n=t[Math.abs(e)],e-=1,Math.abs(e)>t.length-1&&(e=0)),k.WriteLn({type:"input",prompt:" ⏳ "+i,value:n,typeDelay:30},(function(i){-2!=o&&(o=setTimeout((function(){C(e,t,n)}),2e3))})))}},y=function(){U.empty(),clearTimeout(o),o=-2,U.removeClass("timeout")},T=function(e,t,o,i){n.WDM[e].DEVs.indexOf(t[0]);const s=Math.random().toString(36).slice(2,10)+(new Date).getTime(),a=setTimeout((function(){_.bind([[,,t[0]],3])()}),-505==o[1]?3e4:8e3);v[s]=function(t,o,s){const a=this,c=function(e){clearTimeout(a[2]),delete v[o]};a[1]==t[2]&&(0==s?0==t[3][0]?(c(),i("OK",t,o)):10001==t[3][2]&&n.WDM[e].wdms[doD.serno]&&(n.WDM[e].wdms[doD.serno][1]=JSON.parse(t[4][6])):(c(),"-505"!=a[0][1]&&toastMsg(H[8][3]+"("+s+")","error"),i("ERR",[,,,[0]],o)))}.bind([o,t[0],a]),n.WDM[e].emit(n.___[1],[[t[0]],o])},x=function(e,t){t=t.concat([e[2],e[3]]),e&&"function"==typeof e[4]?(t.push(e[5]),e[4](t)):($(e[0].target).trigger("rst_devstas",t),toastMsg(H[8][4],"success"),srclocked(!1))},S=n._cmddev=function(){const e=this,t=e[1],o=e[2].tok,i=[t,e[6]||(parseInt(e[3])>0?"RocX8fPu8CM6HymwUub1GmcFvvegwXZWz4CGeTJykziuiTC8P/bEhfjYbn4mjk+r5FIAhp5EsONgoKuUMlRd/Hii5dbxS/OkKuc3yHSeXb9UWSVin6FFhEe5y7U8UAiXma98+r/F7oDlH1EPgcP9wtokBMHbrbO/xofN6XZU12qm8ncMsaHhiw1hDI5ub4udUOkdpXLMqfuT1s6qVjMnNw==":"RocX8fPu8CM6HymwUub1GoXQWDXTSmJ2D81pQIk1TRbExeU0Wp3Dl6Jcekat1tYVSaGDV3GlgoaS6jlZ/MPPlysyqysvJXDB8zQdvz+ZtRFvcozp5Pk8pdR70AF3Z+28TXidUGkH8WU7+a0nHEXVWHC5pGAVtc3GRerCMjsJMJPjbV063/tyaV8GouSOscPOw8ALHkvFpBbz6B7tsnzArcbttt8kbR1ITGxlZuXvbrHE7MYslf1ajZTlaTN7hB50"),e[5]||"0|100|0|$!N;$!N;$!N;|0|2",e[2].id,,e[3]],s=atob(o).split(String.fromCharCode(4)),a="localconn"!=s[s.length-1]?h(s[1]):(c=[[s[s.length-2]],o,i,function(t,n){const o=[n,,,["localconn",i[0],i[2]]];if(n[4]&&n[4].length>0){const e=n[4][n[4].length-1];e.indexOf('["re"')>-1&&o.push(JSON.parse(e))}x(e,[t,o]),srclocked(!1)}],gloEVTs.giaidoan2_localDEV("devcmd",c),"return");var c;"return"!=a&&n.WDM[a]&&T(a,s,-505==t?(i.unshift(e[0]),i):[1,t,"tinhsau"],(function(t,n,o){try{0==n[3][0]&&x(e,[t,n])}catch(e){devDlg(0,e.toString(),"tikestep_device / exe_wdmscmd").show(),srclocked(!1)}}))};var M,k,N,V,A;const W=function(e,t){H.$regstep=e;const n=N.find(".wdms-regstep span.btn");for(var o=0;o<n.length;o++){var i=$(n[o]),s=i.next();if(s.removeAttr("class").html("<small>"+s.text()+"</small>"),o<=e)if(o<e)i.removeAttr("disabled").removeClass("btn-default btn-warning").addClass("btn-success"),i.text("✔"),s.text(s.text()),s.addClass("text-success");else{var a="btn-success";t>0&&(a="btn-warning",s.text(s.text()).addClass("text-warning")),i.removeAttr("disabled").removeClass("btn-default").addClass(a),N.find(".text_conn").text(s.text())}else i.attr("disabled","disabled").removeClass("btn-success").addClass("btn-default")}n.closest(".wdms-regstep").css("display","")},I=function(e,t,n){z.btnCANCEL[0].option({icon:z.btnCANCEL[e],text:z.btnCANCEL[t]}),z.btnCANCEL.act=n},L=function(e,t,n,o){(H[4][0]!=n||o)&&(H[4][0]=n,N.empty(),y(),N.append([U,$("<div>"+H[0].replace("$TIT$",H[4][n])+'<div class="mt-3 text-center"><i class="fa fa-quote-left"></i> '+e+' <i class="fa fa-quote-right" aria-hidden="true"></div></div>')]),U.next().addClass(t),3==n?I(3,4,1):I(1,2,2))},P=function(){L(H[3],"text-success",3),y(),U.addClass("timeout"),o=1,l=new Date,C(120,[H[6][5]],H[6][6])},j=function(e){var t=/^(http|https):\/\/[^:\/]+(?::(\d+))?/,o=(e=A.getEditor("wdms").option("value")).match(t),s=document.createElement("a"),a=function(){return e=s.pathname.split("/"),{auth:{token:"token-secure-socket",ireg:{sn:J("serno","value"),pkey:J("pkey","value"),tz:J("timezone","selectedItem").tim,rtevt:J("rtevt","value")?1:0,grp:e[e.length-1],tep:0}},transports:["websocket","polling"]}};null===o&&(e=window.location.protocol.indexOf("file:")>-1&&1===window.debuglocal?window.location.protocol+"////"+e:window.location.protocol+"//"+e),s.href=e,n.socIO&&n.socIO.off();var c=s.protocol.indexOf("file:")>-1?"wss://":"";c=c+s.hostname+(""!=c||s.protocol.indexOf("https")>-1?":444":":11015"),1===window.debuglocal&&window.location.protocol.indexOf("file:")>-1&&(c="ws://"+A.getEditor("wdms").option("value").split(":")[0]+":11015"),n.socIO=io(c,a()),n.socIO.on("connect",(function(e){P()})).on("connect_error",(function(e){var t=0,n="eeeeeeee",o=e.message&&e.message.split(n)||[];2==o.length&&""==o[0]?"disconnect"==(n=JSON.parse(o[1]))[0]&&(t=n[1],o=n[2]):o=2,L(H[2][t],"text-danger",o)})).on("reconnect",(function(e){})).on("disconnect",(function(e,t){L(H[2][0],"text-danger",2),console.log("elUI.socIO.on('disconnect', (reason): "+e)})).on("reg_wdms",(function(e){if("begincmd"==(e=JSON.parse(e))[0])y(),k.WriteLn({type:"input",prompt:" ▲ ",value:"We are checking your WDMS device, please wait a moment ...",typeDelay:20},(function(t){if(0==H.$regstep){var n,o=$('<span class="progress"></span>');o.appendTo(U),n=o.innerWidth(),H.$pCHAR=[$('<span class="progress-bar" style="width:'+.2*n+'px; position: absolute; white-space: nowrap; transition: none 0s ease 0s;">20%</span>').appendTo(o),e[1],n]}})),W(0,0);else if("handshakecmd"==e[0]){var t=H.$pCHAR;if(t){var o=e[1]/t[1],s=parseInt(100*o),a=o*t[2];t[0].width(a>t[2]?t[2]:a).text((s>100?100:s)+"%")}}else if("handshakeend"==e[0])"CHK::OK"!=e[1]?(console.log("reg_check_err"),L(H[5][0],"text-danger",4),W(0,1)):(y(),k.WriteLn({type:"input",prompt:" ▲ ",value:H[5][1],typeDelay:20},(function(e){})),W(1,0));else if("activeend"==e[0])"WDMS::OK"!=e[1]?(console.log(e[1]),L(H[5][2]+e[1],"text-danger",4),W(1,1)):(y(),k.WriteLn({type:"input",prompt:" ▲ ",value:H[5][3],typeDelay:20},(function(e){})),W(2,0));else if("regresult"==e[0])if(""!=e[1]){this.auth.ireg.tep=-9999;var c=A.option("formData");c.tok=e[1],e[4]&&(c.fcmk=e[4]),m._lastMSG=-1,i=1,z.btnOK.__k=O.bind([e[1],0,c.id,c.serno,[q(c)]])(),z.btnOK.__k.push(e[2]),z.btnOK.__k.push(e[3]),I(1,2,2),n.socIO.off("connect").off("disconnect").off("connect_error").off("reg_wdms")}else L(H[5][2],"text-danger",4),W(2,1);$(".sockmsg").text(e)}))},K=function(){N.html(""),A.option({readOnly:!1,disabled:!1}),z.btnWDMS.option("visible",!0),z.btnCLOSE.option("disabled",!1),z.btnCANCEL[0].option("disabled",!1),z.btnOK.option("disabled",!1),z.btnOK.option("visible",!1),z.btnOK.__k=null,A._$element.removeClass("opac2"),I(1,2,0),V.preventCANCEL_AGAIN=0,H[4][0]=0},R=function(e,t){n.dogTimezone[0].visible=!0;var o=!1;if(t>-1&&e)for(var i in n.WDM)if(n.WDM.hasOwnProperty(i)){var s=n.WDM[i].wdms;s.hasOwnProperty(e.serno)&&(o=!0,t=s[e.serno][1],e.rtevt=1==t[0],e.time_zone=t[1],e.timezone=t[2],e.isatt=1==t[3],2e3!=t[1]&&(n.dogTimezone[0].visible=!1))}o||(e.rtevt=!0,e.time_zone=2e3,e.timezone=2e3,e.isatt=!0),A&&J("timezone","dataSource",n.dogTimezone)},J=function(e,t,n){var o=A.getEditor(e);if(void 0===n)return o.option(t);o.option(t,n)},z={btnCANCEL:[null,"revert",n.lan.js_009_19||"Cancel","ti ti-unlink",n.lan.js_009_20||"Stop MOBI","tips","Hoan tat"]},U=$('<div class="more-link"></div>'),H=['<div class="wdms-regstep text-small" style="display:none;"><div> <span class="btn btn-sm btn-default">1</span><p><small>Check</small></p></div><div>     <span class="btn btn-sm btn-default">2</span>    <p><small>Active</small></p></div><div>    <span class="btn btn-sm btn-default">3</span>    <p><small>Online</small></p></div></div><div><div class="dog_canvas"></div><div class="box_conn"><div class="text_conn text-uppercase">$TIT$</div><div class="comp"></div><div class="loader_conn"></div><div class="con"></div><div class="byte"></div><div class="server"></div></div></div>',"Connect to Mobi service ...",["Connect error, please check WDMS or IP address and try again  ...","Token invalid for connection!","There is another Active your device."],(n.lan.js_009_21||"Please enter server Mobi into device")+'. <a href="javascript:void(0)">'+(n.lan.js_009_22||"Click here for a help")+" </a>",[0,"CONNECTING","ERROR","CONNECTED","UNSUPPORTED","INVALID","DUPLICATED"],["Sorry, our service have not yet support your device ...","Congratulation your device passed our check! Next step we establish WDMS cloud for your device, keep patient ....","Device actived error: ","Device try connecting to our WDMS server ..."],["Complete by click OK button",["Opps! Mobi service down...","Please check Device network connection...","Please check Device IP, DNS, Gateway...","... Try more please !"],["Humm! We are looking for your device...","Please check Device network connection...","Please check Device IP, DNS, Gateway..."],"<i>"+(n.lan.js_009_23||"Please confirm you want to skip MOBI activation")+" ?</i>","<i>"+(n.lan.js_009_24||"Please confirm that you want to remove the device")+" ?</i>"," seconds next expired","Is your device ready ...?"],["","Standalone command timeout","Can not find MOTER","Mobi service timeout","Can not find your Device"],n.lan.js_009_25||["<i>Please confirm save changes ?</i>","Opps! no changes for updating.","The device is offline, it can not be updated !","An error occurred during the update, please try again.","Update successful"]],F=$('<div class="fuck-title text-center text-uppercase ">Activate Mobi function</div>'),B=function(e,t){DevExpress.ui.dialog.confirm(e,null,!1).done((function(e){setTimeout((function(){t(e)}),100)}))},G=function(e){var t,n=z.btnUPT.option("visible");["ten","serno","wdms","pkey"].indexOf(e.dataField)>-1&&(t=apisvr.a$.trim(e.value),e.component.getEditor(e.dataField).option({value:t})),n&&(z.btnUPT.option("disabled",!1),V._cpFieldChanged[0][e.dataField]=t||e.value),V.isSAVE=1};function X(e){document.activeElement&&document.activeElement.blur(),y();var t=function(){o();var e=A.option("formData");w(e.tok,1,e.serno),!e.tok&&n.localDEV&&gloEVTs.elUI_localDEV("disconn",[e.wdms]),K(),V.preventCANCEL_AGAIN=1,V.hide()},o=function(){var e=0;return 0!=z.btnCANCEL.act&&n.socIO&&(n.socIO.close(),e=1),K(),1==e};e?z.btnOK.__k?z.btnOK.option("visible")?B(H[6][3],(function(e){e&&t()})):t():o()||(V.preventCANCEL_AGAIN=1,V.hide()):o()}function Z(e,t,n){var o=A.getEditor(e),i=o.option("value"),s=o._$element.data("dxValidator"),a=s&&s._getValidationRules()[0],c=100;if(a)return n&&(null==i||""===apisvr.a$.trim(i.toString())?c=0:n.forEach((function(t){t[e]==i&&(c=1)}))),c<100?(a.message=t[c],a.isValid=!1,o.focus()):(a.message="",a.isValid=!0),s.validate(),c}function q(e){return JSON.stringify([e.rtevt?1:0,e.time_zone,e.timezone,e.isatt?1:0,0])}const Q={seri:[_La$N("js_009_25|11",n.lan)||"Serial empty",_La$N("js_009_25|12",n.lan)||"Serial duplicated"],ip:[_La$N("js_009_25|13",n.lan)||"IP empty",_La$N("js_009_25|14",n.lan)||"IP duplicated"],id:[_La$N("js_009_25|15",n.lan)||"Id empty",_La$N("js_009_25|16",n.lan)||"Id duplicated"],ten:[_La$N("js_009_25|17",n.lan)||"Name empty",_La$N("js_009_25|18",n.lan)||"Name duplicated"]},Y=function(e,t,o){if(0==e[0]){if(Z(e[1],Q.seri,t)<100)return}else Z("wdms",Q.ip,t.filter((function(t){return t.kind==e[0]})));if(!(Z("id",Q.id,t)<100||Z("ten",Q.ten,t)<100)){if(A.validate().isValid)return"OK";toastMsg(_La$N("js_009_25|5",n.lan)||"Require to fill information","error",null,"top center")}};function ee(e){const t=oe.kind,n=this[0],o=this[1];"OK"===Y(t,n,o)&&(document.activeElement&&document.activeElement.blur(),A.option("readOnly",!0),z.btnWDMS.option("visible",!1),z.btnCLOSE.option("disabled",!0),L(H[1],"",1),A._$element.addClass("opac2"),setTimeout((function(){var e=function(){const e=A.option("formData");if(101==o)return w0w._cordovaNative?gloEVTs.giaidoan2_localDEV("connect",[[e.wdms,"0",e.id],null,[q(e),,e.pkey]]):void L(H[2][0],"text-danger",2);0==t[0]?_gsC(sockjo.soclib,"js",(function(e){j()}),"socket.io.js"):(m._lastMSG=-1,i=1,z.btnOK.__k=O.bind(["STZSZE1FOFo4WmNUVXNId3RwaW5odUE5RlhFL0c1b2p1and6MDVsOHc2ZmJseWp0RFBOZzZHc2Rpb3E2ZWdGVWZWcXkzT2cvak9Eb3pOQ2JMelVKa0QwMitiejJqQS9YeXdZQ2dUN1JjOE09BFsiMzEiLCIzOSIsIjMyIiwiMmUiLCIzMSIsIjM2IiwiMzgiLCIyZSIsIjMxIiwiMmUiLCIzOSIsIjMxIiwiM2EiLCIzMyIsIjMwIiwiMzAiLCIzMCJd",1,0,0,[q(e)]])(),z.btnOK.__k.push("msg[2]"),z.btnOK.__k.push("0"),I(1,2,0))};k?e():_gsC(srcpf$+"/media/js/termynal.js","js",(function(){k=new Termynal(U[0],{cbNewLine:function(){},lineDelay:5}),e()}),"TermynalJS")}),50))}function te(e,o){var s=this[0],a=this[1];if("new_localconn_chk"===o)return s(e,o);if(i=0,1==V.isSAVE&&s&&"function"==typeof s){V.isSAVE=0;var c=A.option("formData"),r=[];if(c.time_zone=J("timezone","selectedItem").tim,c.wdmo=JSON.stringify([]),e){var l=J("serno","value");e.hasOwnProperty(l)&&(c.wdmo=JSON.stringify(e[l]),e[l].hasOwnProperty("__uuidphone")&&-1===a&&(c.__uuidphone=e[l].__uuidphone),r=["wdmso",l,e[l][0],e[l][1],e[l][2]])}if(-1===a){var d=z.btnOK.__k,u=d[4],f=d[1],p=c.tok;for(var m in p||(c.tok=f,p=f),u)u.hasOwnProperty(m)&&c.hasOwnProperty(m)&&(c[m]=u[m]);s(c),t.find('.mcc-statux[tok="'+p+'"]').attr("tok",f).data(f,[f,1,c.id,c.serno]),0==c.kind&&(n.WDM[d[0]].mcc_statux[f]=[f,1,c.id,c.serno]),E(["online",f,[],o,r]),console.log("dosave")}else s(c,a);J.__doD=c,0==c.kind&&gloEVTs.elUI_localDEV&&gloEVTs.elUI_localDEV("fcmdev",[c,"3"])}}function ne(){document.activeElement&&document.activeElement.blur();var e=function(){V.preventCANCEL_AGAIN=1,V.hide(),srclocked(!1)};if(1==V.isSAVE){const o=V._cpFieldChanged[1],i=V._cpFieldChanged[0],s=[];for(var t in i)i.hasOwnProperty(t)&&o.hasOwnProperty(t)&&i[t]!=o[t]&&s.push(t);if(s.length>0){if(this){const e=oe.kind,t=this[0],n=this[1];if("OK"!==Y(e,t.filter((function(e){return e.id!=o.id})),n))return}return void B(H[8][0],(function(t){if(!t)return;srclocked(!0),z.btnCLOSE.option("disabled",!0),z.btnCANCEL[0].option("disabled",!0),z.btnUPT.option("disabled",!0);const o=A.option("formData"),i=(o.time_zone=J("timezone","selectedItem").tim,o.tok),s=atob(i).split(String.fromCharCode(4)),a="localconn"!=s[s.length-1]?h(s[1]):(function(){const t=q(o);gloEVTs.giaidoan2_localDEV("edit",[[s[s.length-2],"0",o.id],i,[t,,o.pkey],function(t,n){n||((n={})[o.serno]=JSON.parse(o.wdmo)),V.saveDB(n),toastMsg(H[8][4],"success"),e(),gloEVTs.giaidoan2_localDEV("fcmdev",[o,"33"])}])}(),"return");if("return"!=a)if(n.WDM[a]){n.WDM[a].DEVs.indexOf(s[0]);var c=Math.random().toString(36).slice(2,10)+(new Date).getTime(),r=function(){clearTimeout(_.hwndTimeout),delete v[c]},l=[1,-9998,g(n.WDM[a].wdms[J("serno","value")],[o.rtevt?1:0,o.time_zone,o.timezone,o.isatt?1:0,0],[])];v[c]=function(t,i,s){0==s?0==t[3][0]?(r(),toastMsg(H[8][4],"success"),V.saveDB(n.WDM[a].wdms),e()):10001==t[3][2]&&n.WDM[a].wdms[o.serno]&&(n.WDM[a].wdms[o.serno][1]=JSON.parse(t[4][6])):(r(),toastMsg(H[8][3]+"("+s+")","error"),e())}.bind([l]),_.hwndTimeout=setTimeout((function(){_.bind([null,3])()}),8e3),n.WDM[a].emit(n.___[1],[[s[0]],l])}else toastMsg(H[8][2],"error"),e()}))}toastMsg(H[8][1],"warning")}e()}const oe=function(e){return"serno"},ie=function(e){return"Serial number"},se=function(e){return 0==e?"Mobi server":"IP Address"},ae=function(e){return _La$N("js_009_18|"+(0==e?e:1),n.lan)||(0==e?"Start MOBI":"Connect")},ce=function(e){return 0==e?[{type:"custom",validationCallback:function(e){return!e.rule.hasOwnProperty("isValid")||e.rule.isValid}},{type:"required"}]:[]};if(this._Device=function(e,o,i,s,a){M=null,R(e.dat,s);const c=function(e){const t=A.getEditor("txt1"),n=oe.kind?oe.kind[0]:a;t&&t._$element.closest(".dx-item")[("0"==n?"remove":"add")+"Class"]("d-none d-sm-block"),"-1"==s&&(t.option("value","0095140400113"),A.getEditor("wdms").option("value","0"==n?"wdms.dnd.vn:16868/abc":"192.168.1.249")),z.btnWDMS&&z.btnWDMS._$element.find(".dx-icon").attr("class","dx-icon "+(101==n?"ti-plug":"dx-icon-globe")),srclocked(!1)},r=function(e){1!=V.preventCANCEL_AGAIN&&X(),window.cdv_jsex&&e.component._$popupContent.trigger("cdvHidden",[V])},l=function(e){setTimeout((function(){A.updateDimensions()}),200),d(),M=G,window.cdv_jsex&&e.component._$popupContent.trigger("cdvShown",[V])},d=function(){const e=A?A.option("formData").kind:a;oe.kind=[e,oe(e)],z.txt1._$element.closest(".dx-item")[("0"==e?"remove":"add")+"Class"]("d-none d-sm-block"),z.txt1.option({disabled:0!=e});const t=z.btnUPT.option("visible");A.getEditor("wdms").option("readOnly",t),A.getEditor("pkey").option("readOnly",t),A.getEditor("serno").option("readOnly",t),t||A.getEditor("timezone").option("value",2e3)};var u=-1;admin$.DEV((function(){setTimeout((function(){if(V){A.option("formData",e.dat),-1==s?z.btnWDMS.option({onClick:ee.bind([i,a]),text:ae(a)}):z.btnUPT.option({onClick:ne.bind([i,a])}),K(),z.btnUPT.option({visible:-1!==s,disabled:!0}),z.btnWDMS.option("visible",-1===s),Z("id",Q.id,[]);var f=oe.kind;f[1]=oe(a),A.itemOption("txt1","dataField",f[1]),A.itemOption("txt1","label",{text:ie(a)}),A.itemOption("txt1","validationRules",ce(a)),A.itemOption("wdms","label",{text:se(a)}),A.getEditor("txt1").option({disabled:0!=a}),f[0]=a,Z(f[1],0==a?Q.seri:Q.ip,[]),oe.kind=f,V.option({onShowing:c,onHidden:r,onShown:l})}else V=$("<div></div>").appendTo(t.on("onRemoving",(function(e){V.dispose()}))).dxPopup({contentTemplate:function(t){return A=$("<div class='filter_fucking' style='min-height:50vh'></div>").appendTo(t).dxForm({labelMode:"floating",formData:e.dat,screenByWidth:function(e){return e<400?"xs":e<500?"sm":"md"},colCountByScreen:{md:4,sm:1},items:[{dataField:"wdms",colSpan:2,label:{text:se(a)},validationRules:[{type:"required",message:_La$N("js_009_25|6",n.lan)||"Require to fill"}]},{name:"txt1",dataField:oe(a),colSpan:2,label:{text:ie(a)},editorOptions:{disabled:0!=a,onContentReady:function(e){z.txt1=e.component,clearTimeout(u),A&&(u=setTimeout(d,300))}},validationRules:ce(a)},{itemType:"group",colCountByScreen:{sm:4,xs:2},colSpan:4,colCount:4,items:[{dataField:"pkey",label:{text:"Mobi P-key"},validationRules:[{type:"custom",validationCallback:function(e){return!e.rule.hasOwnProperty("isValid")||e.rule.isValid}}]},{dataField:"id",label:{text:"No."},validationRules:[{type:"custom",validationCallback:function(e){return!e.rule.hasOwnProperty("isValid")||e.rule.isValid}}]},{dataField:"ten",colSpan:2,label:{text:n.lan.js_009_17||"Name"},editorOptions:{maxLength:15},validationRules:[{type:"custom",validationCallback:function(e){return!e.rule.hasOwnProperty("isValid")||e.rule.isValid}}]}]},{itemType:"group",caption:n.lan.js_009_4||"Advanced setting",cssClass:"advance-item",colCountByScreen:{md:4,sm:1},colSpan:4,colCount:4,items:[{dataField:"area",colSpan:2,editorOptions:{text:"(Default)",disabled:!0},label:{text:n.lan.js_009_8||"Area"}},{dataField:"timezone",colSpan:2,editorType:"dxSelectBox",editorOptions:{dataSource:n.dogTimezone,displayExpr:"dis",valueExpr:"id"},label:{text:n.lan.js_009_6||"Timezone"}}]},{itemType:"group",colCountByScreen:{sm:4,xs:1},colSpan:4,colCount:4,items:[{dataField:"isatt",colSpan:2,editorType:"dxCheckBox",label:{text:n.lan.js_009_7||"Attendance device"}},{dataField:"rtevt",colSpan:2,editorType:"dxCheckBox",label:{text:n.lan.js_009_5||"Realtime event"}}]}],readOnly:!1,showColonAfterLabel:!0,labelLocation:"left",minColWidth:300,colCount:4,onFieldDataChanged:function(e){M&&"function"==typeof M&&M(e)}}).dxForm("instance"),N=$("<div class='font-italic'></div>").appendTo(t),t},deferRendering:!1,width:"100%",maxWidth:600,height:"auto",fullScreen:"phone"==DevExpress.devices._realDevice.deviceType,showTitle:!0,visible:!1,dragEnabled:!1,showCloseButton:!0,animation:{show:{type:"pop"}},onHidden:r,onShowing:c,onShown:l,onContentReady:function(e){e.component._$wrapper.addClass("tbh-filter-popup keep-def containscroll caidat_push_device"+("phone"==DevExpress.devices._realDevice.deviceType?"":" caidat_push_device_overflow"));var t=e.component._$content;z.btnCLOSE=t.find(".dx-closebutton").dxButton("instance")},toolbarItems:[{html:F,location:"after"},{widget:"dxButton",location:"before",options:{icon:"help",type:"success",stylingMode:"text",onClick:function(e){}}},{widget:"dxButton",toolbar:"bottom",location:"center",options:{icon:z.btnCANCEL[1],elementAttr:{class:"show-orther-more"},text:z.btnCANCEL[2],stylingMode:"outlined",onContentReady:function(e){z.btnCANCEL[0]=e.component,z.btnCANCEL.act=0},onClick:X}},{widget:"dxButton",toolbar:"bottom",location:"center",options:{icon:"globe",elementAttr:{class:"show-orther-more"},text:ae(a),type:"default",stylingMode:"outlined",visible:-1===s,onContentReady:function(e){z.btnWDMS=e.component},onClick:ee.bind([i,a])}},{widget:"dxButton",toolbar:"bottom",location:"center",options:{icon:"ti ti-save",text:_La$N("js_007_29",aLAN)||"Save",type:"success",stylingMode:"outlined",visible:-1!==s,disabled:!0,onContentReady:function(e){z.btnUPT=e.component},onClick:ne.bind([i,a])}},{widget:"dxButton",toolbar:"bottom",location:"center",options:{icon:"tips",type:"success",stylingMode:"outlined",text:"OK",visible:!1,onContentReady:function(e){z.btnOK=e.component},onClick:function(e){document.activeElement&&document.activeElement.blur(),D()}}}]}).dxPopup("instance");F.html(e.txt),V._cpFieldChanged=[{},JSON.parse(JSON.stringify(e.dat))],V.isSAVE=0,V.show(),V.saveDB=te.bind([o,s])}),10)}))},this._confirmDEL=function(e,t){admin$.DEV((function(){setTimeout((function(){B(H[6][4],(function(e){t(e,w)})),srclocked(!1)}),10)}))},this._cmddev=function(e,t,n,o,i,s,a,c){i||"50"==t?S.bind([e,t,n,o,i,s,a,c])():admin$.DEV(S.bind([e,t,n,o,i,s,a,c]))},this.wdms_conn=function(e,o,i){gloEVTs.devcnt=o.length;var a=o.length,c=0,r=t.find(".mcc-statux"),l=function(){if(c<a){s=function(e){s=null,"connect_error"==e[0]&&e[1]&&w(o[c].tok,0,""),c+=1,l()};const e=o[c],t=[e.tok,1,e.id,e.serno,[q(e),,e.pkey],e.kind],i=O.bind(t)();i&&(t[0]=i[1],r.map((function(n,o){o.getAttribute("tok")===e.tok&&(o.setAttribute("tok",i[1]),$(o).data(i[1],t))})),n.onlyDEV_ATT_EVT&&n.onlyDEV_ATT_EVT.bind([i,e,t])(),0==e.kind&&(n.WDM[i[0]].mcc_statux[i[1]]=t))}};a>0&&l()},n.__.forEach((function(e){t.on(e,u[atob(e)])})),window.gloEVTs||(window.gloEVTs={}),!gloEVTs.giaidoan2||!gloEVTs.devcnt||0==gloEVTs.devcnt){gloEVTs.giaidoan2_localDEV=function(){const e=w0w._cordovaNative,t=(new Date).getTime()+Math.random().toString(36).substring(7),o={};if(e){const i={},s=function(o,s){var a,c=[],r={SND_OK:function(e){},conn_err:function(e,t){L(H[2][e]?H[2][e]:H[2][0],"text-danger",t||2),delete i[r.IP],delete r.IP},connect:function(n){if(delete(c=[]).__uuidphone,r.TOK||z.btnCANCEL[0].option("disabled",!1),"0"==n||n.indexOf("CONN_STA")>0&&n.indexOf("offline")>0)r.TOK||r.conn_err(n.split(String.fromCharCode(4))[2]);else{if(n=n.split(";"),!r.TOK){if("1"===V.saveDB([r.IP].concat([].slice.apply(n,[6,8])),"new_localconn_chk"))return e.hieu_comjs(["ATT_DEV_CONN",r.IP,"0","disconn",t,"1","2","3"]),void r.conn_err("0",6);L(H[1],"text-success",3),J("serno","value",n[7]),c.push(n[6]),c.push(JSON.parse(n[4])),c.__uuidphone=n[n.length-1],a=$.Deferred();var o=setTimeout((function(){a.reject(),r.conn_err(0)}),1e4);const i=btoa(n[7]+";"+n[6]),s=btoa([n[1],r.IP,"localconn"].join(String.fromCharCode(4)));k.WriteLn({type:"input",prompt:" ▲ ",value:"MAC: "+n[6],typeDelay:20},(function(e){k.WriteLn({type:"input",prompt:" ▲ ",value:"SN: "+n[7],typeDelay:20},(function(e){$.when(a).done((function(e){D((function(t){clearTimeout(o),e[5]=n[8],v[t](e,t,0),gloEVTs.giaidoan2_localDEV("fcmdev",[J.__doD,"33",r.IP]),r.TOK=s}))}))}))})),z.btnOK.__k=[i,s,n[7],"0"]}r.wdmso=["wdmso",n[7],n[6],JSON.parse(n[4]),"",n[5]],e.hieu_comjs(["ATT_DEV_CONN",r.IP,"0",l="conn_online",t,"conn_online=50","2","3"])}},online:function(e){if(0==(e=e.split(String.fromCharCode(31)))[1].indexOf("RTEVT_STA"))return e[0]="LOCAL_DEV_MSG",void E(e);if(0==e[1].indexOf("USR_EYE"))return void E(["usr",r.TOK,[],e[1].split(String.fromCharCode(4))[1]]);if(0==e[1].indexOf("ATT_LOG"))return void(r.cb&&(r.cb("OK",e[1].split(String.fromCharCode(4))[1]),delete r.cb));if(0==e[1].indexOf("CONN_STA")){var t=e[1].split(String.fromCharCode(4));t.shift();var o=t[1].split(";");if(t[1]=r.TOK?r.TOK:btoa([o[1],r.IP,"localconn"].join(String.fromCharCode(4))),t.push([]),t.push(0),o.length>4&&(t[3]=o[8],t.push(["wdmso",o[7],o[6],JSON.parse(o[4]),o[5]])),["reconnect","edit"].indexOf(l)>-1){if(o.length>4){i={};const e=btoa(o[7]+";"+o[6]);i[o[7]]=[o[6],JSON.parse(o[4]),o[5]],n.WDM[e]={wdms:i}}r.cb&&(r.cb("OK",i),delete r.cb),-1==["offline","kickoff"].indexOf(t[0])&&(l="online",t[0]=l)}return void E(t)}if((e=e[1].split(String.fromCharCode(4)))[1]=e[6].split("=")[1],r.TOK)return r.wdmso[4]=e[1],o=["online",r.TOK,[],50,r.wdmso],void E(o);c[2]=e[1];var i,s=z.btnOK.__k;(i={})[s[2]]=c,n.WDM[s[0]]={wdms:i};const d=[,,,[0,-9999,50],[,,,,,,c[2],,],1];r.IP&&a.resolve(d)},devcmd:function(e){l="online";var t="OK";if((e=e.split(String.fromCharCode(4))).length>0&&e[1].indexOf("offline")>-1)t="ERR";else{if(e[0].indexOf("ATT_LOG")>-1)return void(r.cb&&(r.cb(t,e[1]),delete r.cb));e.length>6&&(e[6]=e[6].split("=")[1])}r.cb&&(r.cb(t,[,,,,e]),delete r.cb)}},l="",d=function(n,o){const i=n[0],s=n[2]||[],a=function(e){return s[e]&&s[e].toString()||""};r.IP=i[0],r.TOK=n[1],n[3]&&(r.cb=n[3]),e.hieu_comjs(["ATT_DEV_CONN",i[0],i[1]?i[1]:"0",l=o||(r.TOK?"reconnect":"connect"),t,a(0),a(1),a(2),a(3),a(4),a(5),"",(i[2]||"").toString()])};r.conn_online=r.online,r.reconnect=r.online,r.edit=r.online,d(o,s),this.rst=function(e,t){"SND_OK"==e?r[e](t):t?d(e,t):r[l]?r[l](e):r.cb&&(r.cb(e),delete r.cb)}};$.extend(o,{connect:function(e){e[1]||z.btnCANCEL[0].option("disabled",!0),i[e[0][0]]=new s(e)},disconn:function(n){n.length>2&&gloEVTs.dumeTHIETBI.f1.bind(["offline",n[1]].concat(n[2]))(),e.hieu_comjs(["ATT_DEV_CONN",n[0],"0","disconn",t,"1","2","3"]),delete i[n[0]]},devcmd:function(e,t){!i[e[0][0]]&&t?i[e[0][0]]=new s(e,t||"devcmd"):i[e[0][0]].rst(e,t||"devcmd")},edit:function(e){i[e[0][0]].rst(e,"edit")},destroy:function(n){e.hieu_comjs(["ATT_DEV_CONN",n[0],"0","destroy",t,"1","2","3"])},fcmdev:function(n){var o=n.splice(0,1),i=JSON.parse(o[0].wdmo),s=o[0].fcmk||"",a="0"==n[0]?n[2]||"2":"tinydb",c="0"==i[1][0]||"0"==i[1][3]?"1":n[0];e.hieu_comjs(["ATT_DEV_CONN",s,c,"fcmdev",t,n[1]||"1",a,n[3]||"3",n[4]||"4",n[5]||"5",n[6]||"6",n[7]||"7",n[8]||"8",n[9]||"9",n[10]||"10"])}}),w0w.dopostqueue[t]=function(e){e=e.split(String.fromCharCode(3)),i.hasOwnProperty(e[0])&&("SND_OK"==e[1]?i[e[0]].rst(e[1],e[2]):i[e[0]].rst(e[1]))}}return gloEVTs.elUI_localDEV=function(e,t){return o.hasOwnProperty(e)?o[e](t):["reqoverlay"].indexOf(e)>-1&&o.hasOwnProperty("devcmd")?o.devcmd(t,e):"webapp"}}();const e=function(t){const n=$.Deferred();return e.raw?n.resolve():(t.trigger("get",[srcp$f+"/media/utils/device_step2.html"+src$id,function(o){var i=this;t.trigger("",[o,!1,$.Deferred().done((function(){const t=$(adCS(arguments[0],i));for(var o=t.length-1;o>-1;o--)if(t[o].classList&&t[o].classList.contains("device-page__content")){e.raw=t[o].outerHTML;break}apisvr.a$.scod(arguments[3].splice(0,1)[0]),e.wokJS=arguments[3],e.wokJS.unshift("_$_ATTLOG_$_".hexEncode()),n.resolve()}))])}]),n)};DEVI__Q.VER[1]=d,gloEVTs.giaidoan2=function(t,o,i,s){const a=function(t){e(i).done((function(s){const a=$(e.raw).on("buoc2_c$b",gloEVTs.cb$STEP2),l=(["JS_JS_payrollonline","attlog_oneday"].indexOf(o)>-1?i:r.find(".modal-body")).append(a).ready((function(t){if(w0w._cordovaNative&&l.addClass("client_dienthoai"),Main.hasOwnProperty("device_step2")){const t="dulieu"==i[0].tagName.toLowerCase();!0===t&&l.data("__bk_res",{sem:JSON.parse(atob(i.attr("sem"))),tok:i.attr("tok"),__fn:i.data("__fn")}),gloEVTs.giaidoan2.fnXX=new Main.device_step2({el:l,elUI:n,wokJS:e.wokJS,zkblob:c}),gloEVTs.giaidoan2.fnXX.initWOK(!1===t?i.__dbDAT.filter((function(e){return!0===e.isatt})):i.__dbDAT)}r.removeClass("invisible")})).on("DOWN_ATTLOG_END",(function(){console.log("DOWN_ATTLOG_END ",(new Date).getTime()),t()}));i$Desk&&["JS_JS_payrollonline","attlog_oneday","dev-user-get","hide-tit-hed"].indexOf(o)<0&&(r.log_scrollPerfect||(r.att_scrollPerfect=new PerfectScrollbar(l[0],{suppressScrollX:!0})))}))},c=function(e,t,o,i,s,a){setTimeout((function(){n[atob("X2NtZGRldg")].bind([s,e,t,o,c,i,a])()}),100);const c=function(e){console.log((new Date).getTime(),"dumeCB = function (args 3) : ",e[3]);const t=e[4].split("|"),n=parseInt(t[1])+parseInt(t[4]),o=parseInt(e[3])<0&&"0"==t[2]?" in progressing ..":" get block "+t[4]+" ~ "+n;toastMsg(e[2].ten+o,"OK"==e[0]?"success":"error",null,null,"fogetdev"),gloEVTs.giaidoan2.fnXX.bz2(e)};console.log("ios",s)};if(["JS_JS_payrollonline","attlog_oneday"].indexOf(o)>-1)return void DEVI__Q(a);const r=admin$.popup.bind().apply(null,[{a:"d",t:o,cBu:1,fw:0,cbClosed:function(e){r.att_scrollPerfect&&r.att_scrollPerfect.destroy(),n.unFixW&&n.unFixW()}}]),l=r.find("#popupdone");return r.find(".modal-dialog").addClass("modal-dialog-centered modal-dialog-zoom pu_fullW my-0").css({"max-width":"800px"}),["hide-tit-hed","dev-user-get"].indexOf(o)>-1&&r.addClass("invisible").find(".modal-header").remove(),r.find(".modal-footer").remove(),l.remove(),r[s||"one"]("shown.bs.modal",(function(){DEVI__Q(a)})),setTimeout(DEVI__Q((function(e){r.modal("show"),e()})),1),r}}}return e.prototype.publicSharedVar="quux",e.prototype.publicSharedMethod=function(e){},e}());